{"version":3,"sources":["../static/js/21.6a5daef5.chunk.js","screens/map/ChooseAddressScreen.js"],"names":["webpackJsonp","887","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_search_bar_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_search_bar__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_search_bar___default","__WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css__","__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon__","__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon___default","__WEBPACK_IMPORTED_MODULE_10_react__","__WEBPACK_IMPORTED_MODULE_10_react___default","__WEBPACK_IMPORTED_MODULE_11_react_redux__","__WEBPACK_IMPORTED_MODULE_12__views_common_Content__","__WEBPACK_IMPORTED_MODULE_13_react_dom__","__WEBPACK_IMPORTED_MODULE_13_react_dom___default","__WEBPACK_IMPORTED_MODULE_14_fetch_jsonp__","__WEBPACK_IMPORTED_MODULE_14_fetch_jsonp___default","__WEBPACK_IMPORTED_MODULE_15__common_NativeAppScreen__","__WEBPACK_IMPORTED_MODULE_16__core_utils_IConstant__","__WEBPACK_IMPORTED_MODULE_17__core_utils_Config__","__WEBPACK_IMPORTED_MODULE_18__assets_css_map_css__","__WEBPACK_IMPORTED_MODULE_19__store_actions_map_chooseAddressAction__","__WEBPACK_IMPORTED_MODULE_20__store_actions_location_locationAction__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","ChooseAddressScreen","_NativeAppScreen","this","_this","getPrototypeOf","name","address","lat","lng","point","match","params","undefined","latitude","longitude","state","mapHeight","keywords","showLoading","resultList","searchByKeywords","bind","chooseAddress","updateWindowDimensions","updateNativeTitle","prevProps","prevState","snapshot","baiduMapInited","initMap","isLocationFetching","getNearByPois","_this2","a","createElement","className","isFromNativeApp","mode","icon","type","onLeftClick","history","goBack","ref","view","scrollView","getWrappedInstance","id","style","height","position","top","left","right","placeholder","maxLength","defaultValue","onChange","text","setState","onSubmit","searchBar","renderAddressListView","toast","_this3","overflow","map","item","index","borderBottomColor","borderWidth","borderBottomStyle","padding","onClick","fontSize","color","_this4","markerIcon","window","BMap","Icon","Size","anchor","imageSize","Map","centerAndZoom","Point","appCityLongitude","appCityLatitude","addControl","NavigationControl","BMAP_NAVIGATION_CONTROL_SMALL","BMAP_ANCHOR_BOTTOM_RIGHT","enableGeolocation","offset","addEventListener","getCenter","getCurrentNearbyPois","_this5","innerHeight","findDOMNode","parentNode","offsetTop","_this6","info","onCancel","url","encodeURI","then","resp","json","results","addMark","poi","location","setCenter","clearOverlays","marker","Marker","addOverlay","_this7","dispatch","_this8","locStr","result","pois","poiList","addr","y","x","push","mapStateToProps","ownProps","system","native","isFetching"],"mappings":"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","file":"static/js/21.6a5daef5.chunk.js","sourcesContent":["webpackJsonp([21],{\n\n/***/ 887:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_search_bar_style_css__ = __webpack_require__(49);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_search_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_search_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_search_bar__ = __webpack_require__(50);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_search_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_search_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_13_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_fetch_jsonp__ = __webpack_require__(293);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14_fetch_jsonp___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14_fetch_jsonp__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__common_NativeAppScreen__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__core_utils_Config__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__assets_css_map_css__ = __webpack_require__(158);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_18__assets_css_map_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_18__assets_css_map_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_19__store_actions_map_chooseAddressAction__ = __webpack_require__(302);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_20__store_actions_location_locationAction__ = __webpack_require__(165);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ChooseAddressScreen=function(_NativeAppScreen){_inherits(ChooseAddressScreen,_NativeAppScreen);function ChooseAddressScreen(props){_classCallCheck(this,ChooseAddressScreen);var _this=_possibleConstructorReturn(this,(ChooseAddressScreen.__proto__||Object.getPrototypeOf(ChooseAddressScreen)).call(this,props));_this.name='';_this.address='';_this.lat='';_this.lng='';_this.point=null;_this.name=_this.props.match.params.name;_this.address=_this.props.match.params.address;_this.lat=_this.props.match.params.lat;_this.lng=_this.props.match.params.lng;_this.point={lat:_this.lat&&_this.lat!==undefined?_this.lat:_this.props.latitude,lng:_this.lng&&_this.lng!==undefined?_this.lng:_this.props.longitude,address:_this.address&&_this.address!==undefined?_this.address:_this.props.address};_this.state={mapHeight:0,keywords:'',showLoading:true,resultList:[]};_this.searchByKeywords=_this.searchByKeywords.bind(_this);_this.chooseAddress=_this.chooseAddress.bind(_this);return _this;}_createClass(ChooseAddressScreen,[{key:'componentDidMount',value:function componentDidMount(){this.updateWindowDimensions();this.updateNativeTitle(this.name);}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.baiduMapInited&&!prevProps.baiduMapInited){this.initMap();}if(!this.props.isLocationFetching&&prevProps.isLocationFetching){this.point={lat:this.props.latitude,lng:this.props.longitude,address:this.props.address};this.getNearByPois(this.point);}}},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',{className:this.props.isFromNativeApp?'isFromNativeApp':null},this.props.isFromNativeApp?null:__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',icon:__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon___default.a,{type:'left'}),onLeftClick:function onLeftClick(){_this2.props.history.goBack();}},'\\u4F4D\\u7F6E\\u9009\\u62E9'),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12__views_common_Content__[\"a\" /* default */],{className:'chooseAddressPage',ref:function ref(view){_this2.scrollView=view?view.getWrappedInstance():_this2.scrollView;}},__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',{id:'chooseAddressMap',style:{height:this.state.mapHeight+'px'}}),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_search_bar___default.a,{className:'searchBar',style:{position:'absolute',top:'0',left:'0',right:'0'},placeholder:'\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u5B57',maxLength:8,defaultValue:this.state.keywords,onChange:function onChange(text){_this2.setState({keywords:text});},onSubmit:this.searchByKeywords,ref:function ref(view){_this2.searchBar=view;}}),this.renderAddressListView(),this.state.showLoading?__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null));}},{key:'renderAddressListView',value:function renderAddressListView(){var _this3=this;if(!this.state.resultList||this.state.resultList.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',{style:{height:this.state.mapHeight,overflow:'scroll'}},this.state.resultList.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',{key:index,className:'resultRow',style:{borderBottomColor:'#999',borderWidth:'1px',borderBottomStyle:'dashed',padding:'5px 8px'},onClick:function onClick(){_this3.chooseAddress(item);}},__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',{style:{fontSize:'14px',color:'#78a1c6'},className:'resultItemTitle'},item.name),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',{style:{fontSize:'14px',color:'#999999'},className:'resultItemAddress'},item.address));}));}},{key:'initMap',value:function initMap(){var _this4=this;// 地图标记图片\nthis.markerIcon=new window.BMap.Icon(__webpack_require__(284),new window.BMap.Size(30,30),{anchor:new window.BMap.Size(15,30),imageSize:new window.BMap.Size(30,30)});this.map=this.map?this.map:new window.BMap.Map('chooseAddressMap');this.map.centerAndZoom(new window.BMap.Point(__WEBPACK_IMPORTED_MODULE_17__core_utils_Config__[\"a\" /* default */].instance.appCityLongitude,__WEBPACK_IMPORTED_MODULE_17__core_utils_Config__[\"a\" /* default */].instance.appCityLatitude),11);this.map.addControl(new window.BMap.NavigationControl({type:window.BMAP_NAVIGATION_CONTROL_SMALL,anchor:window.BMAP_ANCHOR_BOTTOM_RIGHT,enableGeolocation:true,offset:new window.BMap.Size(20,20)}));this.map.addEventListener('dragend',function(){_this4.getNearByPois(_this4.map.getCenter());});this.getCurrentNearbyPois();}},{key:'updateWindowDimensions',value:function updateWindowDimensions(){var _this5=this;var height=window.innerHeight-__WEBPACK_IMPORTED_MODULE_13_react_dom___default.a.findDOMNode(this).parentNode.offsetTop;this.setState({mapHeight:height/2.},function(){if(_this5.props.baiduMapInited){_this5.initMap();}});}},{key:'searchByKeywords',value:function searchByKeywords(){var _this6=this;if(!this.state.keywords){__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default.a.info('请输入关键字');return;}this.searchBar.onCancel();this.setState({showLoading:true});var url='http://api.map.baidu.com/place/v2/search?q='+this.state.keywords+'&region=全国&page_size=20&output=json&ak=edD6aFgNKfVBeAlaU6R9L9bc8dn2vrHo';url=encodeURI(url);__WEBPACK_IMPORTED_MODULE_14_fetch_jsonp___default()(url).then(function(resp){return resp.json();}).then(function(json){_this6.setState({showLoading:false});if(json&&json.results&&json.results.length>0){_this6.addMark(json.results[0]);_this6.setState({resultList:json.results});}});}},{key:'addMark',value:function addMark(poi){if(!poi||!poi.location){__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default.a.info('关键字范围太大，请输入具体地址!');return;}var point=new window.BMap.Point(poi.location.lng,poi.location.lat);this.map.setCenter(point);this.map.clearOverlays();var marker=new window.BMap.Marker(point,{icon:this.markerIcon});this.map.addOverlay(marker);}},{key:'chooseAddress',value:function chooseAddress(item){var _this7=this;if(!item||!item.name||!item.address||!item.location){return;}this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_19__store_actions_map_chooseAddressAction__[\"b\" /* updateChooseAddressAction */])(item)).then(function(){_this7.props.history.goBack();});}},{key:'getNearByPois',value:function getNearByPois(point){var _this8=this;if(!point){return;}var locStr=point.lat+','+point.lng;var url='http://api.map.baidu.com/geocoder/v2/?location='+locStr+'&output=json&pois=1&ak='+__WEBPACK_IMPORTED_MODULE_16__core_utils_IConstant__[\"c\" /* BAIDU_MAP_KEY */];__WEBPACK_IMPORTED_MODULE_14_fetch_jsonp___default()(url).then(function(resp){return resp.json();}).then(function(json){_this8.setState({showLoading:false});if(json&&json.result&&json.result.pois&&json.result.pois.length>0){var poiList=[];for(var i=0;i<json.result.pois.length;i++){var item=json.result.pois[i];var poi={name:item.name,address:item.addr,location:{lat:item.point.y,lng:item.point.x}};poiList.push(poi);if(i===0){_this8.addMark(poi);}}_this8.setState({resultList:poiList});}});}},{key:'getCurrentNearbyPois',value:function getCurrentNearbyPois(){if(this.point.lat>0&&this.point.lat>0){this.getNearByPois(this.point);}else{this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_20__store_actions_location_locationAction__[\"c\" /* asyncGetUserLocationAction */])(true));}}}]);return ChooseAddressScreen;}(__WEBPACK_IMPORTED_MODULE_15__common_NativeAppScreen__[\"a\" /* default */]);var mapStateToProps=function mapStateToProps(state,ownProps){return{baiduMapInited:state.system.baiduMapInited,isFromNativeApp:state.native.isFromNativeApp,latitude:state.system.latitude,longitude:state.system.longitude,address:state.system.address,isLocationFetching:state.system.isFetching};};ChooseAddressScreen=Object(__WEBPACK_IMPORTED_MODULE_11_react_redux__[\"b\" /* connect */])(mapStateToProps)(ChooseAddressScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (ChooseAddressScreen);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/21.6a5daef5.chunk.js","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, Icon, SearchBar, ActivityIndicator, Toast } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport ReactDOM from 'react-dom';\r\nimport fetchJsonp from 'fetch-jsonp';\r\nimport NativeAppScreen from '../common/NativeAppScreen';\r\nimport * as IConstant from '../../core/utils/IConstant';\r\nimport Config from '../../core/utils/Config';\r\nimport '../../assets/css/map.css';\r\nimport { updateChooseAddressAction } from '../../store/actions/map/chooseAddressAction';\r\nimport { asyncGetUserLocationAction } from '../../store/actions/location/locationAction';\r\n\r\nclass ChooseAddressScreen extends NativeAppScreen\r\n{\r\n    name = '';\r\n    address = '';\r\n    lat = '';\r\n    lng = '';\r\n    point = null;\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.name = this.props.match.params.name;\r\n        this.address = this.props.match.params.address;\r\n        this.lat = this.props.match.params.lat;\r\n        this.lng = this.props.match.params.lng;\r\n        this.point = {\r\n            lat: (this.lat && this.lat !== undefined ?  this.lat : this.props.latitude) ,\r\n            lng: (this.lng && this.lng !== undefined ?  this.lng : this.props.longitude) ,\r\n            address: (this.address && this.address !== undefined ?  this.address : this.props.address)\r\n        };\r\n        this.state = {\r\n            mapHeight: 0,\r\n            keywords: '',\r\n            showLoading: true,\r\n            resultList: [],\r\n        };\r\n        this.searchByKeywords = this.searchByKeywords.bind(this);\r\n        this.chooseAddress = this.chooseAddress.bind(this);\r\n    }\r\n    componentDidMount()\r\n    {\r\n        this.updateWindowDimensions();\r\n        this.updateNativeTitle(this.name);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot)\r\n    {\r\n        if(this.props.baiduMapInited && !prevProps.baiduMapInited)\r\n        {\r\n            this.initMap();\r\n        }\r\n        if (!this.props.isLocationFetching && prevProps.isLocationFetching)\r\n        {\r\n            this.point = {\r\n                lat: this.props.latitude,\r\n                lng: this.props.longitude,\r\n                address: this.props.address\r\n            };\r\n            this.getNearByPois(this.point);\r\n        }\r\n    }\r\n\r\n    render()\r\n    {\r\n        return (\r\n            <div className={ this.props.isFromNativeApp ? 'isFromNativeApp' : null }>\r\n                {\r\n                    this.props.isFromNativeApp\r\n                        ? null\r\n                        :\r\n                        <NavBar mode=\"dark\" \r\n                            className=\"navBar\"\r\n                            icon={<Icon type=\"left\" />}\r\n                            onLeftClick={() => {\r\n                                this.props.history.goBack();\r\n                            }}>\r\n                            位置选择\r\n                        </NavBar>\r\n                }\r\n                <Content className=\"chooseAddressPage\" ref={(view)=>{this.scrollView = view ? view.getWrappedInstance() : this.scrollView;}}>\r\n                    <div id=\"chooseAddressMap\" style={{height: (this.state.mapHeight + 'px')}}></div>\r\n                    <SearchBar className=\"searchBar\" style={{position:'absolute',top:'0',left:'0',right:'0'}} \r\n                        placeholder=\"请输入关键字\" maxLength={8} \r\n                        defaultValue={this.state.keywords}\r\n                        onChange={(text)=>{this.setState({keywords: text});}}\r\n                        onSubmit={this.searchByKeywords}\r\n                        ref={(view) => { this.searchBar = view; }}\r\n                    />\r\n                    {\r\n                        this.renderAddressListView()\r\n                    }\r\n                    {\r\n                        this.state.showLoading ?\r\n                            <ActivityIndicator \r\n                                toast\r\n                                text=\"Loading...\" />\r\n                            :\r\n                            null\r\n                    }\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderAddressListView()\r\n    {\r\n        if(!this.state.resultList || this.state.resultList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (<div style={{height: this.state.mapHeight, overflow: 'scroll'}}>\r\n            {\r\n                this.state.resultList.map((item, index) => <div key={index}\r\n                    className=\"resultRow\" style={{borderBottomColor:'#999',borderWidth:'1px',borderBottomStyle:'dashed',padding:'5px 8px'}} onClick={() => {\r\n                        this.chooseAddress(item);\r\n                    }}>\r\n                    <div style={{fontSize:'14px',color:'#78a1c6'}} className=\"resultItemTitle\">{item.name}</div>\r\n                    <div style={{fontSize:'14px',color:'#999999'}} className=\"resultItemAddress\">{item.address}</div>\r\n                </div>\r\n                )\r\n            }\r\n        </div>);\r\n    }\r\n    \r\n    initMap()\r\n    {\r\n        // 地图标记图片\r\n        this.markerIcon = new window.BMap.Icon(require('../../assets/images/map/common_poi@2x.png'), new window.BMap.Size(30, 30), {\r\n            anchor: new window.BMap.Size(15, 30),\r\n            imageSize: new window.BMap.Size(30, 30)\r\n        });\r\n\r\n        this.map = this.map ? this.map : new window.BMap.Map('chooseAddressMap');\r\n        this.map.centerAndZoom(new window.BMap.Point(Config.instance.appCityLongitude, Config.instance.appCityLatitude), 11);\r\n        this.map.addControl(new window.BMap.NavigationControl({type: window.BMAP_NAVIGATION_CONTROL_SMALL, anchor: window.BMAP_ANCHOR_BOTTOM_RIGHT, enableGeolocation: true, offset: new window.BMap.Size(20, 20)}));\r\n\r\n        \r\n\r\n        this.map.addEventListener('dragend', ()=>{\r\n            this.getNearByPois(this.map.getCenter());\r\n        });\r\n\r\n        this.getCurrentNearbyPois();\r\n    }\r\n\r\n    updateWindowDimensions()\r\n    {\r\n        const height = window.innerHeight - ReactDOM.findDOMNode(this).parentNode.offsetTop;\r\n        this.setState({ mapHeight: height/2. }, ()=>{\r\n            if (this.props.baiduMapInited)\r\n            {\r\n                this.initMap();\r\n            }\r\n        });\r\n    }\r\n    searchByKeywords()\r\n    {\r\n        if(!this.state.keywords)\r\n        {\r\n            Toast.info('请输入关键字');\r\n            return;\r\n        }\r\n        this.searchBar.onCancel();\r\n        this.setState({showLoading: true});\r\n        let url = 'http://api.map.baidu.com/place/v2/search?q=' + this.state.keywords + '&region=全国&page_size=20&output=json&ak=edD6aFgNKfVBeAlaU6R9L9bc8dn2vrHo';\r\n        url = encodeURI(url);\r\n        fetchJsonp(url)\r\n            .then(resp => resp.json())\r\n            .then(json => {\r\n                this.setState({showLoading: false});\r\n                if(json && json.results && json.results.length > 0)\r\n                {\r\n                    this.addMark(json.results[0]);\r\n                    this.setState({resultList: json.results});\r\n                }\r\n            });\r\n    }\r\n    addMark(poi)\r\n    {\r\n        if(!poi || !poi.location)\r\n        {\r\n            Toast.info('关键字范围太大，请输入具体地址!');\r\n            return;\r\n        }\r\n        let point = new window.BMap.Point(poi.location.lng, poi.location.lat);\r\n        this.map.setCenter(point);\r\n\r\n        this.map.clearOverlays();\r\n\r\n        var marker = new window.BMap.Marker(point, {icon: this.markerIcon});\r\n        this.map.addOverlay(marker);\r\n    }\r\n    chooseAddress(item)\r\n    {\r\n        if(!item || !item.name || !item.address || !item.location)\r\n        {\r\n            return;\r\n        }\r\n        this.props.dispatch(updateChooseAddressAction(item))\r\n            .then(() => {\r\n                this.props.history.goBack();\r\n            });\r\n    }\r\n    getNearByPois(point)\r\n    {\r\n        if(!point)\r\n        {\r\n            return;\r\n        }\r\n        let locStr = point.lat + ',' + point.lng;\r\n        let url = 'http://api.map.baidu.com/geocoder/v2/?location=' + locStr + '&output=json&pois=1&ak=' + IConstant.BAIDU_MAP_KEY;\r\n        fetchJsonp(url)\r\n            .then(resp => resp.json())\r\n            .then(json => {\r\n                this.setState({showLoading: false});\r\n                if(json && json.result && json.result.pois\r\n                    && json.result.pois.length > 0)\r\n                {\r\n                    let poiList = [];\r\n                    for(let i = 0; i < json.result.pois.length; i++)\r\n                    {\r\n                        let item = json.result.pois[i];\r\n                        let poi = {\r\n                            name: item.name,\r\n                            address: item.addr,\r\n                            location: {\r\n                                lat: item.point.y,\r\n                                lng: item.point.x,\r\n                            },\r\n                        };\r\n                        poiList.push(poi);\r\n                        if(i === 0)\r\n                        {\r\n                            this.addMark(poi);\r\n                        }\r\n                    }\r\n                    this.setState({resultList: poiList});\r\n                }\r\n            });\r\n    }\r\n    getCurrentNearbyPois()\r\n    {\r\n        if (this.point.lat > 0 && this.point.lat > 0)\r\n        {\r\n            this.getNearByPois(this.point);\r\n        }\r\n        else\r\n        {   \r\n            this.props.dispatch(asyncGetUserLocationAction(true));\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    return {\r\n        baiduMapInited: state.system.baiduMapInited,\r\n        isFromNativeApp: state.native.isFromNativeApp,\r\n        latitude: state.system.latitude,\r\n        longitude: state.system.longitude,\r\n        address: state.system.address, \r\n        isLocationFetching: state.system.isFetching\r\n    };\r\n};\r\n\r\nChooseAddressScreen = connect(mapStateToProps)(ChooseAddressScreen);\r\n\r\nexport default ChooseAddressScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/map/ChooseAddressScreen.js"],"sourceRoot":""}