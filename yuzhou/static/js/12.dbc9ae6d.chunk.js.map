{"version":3,"sources":["../static/js/12.dbc9ae6d.chunk.js","screens/scenic/SceneryDetailScreen.js","store/actions/scenic/detailAction.js","views/scenic/SceneryListView.js"],"names":["webpackJsonp","882","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_4_react__","__WEBPACK_IMPORTED_MODULE_4_react___default","__WEBPACK_IMPORTED_MODULE_5_react_redux__","__WEBPACK_IMPORTED_MODULE_6__views_common_Content__","__WEBPACK_IMPORTED_MODULE_7_react_dom__","__WEBPACK_IMPORTED_MODULE_7_react_dom___default","__WEBPACK_IMPORTED_MODULE_8__views_scenic_SceneryListView__","__WEBPACK_IMPORTED_MODULE_9__store_actions_scenic_detailAction__","__WEBPACK_IMPORTED_MODULE_10__views_photo_brower_PhotoBrowerView__","__WEBPACK_IMPORTED_MODULE_11__views_common_LeftContentView__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","SceneryDetailScreen","_PureComponent","this","_this","getPrototypeOf","showSceneryDetail","bind","showImageBrowser","state","imageList","prevProps","prevState","snapshot","match","params","sceneryCode","restoreScrollViewPosition","_this2","a","createElement","mode","className","leftContent","ref","view","LeftContentView","getWrappedInstance","scrollView","goBackAction","history","onLeftClick","goHome","renderHeaderView","renderBasicView","renderOtherSceneryListView","photoBrowserView","isValidData","index","getSelectedSceneryIndex","item","sceneryList","GetImage","ImageList","onClick","autoplay","dots","swiping","infinite","selectedIndex","swipeSpeed","map","style","backgroundImage","ImgSrc","marginTop","CnName","Scenerydesc","otherItems","slice","concat","Code","offsetY","findDOMNode","scrollTop","dispatch","scenicCode","isNaN","scrollViewOffset","scrollToY","cacheScrollOffset","push","imageItem","replace","open","mapStateToProps","ownProps","obj","scenic","detailScreen","897","code","type","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","SCENIC","DETAIL","GO_BACK","asyncGetDetailAction","getState","_getDetailRequestAction","_fetchDetail","then","resp","results","_getDetailSuccessAction","catch","error","_getDetailFailureAction","asyncGetTicketListAction","_getTicketListRequestAction","_fetchTicketList","_getTicketListSuccessAction","_getTicketListFailureAction","asyncGetSceneryListAction","_getGetSceneryListRequestAction","_fetchGetSceneryList","_getGetSceneryListSuccessAction","_getGetSceneryListFailureAction","setDetailScrollerPositionAction","offset","SET_DETAIL_SCROLL_OFFSET","setSceneryListScrollerPositionAction","SET_SCENERY_LIST_SCROLL_OFFSET","setSceneryDetailScrollerPositionAction","SET_SCENERY_DETAIL_SCROLL_OFFSET","kvDict","ConditionParams","Params","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","postToPortalWithUrl","HOST_E_BUSINESS","ELEMENTS","SceneryList","json","GET_SCENERY_LIST_REQUEST","GET_SCENERY_LIST_SUCCESS","GET_SCENERY_LIST_FAILURE","message","PlayDate","Date","formatDate","AttractionsTicketList","GET_TICKET_LIST_REQUEST","GET_TICKET_LIST_SUCCESS","ticketList","GET_TICKET_LIST_FAILURE","AttractionsDetail","GET_DETAIL_REQUEST","GET_DETAIL_SUCCESS","detailItem","GET_DETAIL_FAILURE","900","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","SceneryListView","_ref","_temp","_ret","_len","arguments","args","Array","_key","apply","columnCount","renderSceneryListView","rows","rowLen","Math","ceil","row","renderSceneryRowView","isLastRow","_this3","itemWidth","window","innerWidth","itemHeight","marginBottom","_index","width","height","src","ImageFrontUrl","alt"],"mappings":"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","file":"static/js/12.dbc9ae6d.chunk.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 882:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__views_scenic_SceneryListView__ = __webpack_require__(900);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__store_actions_scenic_detailAction__ = __webpack_require__(897);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__views_photo_brower_PhotoBrowerView__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__views_common_LeftContentView__ = __webpack_require__(23);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var SceneryDetailScreen=function(_PureComponent){_inherits(SceneryDetailScreen,_PureComponent);function SceneryDetailScreen(props){_classCallCheck(this,SceneryDetailScreen);var _this=_possibleConstructorReturn(this,(SceneryDetailScreen.__proto__||Object.getPrototypeOf(SceneryDetailScreen)).call(this,props));_this.showSceneryDetail=_this.showSceneryDetail.bind(_this);_this.showImageBrowser=_this.showImageBrowser.bind(_this);_this.state={showImageBrowser:false,imageList:[]};return _this;}_createClass(SceneryDetailScreen,[{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState,snapshot){if(prevProps.match.params.sceneryCode!==this.props.match.params.sceneryCode){this.restoreScrollViewPosition(this.props);}}},{key:'componentDidMount',value:function componentDidMount(){this.restoreScrollViewPosition(this.props);}},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',leftContent:__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11__views_common_LeftContentView__[\"a\" /* default */],{ref:function ref(view){_this2.LeftContentView=view?view.getWrappedInstance():_this2.scrollView;},goBackAction:function goBackAction(){},history:this.props.history}),onLeftClick:function onLeftClick(){_this2.LeftContentView.goHome();}},'\\u666F\\u70B9\\u8BE6\\u60C5'),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__views_common_Content__[\"a\" /* default */],{ref:function ref(view){_this2.scrollView=view?view.getWrappedInstance():_this2.scrollView;}},this.renderHeaderView(),this.renderBasicView(),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'homeSplitSpace'}),this.renderOtherSceneryListView(),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__views_photo_brower_PhotoBrowerView__[\"a\" /* default */],{ref:function ref(view){_this2.photoBrowserView=view?view.getWrappedInstance():_this2.scrollView;}})));}},{key:'renderHeaderView',value:function renderHeaderView(){if(!this.isValidData()){return null;}var index=this.getSelectedSceneryIndex();var item=this.props.sceneryList[index];if(!item.GetImage||!item.GetImage.ImageList||item.GetImage.ImageList.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailHeader',onClick:this.showImageBrowser},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default.a,{className:'scenicDetailHeaderImgSlider',autoplay:true,dots:false,swiping:true,infinite:true,selectedIndex:0,swipeSpeed:35},item.GetImage.ImageList.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{key:index,className:'scenicDetailHeaderImg',style:{backgroundImage:'url('+item.ImgSrc+')'}});})),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailHeaderBottom'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomText',style:{marginTop:'130px'}},item.CnName)));}},{key:'renderBasicView',value:function renderBasicView(){if(!this.isValidData()){return null;}var item=this.props.sceneryList[this.getSelectedSceneryIndex()];return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailInfoRows sceneryDetailInfoRows'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailInfoRow'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u666F\\u70B9\\u4ECB\\u7ECD'),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailInfoValue scenicDetailMultDesc'},item.Scenerydesc))));}},{key:'renderOtherSceneryListView',value:function renderOtherSceneryListView(){if(!this.isValidData()){return null;}var index=this.getSelectedSceneryIndex();var otherItems=this.props.sceneryList.slice(0,index).concat(this.props.sceneryList.slice(index+1));if(!otherItems||otherItems.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'scenicDetailInfoLabel sceneryDetailInfoLabel'},'\\u5176\\u4ED6\\u666F\\u70B9'),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__views_scenic_SceneryListView__[\"a\" /* default */],{sceneryList:otherItems,showSceneryDetail:this.showSceneryDetail}));}},{key:'isValidData',value:function isValidData(){return this.props.sceneryList&&this.props.sceneryList.length>0&&this.props.match.params.sceneryCode&&this.props.match.params.sceneryCode.length>0;}},{key:'getSelectedSceneryIndex',value:function getSelectedSceneryIndex(){if(!this.isValidData()){return-1;}for(var i=0;i<this.props.sceneryList.length;i++){var item=this.props.sceneryList[i];if(item.Code===this.props.match.params.sceneryCode){return i;}}return-1;}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){var offsetY=__WEBPACK_IMPORTED_MODULE_7_react_dom___default.a.findDOMNode(this.scrollView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_9__store_actions_scenic_detailAction__[\"f\" /* setSceneryDetailScrollerPositionAction */])(this.props.match.params.scenicCode,this.props.match.params.sceneryCode,offsetY));}},{key:'restoreScrollViewPosition',value:function restoreScrollViewPosition(props){if(this.scrollView){if(!isNaN(props.scrollViewOffset)){this.scrollView.scrollToY(props.scrollViewOffset);}else{this.scrollView.scrollToY(0);}}}},{key:'showSceneryDetail',value:function showSceneryDetail(item){this.cacheScrollOffset();this.props.history.push('/scenic/scenery-detail/'+this.props.match.params.scenicCode+'/'+item.Code);}},{key:'showImageBrowser',value:function showImageBrowser(){var index=this.getSelectedSceneryIndex();var item=this.props.sceneryList[index];if(!item.GetImage||!item.GetImage.ImageList||item.GetImage.ImageList.length===0){return null;}var imageList=[];for(var i=0;i<item.GetImage.ImageList.length;i++){var imageItem=item.GetImage.ImageList[i];imageList.push(imageItem.ImgSrc.replace('Small','Large'));}this.photoBrowserView.open(imageList);}}]);return SceneryDetailScreen;}(__WEBPACK_IMPORTED_MODULE_4_react__[\"PureComponent\"]);var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.scenic.detailScreen[ownProps.match.params.scenicCode];obj=obj?obj:{};return{sceneryList:obj.sceneryList,scrollViewOffset:obj['sceneryDetailScreenScrollViewOffset_'+ownProps.match.params.sceneryCode]};};SceneryDetailScreen=Object(__WEBPACK_IMPORTED_MODULE_5_react_redux__[\"b\" /* connect */])(mapStateToProps)(SceneryDetailScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (SceneryDetailScreen);\n\n/***/ }),\n\n/***/ 897:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncGetDetailAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = asyncGetTicketListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetSceneryListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = setDetailScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = setSceneryListScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = setSceneryDetailScrollerPositionAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction goBackAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GO_BACK,code:code};}// 景区详情\nfunction asyncGetDetailAction(code){return function(dispatch,getState){dispatch(_getDetailRequestAction(code));return _fetchDetail(code).then(function(resp){resp=resp&&resp.results&&resp.results.length>0?resp.results[0]:resp;dispatch(_getDetailSuccessAction(code,resp));}).catch(function(error){dispatch(_getDetailFailureAction(code,error));});};}// 门票列表\nfunction asyncGetTicketListAction(code){return function(dispatch,getState){dispatch(_getTicketListRequestAction(code));return _fetchTicketList(code).then(function(resp){resp=resp?resp.results:[];dispatch(_getTicketListSuccessAction(code,resp));}).catch(function(error){dispatch(_getTicketListFailureAction(code,error));});};}// 景点列表\nfunction asyncGetSceneryListAction(code){return function(dispatch,getState){dispatch(_getGetSceneryListRequestAction(code));return _fetchGetSceneryList(code).then(function(resp){resp=resp?resp.results:[];dispatch(_getGetSceneryListSuccessAction(code,resp));}).catch(function(error){dispatch(_getGetSceneryListFailureAction(code,error));});};}// 景区详情页面滚动条位置\nfunction setDetailScrollerPositionAction(code,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,code:code,scrollViewOffset:offset};}// 景点列表页面滚动条位置\nfunction setSceneryListScrollerPositionAction(code,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,code:code,scrollViewOffset:offset};}function setSceneryDetailScrollerPositionAction(scenicCode,sceneryCode,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,code:scenicCode,sceneryCode:sceneryCode,scrollViewOffset:offset};}function _fetchGetSceneryList(code){var kvDict={ConditionParams:{Params:{Code:code}}};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortalWithUrl(__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS,__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.SceneryList,kvDict).then(function(resp){return resp.json();});}function _getGetSceneryListRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,code:code};}function _getGetSceneryListSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,code:code,sceneryList:resp};}function _getGetSceneryListFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,code:code,message:error};}function _fetchTicketList(code){var kvDict={ConditionParams:{Params:{Code:code,PlayDate:new Date().formatDate('YYYY-MM-DD')}}};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortalWithUrl(__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS,__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.AttractionsTicketList,kvDict).then(function(resp){return resp.json();});}function _getTicketListRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,code:code};}function _getTicketListSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,code:code,ticketList:resp};}function _getTicketListFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,code:code,message:error};}function _fetchDetail(code){var kvDict={ConditionParams:{Params:{Code:code}}};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortalWithUrl(__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS,__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.AttractionsDetail,kvDict).then(function(resp){return resp.json();});}function _getDetailRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_REQUEST,code:code};}function _getDetailSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_SUCCESS,code:code,detailItem:resp};}function _getDetailFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_FAILURE,code:code,message:error};}\n\n/***/ }),\n\n/***/ 900:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var SceneryListView=function(_PureComponent){_inherits(SceneryListView,_PureComponent);function SceneryListView(){var _ref;var _temp,_this,_ret;_classCallCheck(this,SceneryListView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SceneryListView.__proto__||Object.getPrototypeOf(SceneryListView)).call.apply(_ref,[this].concat(args))),_this),_this.columnCount=3,_temp),_possibleConstructorReturn(_this,_ret);}// 每行3列\n_createClass(SceneryListView,[{key:'render',value:function render(){return this.renderSceneryListView();}},{key:'renderSceneryListView',value:function renderSceneryListView(){var _this2=this;if(!this.props.sceneryList||this.props.sceneryList.length===0){return null;}var rows=[];var rowLen=Math.ceil(this.props.sceneryList.length/this.columnCount);for(var i=0;i<rowLen;i++){rows[i]=this.props.sceneryList.slice(i*this.columnCount,(i+1)*this.columnCount);}return rows.map(function(row,index){return _this2.renderSceneryRowView(row,index,index===rows.length-1);});}},{key:'renderSceneryRowView',value:function renderSceneryRowView(row,index,isLastRow){var _this3=this;var itemWidth=(window.innerWidth-(this.columnCount+1)*12)/this.columnCount;var itemHeight=itemWidth*0.75;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:index,className:'sceneryListRow',style:isLastRow?{marginBottom:'12px'}:{}},row.map(function(item,_index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:_index,onClick:function onClick(){if(_this3.props.showSceneryDetail){_this3.props.showSceneryDetail(item);}},className:'sceneryListRowItem',style:{width:itemWidth+'px',height:itemHeight+'px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'sceneryListRowImg',src:item.GetImage?item.GetImage.ImageFrontUrl:'',style:{width:itemWidth+'px',height:itemHeight+'px'},alt:''}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'sceneryListRowTitle'},item.CnName));}));}}]);return SceneryListView;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]);/* harmony default export */ __webpack_exports__[\"a\"] = (SceneryListView);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/12.dbc9ae6d.chunk.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, Carousel } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport ReactDOM from 'react-dom';\r\nimport SceneryListView from '../../views/scenic/SceneryListView';\r\nimport { setSceneryDetailScrollerPositionAction } from '../../store/actions/scenic/detailAction';\r\nimport PhotoBrowserView from '../../views/photo-brower/PhotoBrowerView';\r\nimport LeftContentView from '../../views/common/LeftContentView';\r\nclass SceneryDetailScreen extends PureComponent\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.showSceneryDetail = this.showSceneryDetail.bind(this);\r\n        this.showImageBrowser = this.showImageBrowser.bind(this);\r\n        this.state = {\r\n            showImageBrowser:false,\r\n            imageList:[]\r\n        };\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot)\r\n    {\r\n        if(prevProps.match.params.sceneryCode !== this.props.match.params.sceneryCode)\r\n        {\r\n            this.restoreScrollViewPosition(this.props);\r\n        }\r\n    }\r\n    componentDidMount()\r\n    {\r\n        this.restoreScrollViewPosition(this.props);\r\n    }\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    leftContent={<LeftContentView\r\n                        ref={(view) => { this.LeftContentView = view ? view.getWrappedInstance() : this.scrollView; }}\r\n                        goBackAction={() => {}}\r\n                        history={this.props.history}\r\n                    />}\r\n                    onLeftClick={() => {\r\n                        this.LeftContentView.goHome();\r\n                    }}>\r\n                    景点详情\r\n                </NavBar>\r\n                <Content ref={(view)=>{this.scrollView = view ? view.getWrappedInstance() : this.scrollView;}}>\r\n                    {\r\n                        this.renderHeaderView()\r\n                    }\r\n                    {\r\n                        this.renderBasicView()\r\n                    }\r\n                    <div className=\"homeSplitSpace\"></div>\r\n                    {\r\n                        this.renderOtherSceneryListView()\r\n                    }\r\n                    <PhotoBrowserView \r\n                        ref={(view)=>{this.photoBrowserView = view ? view.getWrappedInstance() : this.scrollView;}}\r\n                    />\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    renderHeaderView()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return null;\r\n        }\r\n        let index = this.getSelectedSceneryIndex();\r\n        let item = this.props.sceneryList[index];\r\n        if(!item.GetImage || !item.GetImage.ImageList || item.GetImage.ImageList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div className=\"scenicDetailHeader\" onClick={this.showImageBrowser}>\r\n                <Carousel\r\n                    className=\"scenicDetailHeaderImgSlider\"\r\n                    autoplay={true}\r\n                    dots={false}\r\n                    swiping={true}\r\n                    infinite\r\n                    selectedIndex={0}\r\n                    swipeSpeed={35}>\r\n                    {\r\n                        item.GetImage.ImageList.map((item, index)=><div key={index} className=\"scenicDetailHeaderImg\" style={{backgroundImage: `url(${item.ImgSrc})`}}/>)\r\n                    }\r\n                </Carousel>\r\n                <div className=\"scenicDetailHeaderBottom\">\r\n                    <div className=\"scenicDetailHeaderBottomText\" style={{marginTop: '130px'}}>{item.CnName}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderBasicView()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return null;\r\n        }\r\n        let item = this.props.sceneryList[this.getSelectedSceneryIndex()];\r\n        return (\r\n            <div>\r\n                <div className=\"scenicDetailInfoRows sceneryDetailInfoRows\">\r\n                    <div className=\"scenicDetailInfoRow\">\r\n                        <div className=\"scenicDetailInfoLabel\">景点介绍</div>\r\n                        <div className=\"scenicDetailInfoValue scenicDetailMultDesc\">{item.Scenerydesc}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderOtherSceneryListView()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return null;\r\n        }\r\n        let index = this.getSelectedSceneryIndex();\r\n        let otherItems = this.props.sceneryList.slice(0, index).concat(this.props.sceneryList.slice(index + 1));\r\n        if(!otherItems || otherItems.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div>\r\n                <div className=\"scenicDetailInfoLabel sceneryDetailInfoLabel\">其他景点</div>\r\n                <SceneryListView sceneryList={otherItems}\r\n                    showSceneryDetail={this.showSceneryDetail}/>\r\n            </div>\r\n        );\r\n    }\r\n    isValidData()\r\n    {\r\n        return (this.props.sceneryList \r\n            && this.props.sceneryList.length > 0\r\n            && this.props.match.params.sceneryCode\r\n            && this.props.match.params.sceneryCode.length > 0);\r\n    }\r\n    getSelectedSceneryIndex()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return -1;\r\n        }\r\n        for(let i = 0; i < this.props.sceneryList.length; i++)\r\n        {\r\n            let item = this.props.sceneryList[i];\r\n            if(item.Code === this.props.match.params.sceneryCode)\r\n            {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    cacheScrollOffset()\r\n    {\r\n        let offsetY = ReactDOM.findDOMNode(this.scrollView).scrollTop;\r\n        this.props.dispatch(setSceneryDetailScrollerPositionAction(this.props.match.params.scenicCode, this.props.match.params.sceneryCode, offsetY));\r\n    }\r\n    restoreScrollViewPosition(props)\r\n    {\r\n        if(this.scrollView)\r\n        {\r\n            if(!isNaN(props.scrollViewOffset))\r\n            {\r\n                this.scrollView.scrollToY(props.scrollViewOffset);\r\n            }\r\n            else\r\n            {\r\n                this.scrollView.scrollToY(0);\r\n            }\r\n        }\r\n    }\r\n    showSceneryDetail(item)\r\n    {\r\n        this.cacheScrollOffset();\r\n        this.props.history.push(`/scenic/scenery-detail/${this.props.match.params.scenicCode}/${item.Code}`);\r\n    }\r\n    showImageBrowser()\r\n    {\r\n        let index = this.getSelectedSceneryIndex();\r\n        let item = this.props.sceneryList[index];\r\n        if(!item.GetImage || !item.GetImage.ImageList || item.GetImage.ImageList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        let imageList = [];\r\n        for (let i = 0; i < item.GetImage.ImageList.length; i++)\r\n        {\r\n            let imageItem = item.GetImage.ImageList[i];\r\n            imageList.push(imageItem.ImgSrc.replace('Small','Large'));\r\n        }\r\n\r\n        this.photoBrowserView.open(imageList);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    let obj = state.scenic.detailScreen[ownProps.match.params.scenicCode];\r\n    obj = obj ? obj : {};\r\n    return {\r\n        sceneryList: obj.sceneryList,\r\n        scrollViewOffset: obj['sceneryDetailScreenScrollViewOffset_' + ownProps.match.params.sceneryCode]\r\n    };\r\n};\r\n\r\nSceneryDetailScreen = connect(mapStateToProps)(SceneryDetailScreen);\r\n\r\nexport default SceneryDetailScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/scenic/SceneryDetailScreen.js","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function goBackAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GO_BACK,\r\n        code,\r\n    };\r\n}\r\n\r\n// 景区详情\r\nexport function asyncGetDetailAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getDetailRequestAction(code));\r\n        return _fetchDetail(code).then((resp)=>{\r\n            resp = (resp && resp.results && resp.results.length > 0) ? resp.results[0] : resp;\r\n            dispatch(_getDetailSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getDetailFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 门票列表\r\nexport function asyncGetTicketListAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getTicketListRequestAction(code));\r\n        return _fetchTicketList(code).then((resp)=>{\r\n            resp = resp ? resp.results : [];\r\n            dispatch(_getTicketListSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getTicketListFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 景点列表\r\nexport function asyncGetSceneryListAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getGetSceneryListRequestAction(code));\r\n        return _fetchGetSceneryList(code).then((resp)=>{\r\n            resp = resp ? resp.results : [];\r\n            dispatch(_getGetSceneryListSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getGetSceneryListFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 景区详情页面滚动条位置\r\nexport function setDetailScrollerPositionAction(code, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,\r\n        code,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\n// 景点列表页面滚动条位置\r\nexport function setSceneryListScrollerPositionAction(code, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,\r\n        code,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\nexport function setSceneryDetailScrollerPositionAction(scenicCode, sceneryCode, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,\r\n        code: scenicCode,\r\n        sceneryCode,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\nfunction _fetchGetSceneryList(code)\r\n{\r\n    let kvDict = {\r\n        ConditionParams: {\r\n            Params: {\r\n                Code: code\r\n            }\r\n        }\r\n    };\r\n    return HttpClient.postToPortalWithUrl(HttpClient.HOST_E_BUSINESS,IConstant.PortalApis.ELEMENTS.SceneryList,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getGetSceneryListRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getGetSceneryListSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,\r\n        code,\r\n        sceneryList: resp,\r\n    };\r\n}\r\n\r\nfunction _getGetSceneryListFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchTicketList(code)\r\n{\r\n    let kvDict = {\r\n        ConditionParams: {\r\n            Params: {\r\n                Code: code,\r\n                PlayDate: new Date().formatDate('YYYY-MM-DD')\r\n            }\r\n        }\r\n    };\r\n    return HttpClient.postToPortalWithUrl(HttpClient.HOST_E_BUSINESS,IConstant.PortalApis.ELEMENTS.AttractionsTicketList,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getTicketListRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getTicketListSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,\r\n        code,\r\n        ticketList: resp\r\n    };\r\n}\r\n\r\nfunction _getTicketListFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchDetail(code)\r\n{\r\n    let kvDict = {\r\n        ConditionParams: {\r\n            Params:{ Code: code }\r\n        }\r\n    };\r\n    return HttpClient.postToPortalWithUrl(HttpClient.HOST_E_BUSINESS,IConstant.PortalApis.ELEMENTS.AttractionsDetail,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getDetailRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getDetailSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_SUCCESS,\r\n        code,\r\n        detailItem: resp\r\n    };\r\n}\r\n\r\nfunction _getDetailFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/scenic/detailAction.js","import React, { PureComponent } from 'react';\r\n\r\nexport default class SceneryListView extends PureComponent\r\n{\r\n    // 每行3列\r\n    columnCount = 3;\r\n    render()\r\n    {\r\n        return this.renderSceneryListView();\r\n    }\r\n    renderSceneryListView()\r\n    {\r\n        if(!this.props.sceneryList || this.props.sceneryList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        let rows = [];\r\n        let rowLen = Math.ceil(this.props.sceneryList.length / this.columnCount);\r\n        for(let i = 0; i < rowLen; i++)\r\n        {\r\n            rows[i] = this.props.sceneryList.slice(i * this.columnCount, (i + 1) * this.columnCount);\r\n        }\r\n        return rows.map((row, index)=>this.renderSceneryRowView(row, index, index === rows.length - 1));\r\n    }\r\n    renderSceneryRowView(row, index, isLastRow)\r\n    {\r\n        let itemWidth = (window.innerWidth - (this.columnCount + 1) * 12) / this.columnCount;\r\n        let itemHeight = itemWidth * 0.75;\r\n        return (\r\n            <div key={index} \r\n                className=\"sceneryListRow\"\r\n                style={isLastRow ? {marginBottom: '12px'} : {}}>\r\n                {\r\n                    row.map((item, _index)=><div key={_index} \r\n                        onClick={()=>{\r\n                            if(this.props.showSceneryDetail)\r\n                            {\r\n                                this.props.showSceneryDetail(item);\r\n                            }\r\n                        }}\r\n                        className=\"sceneryListRowItem\" \r\n                        style={{width: `${itemWidth}px`, height: `${itemHeight}px`}}>\r\n                        <img className=\"sceneryListRowImg\"\r\n                            src={item.GetImage ? item.GetImage.ImageFrontUrl : ''}\r\n                            style={{width: `${itemWidth}px`, height: `${itemHeight}px`}}\r\n                            alt=''/>\r\n                        <div className=\"sceneryListRowTitle\">{item.CnName}</div>\r\n                    </div>)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/scenic/SceneryListView.js"],"sourceRoot":""}