{"version":3,"sources":["../static/js/6.18cfccdc.chunk.js","screens/map/SNJElementMapScreen.js","store/actions/map/elementMapAction.js","assets/images/map/ico_map_phone@2x.png","assets/images/map/ico_map_go@2x.png","assets/images/map/ico_map_detail@2x.png","assets/images/map/common_poi_selected@2x.png"],"names":["webpackJsonp","885","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_4_react__","__WEBPACK_IMPORTED_MODULE_4_react___default","__WEBPACK_IMPORTED_MODULE_5_react_redux__","__WEBPACK_IMPORTED_MODULE_6__views_common_Content__","__WEBPACK_IMPORTED_MODULE_7__common_NativeAppScreen__","__WEBPACK_IMPORTED_MODULE_8_react_dom__","__WEBPACK_IMPORTED_MODULE_8_react_dom___default","__WEBPACK_IMPORTED_MODULE_9_react_transition_group_CSSTransitionGroup__","__WEBPACK_IMPORTED_MODULE_9_react_transition_group_CSSTransitionGroup___default","__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__","__WEBPACK_IMPORTED_MODULE_11__core_utils_Config__","__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__","__WEBPACK_IMPORTED_MODULE_13__store_actions_nativeAction__","__WEBPACK_IMPORTED_MODULE_14__assets_css_map_css__","__WEBPACK_IMPORTED_MODULE_16__core_utils_SysUtil__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","MAP_ELEMENT_TYPES","title","list","name","type","You","Zhu","CanTing","Gou","Yu","SNJElementMapScreen","_NativeAppScreen","this","_this","getPrototypeOf","state","mapHeight","panelBottom","deSelectPoi","bind","searchTypeButtonTapped","hidePanel","togglePanel","searchBarFocus","dailPhone","navTo","showDetails","dispatch","updateWindowDimensions","prevProps","prevState","snapshot","isUpdateLocation","baiduMapInited","lat","updateFromLocation","searchType","undefined","keywords","lng","dataList","addMarkers","height","nativeSearchKeywords","updateKeyword","searchByKeyword","getElementMapDataList","sendCommonDataList","_this2","a","createElement","className","ref","view","scrollView","getWrappedInstance","id","mapView","style","transitionName","transitionAppearTimeout","transitionEnterTimeout","transitionLeaveTimeout","isPanelShowing","onClick","renderPanelDetails","renderFooterDetails","renderSegmentButtonView","isFetching","toast","text","_this3","searchTypeName","getSearchTypeName","_this4","position","top","width","overflow","backgroundColor","left","right","map","typeItem","sectionIndex","item","rowIndex","selectedItem","phoneIcon","navIcon","detailsIcon","distance","address","telephone","src","alt","latitude","longitude","isEntitySearchType","markerIcon","window","BMap","Icon","Size","anchor","imageSize","selectedMarkerIcon","Map","centerAndZoom","Point","appCityLongitude","appCityLatitude","addControl","NavigationControl","BMAP_NAVIGATION_CONTROL_SMALL","BMAP_ANCHOR_BOTTOM_RIGHT","enableGeolocation","offset","GeolocationControl","enableAutoLocation","addEventListener","_this5","innerHeight","findDOMNode","parentNode","offsetTop","setState","initMap","setZoom","mapZoom","setCenter","centerLng","centerLat","val","success","_this6","clearOverlays","markers","pts","pt","Longitude","Latitude","marker","Marker","icon","e","domEvent","stopPropagation","markerTapped","push","markerClusterer","BMapLib","MarkerClusterer","clearMarkers","setViewport","getIcon","setIcon","updateMapControlPosition","bottom","arguments","mapCtrls","getElementsByClassName","cssText","index","elementItemToCommonItem","_this7","then","centerPoint","getCenter","getZoom","setMapZoomAndCenterLocation","detailItem","isFromNativeApp","postMessage","sendMessageToNative","DIAL","phoneNumber","openTel","MAP_NAV","code","toLat","toLng","history","ELEMENT_DETAIL","imageUrl","j","Distance","CnName","Code","parseFloat","toFixed","Telephone","Address","GetImage","ImageFrontUrl","SmallImageFrontUrl","replace","_dataList","JSON","stringify","ELEMENT_MAP_DATALIST","data","dataListToCommonList","mapStateToProps","ownProps","obj","elementMap","assign","system","markerClusterInited","native","windowSize","elemantMapSearchKeywords","901","goBackAction","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","MAP","ELEMENTMAP","GO_BACK","isPanelShowingChangeAction","IS_PANEL_SHOWING_CHANGE","isFetchingChangeAction","IS_FETCHING_CHANGE","keywordChangeAction","getState","setKeywordsAction","Promise","resolve","KEYWORDS_CHANGE","mapZoomAndCenterLocationChangeAction","_mapZoomAndCenterLocationChangeAction","MAPZOOM_AND_CENTERLOCATION_CHANGE","searchTypeChangeAction","SEARCHTYPE_CHANGE","asyncGetListAction","_getListRequestAction","_fetchList","resp","_getListSuccessAction","catch","error","_getListFailureAction","selectedItemChangeAction","SELECTEDITEM_CHANGE","__WEBPACK_IMPORTED_MODULE_2__scenic_listAction__","__WEBPACK_IMPORTED_MODULE_3__hotel_listAction__","__WEBPACK_IMPORTED_MODULE_4__restaurant_listAction__","__WEBPACK_IMPORTED_MODULE_5__shopping_listAction__","__WEBPACK_IMPORTED_MODULE_6__fun_listAction__","_fetchEntityList","PortalApis","kvDict","conditionParams","Page","PageIndex","PageSize","Search","Order","CityCode","Toilet","COMMON_SERVICE","ToiletList","Bank","BankList","Hopsital","HospitalList","PostOffice","PostOfficeList","Gasstation","GasstationList","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","getFromPortal","json","GET_LIST_REQUEST","GET_LIST_SUCCESS","result","GET_LIST_FAILURE","message","902","exports","p","903","904","905"],"mappings":"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","file":"static/js/6.18cfccdc.chunk.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ 885:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css__ = __webpack_require__(28);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_toast_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast__ = __webpack_require__(29);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__common_NativeAppScreen__ = __webpack_require__(70);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_transition_group_CSSTransitionGroup__ = __webpack_require__(290);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_transition_group_CSSTransitionGroup___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_react_transition_group_CSSTransitionGroup__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__core_utils_Config__ = __webpack_require__(54);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__ = __webpack_require__(901);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__store_actions_nativeAction__ = __webpack_require__(289);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__assets_css_map_css__ = __webpack_require__(158);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__assets_css_map_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__assets_css_map_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__views_common_LeftContentView__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__core_utils_SysUtil__ = __webpack_require__(15);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var MAP_ELEMENT_TYPES=[{title:'出行必看',list:[{name:'景区',type:__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].You},{name:'酒店',type:__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Zhu},{name:'餐饮',type:__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].CanTing},{name:'购物',type:__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Gou},{name:'娱乐',type:__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Yu}]/*,\r\n    {\r\n        title: '生活助手',\r\n        list: [\r\n            { name: '公厕', type: IConstant.ItemType.Toilet },\r\n            { name: '银行', type: IConstant.ItemType.Bank },\r\n            { name: '医院', type: IConstant.ItemType.Hopsital },\r\n            { name: '邮局', type: IConstant.ItemType.PostOffice },\r\n            { name: '加油站', type: IConstant.ItemType.Gasstation },\r\n        ]\r\n    }*/}];var SNJElementMapScreen=function(_NativeAppScreen){_inherits(SNJElementMapScreen,_NativeAppScreen);function SNJElementMapScreen(props){_classCallCheck(this,SNJElementMapScreen);var _this=_possibleConstructorReturn(this,(SNJElementMapScreen.__proto__||Object.getPrototypeOf(SNJElementMapScreen)).call(this,props));_this.state={mapHeight:0,panelBottom:0};_this.deSelectPoi=_this.deSelectPoi.bind(_this);_this.searchTypeButtonTapped=_this.searchTypeButtonTapped.bind(_this);_this.hidePanel=_this.hidePanel.bind(_this);_this.togglePanel=_this.togglePanel.bind(_this);_this.searchBarFocus=_this.searchBarFocus.bind(_this);_this.dailPhone=_this.dailPhone.bind(_this);_this.navTo=_this.navTo.bind(_this);_this.showDetails=_this.showDetails.bind(_this);return _this;}_createClass(SNJElementMapScreen,[{key:'componentDidMount',value:function componentDidMount(){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"c\" /* isFetchingChangeAction */])(true));this.updateWindowDimensions();}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState,snapshot){var isUpdateLocation=!prevProps.baiduMapInited&&this.props.baiduMapInited;isUpdateLocation=isUpdateLocation||!prevProps.lat&&this.props.lat!==prevProps.lat;if(isUpdateLocation){this.updateFromLocation(this.props);}if(this.props.searchType!==prevProps.searchType&&this.props.searchType!==undefined){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"a\" /* asyncGetListAction */])(this.props.searchType,this.props.keywords,this.props.lat,this.props.lng));}if(this.props.dataList!==prevProps.dataList){this.addMarkers(this.props.dataList,this.props.searchType);}if(this.props.height&&!prevProps.height){this.updateWindowDimensions();}// native端搜索\nif(this.props.nativeSearchKeywords!==prevProps.nativeSearchKeywords){this.updateKeyword(this.props.nativeSearchKeywords);this.searchByKeyword(this.props.nativeSearchKeywords);}// native 想要获取当前的数据列表\nif(this.props.getElementMapDataList!==prevProps.getElementMapDataList&&this.props.getElementMapDataList===0){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_nativeAction__[\"a\" /* setConfigItemAction */])({getElementMapDataList:1}));this.sendCommonDataList();}}},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'isFromNativeApp elementMapPage'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__views_common_Content__[\"a\" /* default */],{ref:function ref(view){_this2.scrollView=view?view.getWrappedInstance():_this2.scrollView;}},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{id:'elementMap',ref:function ref(view){_this2.mapView=view;},style:{height:this.state.mapHeight+'px'}}),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_react_transition_group_CSSTransitionGroup___default.a,{transitionName:'elementMapPanel',transitionAppearTimeout:500,transitionEnterTimeout:500,transitionLeaveTimeout:300},this.props.isPanelShowing?__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{key:'1',className:'mapTypePanel',onClick:this.hidePanel},this.renderPanelDetails()):null),this.renderFooterDetails(),this.renderSegmentButtonView(),this.props.isFetching?__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null));}},{key:'renderSegmentButtonView',value:function renderSegmentButtonView(){var _this3=this;var searchTypeName=this.getSearchTypeName();return searchTypeName&&searchTypeName.length>0?__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'searchTypeName',onClick:function onClick(){return _this3.togglePanel();}},searchTypeName):null;}},{key:'renderPanelDetails',value:function renderPanelDetails(){var _this4=this;return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{style:{position:'absolute',top:'0px',width:'100%',overflow:'scroll',backgroundColor:'#fff'}},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{style:{overflow:'scroll',left:'0',right:'0'}},MAP_ELEMENT_TYPES.map(function(typeItem,sectionIndex){return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{key:typeItem.title,className:'typeBoxView'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'typeName'},typeItem.title),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'typeView'},typeItem.list.map(function(item,rowIndex){return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{key:item.type,onClick:function onClick(){return _this4.searchTypeButtonTapped(item.type);},className:'typeButton'},item.name);})));})));}},{key:'renderFooterDetails',value:function renderFooterDetails(){if(!this.props.selectedItem){return null;}var phoneIcon=__webpack_require__(902);var navIcon=__webpack_require__(903);var detailsIcon=__webpack_require__(904);return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'footerDetails'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'footerDetailsName'},this.props.selectedItem.name),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'footerDetailsAddress'},this.props.selectedItem.distance,'\\xA0\\xA0\\xA0\\xA0',this.props.selectedItem.address),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'footerDetailsButtons'},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:this.props.selectedItem.telephone?'footerDetailsButton':'footerDetailsButton footerDetailsButtonDisabled',onClick:this.dailPhone},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('img',{src:phoneIcon,alt:''}),' \\u7535\\u8BDD'),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'footerDetailsSplitLine'}),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:this.props.selectedItem.latitude&&this.props.selectedItem.longitude?'footerDetailsButton':'footerDetailsButton footerDetailsButtonDisabled',onClick:this.navTo},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('img',{src:navIcon,alt:''}),' \\u5230\\u8FD9\\u53BB'),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:'footerDetailsSplitLine'}),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',{className:!this.isEntitySearchType()?'footerDetailsButton':'footerDetailsButton footerDetailsButtonDisabled',onClick:this.showDetails},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('img',{src:detailsIcon,alt:''}),' \\u8BE6\\u60C5')));}},{key:'initMap',value:function initMap(){// 地图标记图片\nthis.markerIcon=new window.BMap.Icon(__webpack_require__(284),new window.BMap.Size(30,30),{anchor:new window.BMap.Size(15,30),imageSize:new window.BMap.Size(30,30)});this.selectedMarkerIcon=new window.BMap.Icon(__webpack_require__(905),new window.BMap.Size(30,30),{anchor:new window.BMap.Size(15,30),imageSize:new window.BMap.Size(30,30)});this.map=this.map?this.map:new window.BMap.Map('elementMap');this.map.centerAndZoom(new window.BMap.Point(__WEBPACK_IMPORTED_MODULE_11__core_utils_Config__[\"a\" /* default */].instance.appCityLongitude,__WEBPACK_IMPORTED_MODULE_11__core_utils_Config__[\"a\" /* default */].instance.appCityLatitude),16);this.map.addControl(new window.BMap.NavigationControl({type:window.BMAP_NAVIGATION_CONTROL_SMALL,anchor:window.BMAP_ANCHOR_BOTTOM_RIGHT,enableGeolocation:true,offset:new window.BMap.Size(20,20)}));this.map.addControl(new window.BMap.GeolocationControl({enableAutoLocation:false}));this.map.addEventListener('click',this.deSelectPoi);this.map.addEventListener('dragstart',this.deSelectPoi);}},{key:'updateWindowDimensions',value:function updateWindowDimensions(){var _this5=this;var height=window.innerHeight-__WEBPACK_IMPORTED_MODULE_8_react_dom___default.a.findDOMNode(this).parentNode.offsetTop;this.setState({mapHeight:height,panelBottom:window.innerHeight/3.0},function(){_this5.updateFromLocation(_this5.props);});}},{key:'updateFromLocation',value:function updateFromLocation(props){if(props.baiduMapInited){this.initMap();}if(props.baiduMapInited&&props.lat&&props.lng&&(!props.searchType||props.searchType.length<=0)){var searchType=__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].You;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"g\" /* searchTypeChangeAction */])(searchType));}else if(props.dataList&&props.searchType){this.addMarkers(props.dataList,props.searchType);this.map.setZoom(props.mapZoom);this.map.setCenter(new window.BMap.Point(props.centerLng,props.centerLat));}}// 更新keyword\n},{key:'updateKeyword',value:function updateKeyword(val){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"e\" /* keywordChangeAction */])(val));}// 搜索 keyword\n},{key:'searchByKeyword',value:function searchByKeyword(val){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"a\" /* asyncGetListAction */])(this.props.searchType,val,this.props.lat,this.props.lng));}//搜索框 focus \n},{key:'searchBarFocus',value:function searchBarFocus(){this.deSelectPoi();this.hidePanel();if(this.isEntitySearchType()){__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_toast___default.a.success('暂只支持景区，酒店，餐饮，购物，娱乐的关键字查询！',2);return;}}// 是否是 其它类型 的数据\n},{key:'isEntitySearchType',value:function isEntitySearchType(){var searchType=this.props.searchType;return!(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].You||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Zhu||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].CanTing||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Gou||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Yu);}},{key:'togglePanel',value:function togglePanel(){this.deSelectPoi();this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"d\" /* isPanelShowingChangeAction */])(!this.props.isPanelShowing));}},{key:'hidePanel',value:function hidePanel(){this.deSelectPoi();this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"d\" /* isPanelShowingChangeAction */])(false));}},{key:'addMarkers',value:function addMarkers(dataList,searchType){var _this6=this;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"c\" /* isFetchingChangeAction */])(false));this.map.clearOverlays();if(!this.map||!dataList||dataList.length===0){return;}this.markers=[];var pts=[];var _loop=function _loop(i){var item=dataList[i];var pt=void 0;if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].You||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Zhu||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].CanTing||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Gou||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Yu){pt=new window.BMap.Point(item.Longitude,item.Latitude);}else{pt=new window.BMap.Point(item.longitude,item.latitude);}var marker=new window.BMap.Marker(pt,{icon:_this6.markerIcon});marker.addEventListener('click',function(e){e.domEvent.stopPropagation();this.markerTapped(i);}.bind(_this6));pts.push(pt);_this6.markers.push(marker);};for(var i=0;i<dataList.length;i++){_loop(i);}if(!this.markerClusterer){this.markerClusterer=new window.BMapLib.MarkerClusterer(this.map);}this.markerClusterer.clearMarkers();//清空 聚合mark \nthis.markerClusterer.addMarkers(this.markers);this.map.setViewport(pts);}},{key:'deSelectPoi',value:function deSelectPoi(){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"h\" /* selectedItemChangeAction */])(null));if(this.markers&&this.markers.length>0){for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];if(marker.getIcon()!==this.markerIcon){marker.setIcon(this.markerIcon);}}this.updateMapControlPosition(80);}}},{key:'updateMapControlPosition',value:function updateMapControlPosition(){var bottom=arguments.length>0&&arguments[0]!==undefined?arguments[0]:140;var mapCtrls=this.mapView.getElementsByClassName('BMap_noprint');for(var i=0;i<mapCtrls.length;i++){var ctrl=mapCtrls[i];ctrl.style.cssText+='bottom: '+bottom+'px;';}}},{key:'markerTapped',value:function markerTapped(index){this.updateMapControlPosition();for(var i=0;i<this.markers.length;i++){var marker=this.markers[i];if(index===i){marker.setIcon(this.selectedMarkerIcon);}else if(marker.getIcon()!==this.markerIcon){marker.setIcon(this.markerIcon);}}var selectedItem=this.elementItemToCommonItem(this.props.dataList[index]);this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"h\" /* selectedItemChangeAction */])(selectedItem));}},{key:'searchTypeButtonTapped',value:function searchTypeButtonTapped(searchType){var _this7=this;this.deSelectPoi();if(this.props.searchType!==searchType){//清空关键字\nif(this.props.keywords&&this.props.keywords.length>0){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"e\" /* keywordChangeAction */])('')).then(function(){return _this7.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"g\" /* searchTypeChangeAction */])(searchType));});}else{this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"g\" /* searchTypeChangeAction */])(searchType));}}}// 保存 地图中心点 和 缩放级\n},{key:'setMapZoomAndCenterLocation',value:function setMapZoomAndCenterLocation(){if(!this.map){return;}var centerPoint=this.map.getCenter();var mapZoom=this.map.getZoom();var centerLat=centerPoint.lat;var centerLng=centerPoint.lng;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_map_elementMapAction__[\"f\" /* mapZoomAndCenterLocationChangeAction */])(mapZoom,centerLat,centerLng));}// 电话\n},{key:'dailPhone',value:function dailPhone(){this.setMapZoomAndCenterLocation();var detailItem=this.props.selectedItem;if(detailItem.telephone&&detailItem.telephone.length>0){if(this.props.isFromNativeApp&&window.postMessage){this.sendMessageToNative(__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"i\" /* NATIVE_MESSAGE_TYPE */].DIAL,{phoneNumber:detailItem.telephone});}else{__WEBPACK_IMPORTED_MODULE_16__core_utils_SysUtil__[\"a\" /* default */].openTel(detailItem.telephone);}}}// 导航\n},{key:'navTo',value:function navTo(){this.setMapZoomAndCenterLocation();var detailItem=this.props.selectedItem;if(detailItem.latitude&&detailItem.latitude>0&&detailItem.longitude&&detailItem.longitude>0){//导航点击\nif(this.props.isFromNativeApp&&window.postMessage){this.sendMessageToNative(__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"i\" /* NATIVE_MESSAGE_TYPE */].MAP_NAV,{code:detailItem.code,toLat:detailItem.latitude,toLng:detailItem.longitude});}else{this.props.history.push('/map/mapNav/'+detailItem.code+'/'+detailItem.latitude+'/'+detailItem.longitude);}}}// 详情\n},{key:'showDetails',value:function showDetails(){if(this.isEntitySearchType()){return;}this.setMapZoomAndCenterLocation();var detailItem=this.props.selectedItem;var searchType=this.props.searchType;if(window.postMessage){this.sendMessageToNative(__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"i\" /* NATIVE_MESSAGE_TYPE */].ELEMENT_DETAIL,{type:searchType,imageUrl:detailItem.imageUrl,name:detailItem.name,code:detailItem.code});}else{if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].You){this.props.history.push('/scenic/detail/'+detailItem.code);}else if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Zhu){this.props.history.push('/hotel/detail/'+detailItem.code);}else if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].CanTing){this.props.history.push('/restaurant/detail/'+detailItem.code);}else if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Gou){this.props.history.push('/shopping/detail/'+detailItem.code);}else if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Yu){this.props.history.push('/fun/detail/'+detailItem.code);}}}},{key:'getSearchTypeName',value:function getSearchTypeName(){var searchType=this.props.searchType;var searchTypeName='';for(var i=0;i<MAP_ELEMENT_TYPES.length;i++){var list=MAP_ELEMENT_TYPES[i].list;for(var j=0;j<list.length;j++){var _item=list[j];if(_item.type===searchType){searchTypeName=_item.name;break;}}if(searchTypeName&&searchTypeName.length>0){break;}}return searchTypeName;}},{key:'elementItemToCommonItem',value:function elementItemToCommonItem(item){var name=void 0;var code=void 0;var distance=void 0;var telephone=void 0;var address=void 0;var latitude=void 0;var longitude=void 0;var imageUrl=void 0;var searchType=this.props.searchType;var searchTypeName=this.getSearchTypeName();item.Distance=item.Distance?item.Distance:item.distance;item.distance=item.distance?item.distance:item.Distance;if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].You||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Zhu){name=item.CnName;code=item.Code;distance=item.Distance?parseFloat(item.Distance).toFixed(1)+'千米':'';telephone=item.Telephone?item.Telephone:'';address=item.Address&&item.Address.length>0?item.Address:'地址暂无';latitude=item.Latitude;longitude=item.Longitude;if(item.GetImage){imageUrl=item.GetImage.ImageFrontUrl;}}else if(searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].CanTing||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Gou||searchType===__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"h\" /* ItemType */].Yu){name=item.CnName;code=item.Code;distance=item.distance?item.distance.toFixed(1)+'千米':'';telephone=item.Telephone?item.Telephone:'';address=item.Address&&item.Address.length>0?item.Address:'地址暂无';latitude=item.Latitude;longitude=item.Longitude;if(item.GetImage){imageUrl=item.GetImage.SmallImageFrontUrl;}}else{name=item.CnName;code=item.Code;distance=item.distance?item.distance.toFixed(1)+'千米':'';telephone=null;address=item.Address&&item.Address.length>0?item.Address:searchTypeName.replace('/',',')+'  地址暂无';latitude=item.Latitude;longitude=item.Longitude;if(item.GetImage){imageUrl=item.GetImage.SmallImageFrontUrl;}}var selectedItem={name:name,code:code,distance:distance,telephone:telephone,address:address,latitude:latitude,longitude:longitude,imageUrl:imageUrl,type:searchType};return selectedItem;}},{key:'dataListToCommonList',value:function dataListToCommonList(){if(!this.props.dataList||this.props.dataList.length===0){return[];}var _dataList=[];for(var i=0;i<this.props.dataList.length;i++){var _item2=this.props.dataList[i];_dataList.push(this.elementItemToCommonItem(_item2));}return _dataList;}},{key:'sendCommonDataList',value:function sendCommonDataList(){if(window.postMessage){window.postMessage(JSON.stringify({type:__WEBPACK_IMPORTED_MODULE_10__core_utils_IConstant__[\"i\" /* NATIVE_MESSAGE_TYPE */].ELEMENT_MAP_DATALIST,data:{dataList:this.dataListToCommonList(),type:this.props.searchType,title:this.getSearchTypeName()}}),'*');}}}]);return SNJElementMapScreen;}(__WEBPACK_IMPORTED_MODULE_7__common_NativeAppScreen__[\"a\" /* default */]);var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.map.elementMap;return Object.assign({},obj,{baiduMapInited:state.system.baiduMapInited,markerClusterInited:state.system.markerClusterInited,lat:state.system.latitude,lng:state.system.longitude,isFromNativeApp:state.native.isFromNativeApp},state.native.windowSize,{nativeSearchKeywords:state.native.elemantMapSearchKeywords,getElementMapDataList:state.native.getElementMapDataList});};SNJElementMapScreen=Object(__WEBPACK_IMPORTED_MODULE_5_react_redux__[\"b\" /* connect */])(mapStateToProps)(SNJElementMapScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (SNJElementMapScreen);\n\n/***/ }),\n\n/***/ 901:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = isPanelShowingChangeAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = isFetchingChangeAction;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = keywordChangeAction;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = mapZoomAndCenterLocationChangeAction;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = searchTypeChangeAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncGetListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"h\"] = selectedItemChangeAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2__scenic_listAction__ = __webpack_require__(286);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__hotel_listAction__ = __webpack_require__(159);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4__restaurant_listAction__ = __webpack_require__(160);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5__shopping_listAction__ = __webpack_require__(162);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__fun_listAction__ = __webpack_require__(161);\nfunction goBackAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.GO_BACK};}function isPanelShowingChangeAction(isPanelShowing){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.IS_PANEL_SHOWING_CHANGE,isPanelShowing:isPanelShowing};}function isFetchingChangeAction(isFetching){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.IS_FETCHING_CHANGE,isFetching:isFetching};}function keywordChangeAction(keywords){return function(dispatch,getState){dispatch(setKeywordsAction(keywords));return new Promise(function(resolve){resolve();});};}function setKeywordsAction(keywords){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.KEYWORDS_CHANGE,keywords:keywords};}function mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng){return function(dispatch,getState){dispatch(_mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng));return new Promise(function(resolve){resolve();});};}function _mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.MAPZOOM_AND_CENTERLOCATION_CHANGE,mapZoom:mapZoom,centerLat:centerLat,centerLng:centerLng};}function searchTypeChangeAction(searchType){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.SEARCHTYPE_CHANGE,searchType:searchType};}function asyncGetListAction(searchType,keywords,lat,lng){return function(dispatch,getState){dispatch(_getListRequestAction(searchType,keywords,lat,lng));return _fetchList(searchType,keywords,lat,lng).then(function(resp){dispatch(_getListSuccessAction(searchType,keywords,lat,lng,resp));}).catch(function(error){dispatch(_getListFailureAction(searchType,keywords,lat,lng,error));});};}function selectedItemChangeAction(selectedItem){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.SELECTEDITEM_CHANGE,selectedItem:selectedItem};}function _fetchList(searchType,keywords,lat,lng){if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].You){return Object(__WEBPACK_IMPORTED_MODULE_2__scenic_listAction__[\"a\" /* _fetchAllList */])(keywords,lat,lng);}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Zhu){return Object(__WEBPACK_IMPORTED_MODULE_3__hotel_listAction__[\"a\" /* _fetchAllList */])(keywords,lat,lng);}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].CanTing){return Object(__WEBPACK_IMPORTED_MODULE_4__restaurant_listAction__[\"a\" /* _fetchAllList */])(keywords,lat,lng);}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Gou){return Object(__WEBPACK_IMPORTED_MODULE_5__shopping_listAction__[\"a\" /* _fetchAllList */])(keywords,lat,lng);}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Yu){return Object(__WEBPACK_IMPORTED_MODULE_6__fun_listAction__[\"a\" /* _fetchAllList */])(keywords,lat,lng);}else{return _fetchEntityList(searchType,keywords,lat,lng);}}function _fetchEntityList(searchType,keywords,lat,lng){var PortalApis=void 0;var kvDict={conditionParams:{Page:{PageIndex:1,PageSize:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"a\" /* ALL_PAGE_SIZE */]},Search:[],Order:[]},CityCode:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"d\" /* CITY_CODE */],lat:lat,lng:lng};if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Toilet){PortalApis=__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].COMMON_SERVICE.ToiletList;}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Bank){PortalApis=__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].COMMON_SERVICE.BankList;}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Hopsital){PortalApis=__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].COMMON_SERVICE.HospitalList;}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].PostOffice){PortalApis=__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].COMMON_SERVICE.PostOfficeList;}else if(searchType===__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"h\" /* ItemType */].Gasstation){PortalApis=__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].COMMON_SERVICE.GasstationList;}return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getFromPortal(PortalApis,kvDict).then(function(resp){return resp.json();});}function _getListRequestAction(searchType,keywords,lat,lng){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.GET_LIST_REQUEST,searchType:searchType,keywords:keywords};}function _getListSuccessAction(searchType,keywords,lat,lng,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.GET_LIST_SUCCESS,searchType:searchType,keywords:keywords,result:resp};}function _getListFailureAction(searchType,keywords,lat,lng,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].MAP.ELEMENTMAP.GET_LIST_FAILURE,searchType:searchType,keywords:keywords,message:error};}\n\n/***/ }),\n\n/***/ 902:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_map_phone@2x.02235dc5.png\";\n\n/***/ }),\n\n/***/ 903:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_map_go@2x.a847eed7.png\";\n\n/***/ }),\n\n/***/ 904:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_map_detail@2x.8a6f5193.png\";\n\n/***/ }),\n\n/***/ 905:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/common_poi_selected@2x.38730eb3.png\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/6.18cfccdc.chunk.js","import React from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, SearchBar, ActivityIndicator, Toast } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport NativeAppScreen from '../common/NativeAppScreen';\r\nimport ReactDOM from 'react-dom';\r\nimport CSSTransitionGroup from 'react-transition-group/CSSTransitionGroup';\r\nimport { NATIVE_MESSAGE_TYPE } from '../../core/utils/IConstant';\r\nimport Config from '../../core/utils/Config';\r\nimport {\r\n    goBackAction,\r\n    isPanelShowingChangeAction,\r\n    isFetchingChangeAction,\r\n    keywordChangeAction,\r\n    mapZoomAndCenterLocationChangeAction,\r\n    searchTypeChangeAction,\r\n    asyncGetListAction,\r\n    selectedItemChangeAction,\r\n} from '../../store/actions/map/elementMapAction';\r\nimport { setConfigItemAction } from '../../store/actions/nativeAction';\r\nimport '../../assets/css/map.css';\r\nimport LeftContentView from '../../views/common/LeftContentView';\r\nimport * as IConstant from '../../core/utils/IConstant';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\n\r\nconst MAP_ELEMENT_TYPES = [\r\n    {\r\n        title: '出行必看',\r\n        list: [\r\n            { name: '景区', type: IConstant.ItemType.You },\r\n            { name: '酒店', type: IConstant.ItemType.Zhu },\r\n            { name: '餐饮', type: IConstant.ItemType.CanTing },\r\n            { name: '购物', type: IConstant.ItemType.Gou },\r\n            { name: '娱乐', type: IConstant.ItemType.Yu },\r\n        ]\r\n    }/*,\r\n    {\r\n        title: '生活助手',\r\n        list: [\r\n            { name: '公厕', type: IConstant.ItemType.Toilet },\r\n            { name: '银行', type: IConstant.ItemType.Bank },\r\n            { name: '医院', type: IConstant.ItemType.Hopsital },\r\n            { name: '邮局', type: IConstant.ItemType.PostOffice },\r\n            { name: '加油站', type: IConstant.ItemType.Gasstation },\r\n        ]\r\n    }*/\r\n];\r\n\r\nclass SNJElementMapScreen extends NativeAppScreen \r\n{\r\n    markerClusterer;\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            mapHeight: 0,\r\n            panelBottom: 0,\r\n        };\r\n\r\n        this.deSelectPoi = this.deSelectPoi.bind(this);\r\n        this.searchTypeButtonTapped = this.searchTypeButtonTapped.bind(this);\r\n        this.hidePanel = this.hidePanel.bind(this);\r\n        this.togglePanel = this.togglePanel.bind(this);\r\n        this.searchBarFocus = this.searchBarFocus.bind(this);\r\n        this.dailPhone = this.dailPhone.bind(this);\r\n        this.navTo = this.navTo.bind(this);\r\n        this.showDetails = this.showDetails.bind(this);\r\n    }\r\n    componentDidMount() \r\n    {\r\n        this.props.dispatch(isFetchingChangeAction(true));\r\n        this.updateWindowDimensions();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot)\r\n    {\r\n        let isUpdateLocation = !prevProps.baiduMapInited && this.props.baiduMapInited;\r\n        isUpdateLocation = isUpdateLocation || (!prevProps.lat && this.props.lat !== prevProps.lat);\r\n        if (isUpdateLocation) \r\n        {\r\n            this.updateFromLocation(this.props);\r\n        }\r\n\r\n        if (this.props.searchType !== prevProps.searchType && this.props.searchType !== undefined) \r\n        {\r\n            this.props.dispatch(asyncGetListAction(this.props.searchType, this.props.keywords, this.props.lat, this.props.lng));\r\n        }\r\n\r\n        if (this.props.dataList !== prevProps.dataList) \r\n        {\r\n            this.addMarkers(this.props.dataList, this.props.searchType);\r\n        }\r\n        if(this.props.height && !prevProps.height)\r\n        {\r\n            this.updateWindowDimensions();\r\n        }\r\n        // native端搜索\r\n        if(this.props.nativeSearchKeywords !== prevProps.nativeSearchKeywords)\r\n        {\r\n            this.updateKeyword(this.props.nativeSearchKeywords);\r\n            this.searchByKeyword(this.props.nativeSearchKeywords);\r\n        }\r\n        // native 想要获取当前的数据列表\r\n        if(this.props.getElementMapDataList !== prevProps.getElementMapDataList && this.props.getElementMapDataList === 0)\r\n        {\r\n            this.props.dispatch(setConfigItemAction({getElementMapDataList: 1}));\r\n            this.sendCommonDataList();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"isFromNativeApp elementMapPage\">\r\n                <Content ref={(view)=>{this.scrollView = view ? view.getWrappedInstance() : this.scrollView;}}>\r\n                    <div id=\"elementMap\" ref={(view) => { this.mapView = view; }} style={{ height: (this.state.mapHeight + 'px') }}></div>\r\n                    <CSSTransitionGroup\r\n                        transitionName=\"elementMapPanel\"\r\n                        transitionAppearTimeout={500}\r\n                        transitionEnterTimeout={500}\r\n                        transitionLeaveTimeout={300}>\r\n                        {\r\n                            this.props.isPanelShowing\r\n                                ?\r\n                                <div key=\"1\" className=\"mapTypePanel\" onClick={this.hidePanel}>\r\n                                    {\r\n                                        this.renderPanelDetails()\r\n                                    }\r\n                                </div>\r\n                                :\r\n                                null\r\n                        }\r\n                    </CSSTransitionGroup>\r\n                    {\r\n                        this.renderFooterDetails()\r\n                    }\r\n                    {\r\n                        this.renderSegmentButtonView()\r\n                    }\r\n                    {\r\n                        this.props.isFetching\r\n                            ?\r\n                            <ActivityIndicator\r\n                                toast\r\n                                text=\"Loading...\" />\r\n                            : null\r\n                    }\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    renderSegmentButtonView() {\r\n        let searchTypeName = this.getSearchTypeName();\r\n        return searchTypeName && searchTypeName.length > 0 ? (\r\n            <div className=\"searchTypeName\" onClick={() => this.togglePanel()}>{searchTypeName}</div>\r\n        ) : null;\r\n    }\r\n\r\n    renderPanelDetails() {\r\n        return (\r\n            <div style={{ position: 'absolute', top:'0px' ,width: '100%', overflow: 'scroll', backgroundColor: '#fff' }}>\r\n                <div style={{ overflow:'scroll', left:'0',right:'0' }}>\r\n                    {\r\n                        MAP_ELEMENT_TYPES.map((typeItem, sectionIndex) => <div key={typeItem.title} className=\"typeBoxView\">\r\n                            <div className=\"typeName\">{typeItem.title}</div>\r\n                            <div className=\"typeView\">\r\n                                {\r\n                                    typeItem.list.map((item, rowIndex) => <div key={item.type} onClick={() => this.searchTypeButtonTapped(item.type)} className=\"typeButton\">\r\n                                        {item.name}\r\n                                    </div>)\r\n                                }\r\n                            </div>\r\n                        </div>)\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderFooterDetails()\r\n    {\r\n        if (!this.props.selectedItem)\r\n        {\r\n            return null;\r\n        }\r\n        let phoneIcon = require('../../assets/images/map/ico_map_phone@2x.png');\r\n        let navIcon = require('../../assets/images/map/ico_map_go@2x.png');\r\n        let detailsIcon = require('../../assets/images/map/ico_map_detail@2x.png');\r\n        return (\r\n            <div className=\"footerDetails\">\r\n                <div className=\"footerDetailsName\">{this.props.selectedItem.name}</div>\r\n                <div className=\"footerDetailsAddress\">{this.props.selectedItem.distance}&nbsp;&nbsp;&nbsp;&nbsp;{this.props.selectedItem.address}</div>\r\n                <div className=\"footerDetailsButtons\">\r\n                    <div className={this.props.selectedItem.telephone ? 'footerDetailsButton' : 'footerDetailsButton footerDetailsButtonDisabled'}\r\n                        onClick={this.dailPhone}>\r\n                        <img src={phoneIcon} alt=\"\" /> 电话\r\n                    </div>\r\n                    <div className=\"footerDetailsSplitLine\" />\r\n                    <div className={this.props.selectedItem.latitude && this.props.selectedItem.longitude  ? 'footerDetailsButton' : 'footerDetailsButton footerDetailsButtonDisabled'}\r\n                        onClick={this.navTo}>\r\n                        <img src={navIcon} alt=\"\" /> 到这去\r\n                    </div>\r\n                    <div className=\"footerDetailsSplitLine\" />\r\n                    <div className={ !this.isEntitySearchType() ?  'footerDetailsButton' :  'footerDetailsButton footerDetailsButtonDisabled'}\r\n                        onClick={this.showDetails}>\r\n                        <img src={detailsIcon} alt=\"\" /> 详情\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    initMap() {\r\n        // 地图标记图片\r\n        this.markerIcon = new window.BMap.Icon(require('../../assets/images/map/common_poi@2x.png'), new window.BMap.Size(30, 30), {\r\n            anchor: new window.BMap.Size(15, 30),\r\n            imageSize: new window.BMap.Size(30, 30)\r\n        });\r\n\r\n        this.selectedMarkerIcon = new window.BMap.Icon(require('../../assets/images/map/common_poi_selected@2x.png'), new window.BMap.Size(30, 30), {\r\n            anchor: new window.BMap.Size(15, 30),\r\n            imageSize: new window.BMap.Size(30, 30)\r\n        });\r\n\r\n        this.map = this.map ? this.map : new window.BMap.Map('elementMap');\r\n        this.map.centerAndZoom(new window.BMap.Point(Config.instance.appCityLongitude, Config.instance.appCityLatitude), 16);\r\n        this.map.addControl(new window.BMap.NavigationControl({ type: window.BMAP_NAVIGATION_CONTROL_SMALL, anchor: window.BMAP_ANCHOR_BOTTOM_RIGHT, enableGeolocation: true, offset: new window.BMap.Size(20, 20) }));\r\n        this.map.addControl(new window.BMap.GeolocationControl({ enableAutoLocation: false }));\r\n\r\n        this.map.addEventListener('click', this.deSelectPoi);\r\n        this.map.addEventListener('dragstart', this.deSelectPoi);\r\n    }\r\n\r\n    updateWindowDimensions() \r\n    {\r\n        const height = window.innerHeight - ReactDOM.findDOMNode(this).parentNode.offsetTop;\r\n        this.setState({ mapHeight: height, panelBottom: (window.innerHeight / 3.0) }, () => {\r\n            this.updateFromLocation(this.props);\r\n        });\r\n    }\r\n\r\n    updateFromLocation(props) \r\n    {\r\n        if (props.baiduMapInited)\r\n        {\r\n            this.initMap();\r\n        }\r\n        if (props.baiduMapInited && props.lat && props.lng && (!props.searchType || props.searchType.length <= 0 )) {\r\n            let searchType = IConstant.ItemType.You;\r\n            this.props.dispatch(searchTypeChangeAction(searchType));\r\n        }\r\n        else if (props.dataList && props.searchType)\r\n        {\r\n            this.addMarkers(props.dataList,props.searchType);\r\n            this.map.setZoom(props.mapZoom);\r\n            this.map.setCenter(new window.BMap.Point(props.centerLng, props.centerLat));\r\n        }\r\n    }\r\n\r\n    // 更新keyword\r\n    updateKeyword(val) \r\n    {\r\n        this.props.dispatch(keywordChangeAction(val));\r\n    }\r\n\r\n    // 搜索 keyword\r\n    searchByKeyword(val) \r\n    {\r\n        this.props.dispatch(asyncGetListAction(this.props.searchType, val, this.props.lat, this.props.lng));\r\n    }\r\n\r\n    //搜索框 focus \r\n    searchBarFocus()\r\n    {\r\n        this.deSelectPoi();\r\n        this.hidePanel();\r\n        if (this.isEntitySearchType())\r\n        {\r\n            Toast.success('暂只支持景区，酒店，餐饮，购物，娱乐的关键字查询！',2);\r\n            return;\r\n        }\r\n    }\r\n\r\n    // 是否是 其它类型 的数据\r\n    isEntitySearchType()\r\n    {\r\n        let searchType = this.props.searchType;\r\n        return !(searchType === IConstant.ItemType.You || searchType === IConstant.ItemType.Zhu || searchType === IConstant.ItemType.CanTing || searchType === IConstant.ItemType.Gou || searchType === IConstant.ItemType.Yu);\r\n    }\r\n\r\n    togglePanel() \r\n    {\r\n        this.deSelectPoi();\r\n        this.props.dispatch(isPanelShowingChangeAction(!this.props.isPanelShowing));\r\n    }\r\n   \r\n    hidePanel() \r\n    {\r\n        this.deSelectPoi();\r\n        this.props.dispatch(isPanelShowingChangeAction(false));\r\n    }\r\n\r\n    addMarkers(dataList, searchType) \r\n    {\r\n        this.props.dispatch(isFetchingChangeAction(false));\r\n        this.map.clearOverlays();\r\n        if (!this.map || !dataList || dataList.length === 0) \r\n        {\r\n            return;\r\n        }\r\n        this.markers = [];\r\n        let pts = [];\r\n        for (let i = 0; i < dataList.length; i++) \r\n        {\r\n            let item = dataList[i];\r\n            let pt;\r\n            if (searchType === IConstant.ItemType.You || searchType === IConstant.ItemType.Zhu || searchType === IConstant.ItemType.CanTing || searchType === IConstant.ItemType.Gou || searchType === IConstant.ItemType.Yu )\r\n            {\r\n                pt = new window.BMap.Point(item.Longitude, item.Latitude);\r\n            }\r\n            else\r\n            {\r\n                pt = new window.BMap.Point(item.longitude, item.latitude);\r\n            }\r\n\r\n            let marker = new window.BMap.Marker(pt, { icon: this.markerIcon });\r\n            marker.addEventListener('click', function (e) {\r\n                e.domEvent.stopPropagation();\r\n                this.markerTapped(i);\r\n            }.bind(this));\r\n\r\n            pts.push(pt);\r\n            this.markers.push(marker);\r\n        }\r\n        if (!this.markerClusterer) \r\n        {\r\n            this.markerClusterer = new window.BMapLib.MarkerClusterer(this.map);\r\n        }\r\n        this.markerClusterer.clearMarkers(); //清空 聚合mark \r\n        this.markerClusterer.addMarkers(this.markers);\r\n        this.map.setViewport(pts);\r\n    }\r\n    deSelectPoi() \r\n    {\r\n        this.props.dispatch(selectedItemChangeAction(null));\r\n\r\n        if (this.markers && this.markers.length > 0)\r\n        {\r\n            for (let i = 0; i < this.markers.length; i++) \r\n            {\r\n                let marker = this.markers[i];\r\n                if (marker.getIcon() !== this.markerIcon) \r\n                {\r\n                    marker.setIcon(this.markerIcon);\r\n                }\r\n            }\r\n            this.updateMapControlPosition(80);\r\n        }\r\n    }\r\n\r\n    updateMapControlPosition(bottom = 140) \r\n    {\r\n        let mapCtrls = this.mapView.getElementsByClassName('BMap_noprint');\r\n        for (let i = 0; i < mapCtrls.length; i++) \r\n        {\r\n            let ctrl: any = mapCtrls[i];\r\n            ctrl.style.cssText += 'bottom: ' + bottom + 'px;';\r\n        }\r\n    }\r\n    markerTapped(index) \r\n    {\r\n        this.updateMapControlPosition();\r\n        for (let i = 0; i < this.markers.length; i++) \r\n        {\r\n            let marker = this.markers[i];\r\n            if (index === i) \r\n            {\r\n                marker.setIcon(this.selectedMarkerIcon);\r\n            }\r\n            else if (marker.getIcon() !== this.markerIcon) \r\n            {\r\n                marker.setIcon(this.markerIcon);\r\n            }\r\n        }\r\n        let selectedItem = this.elementItemToCommonItem(this.props.dataList[index]);\r\n        this.props.dispatch(selectedItemChangeAction(selectedItem));\r\n    }\r\n\r\n    searchTypeButtonTapped(searchType) \r\n    {\r\n        this.deSelectPoi();\r\n        if (this.props.searchType !== searchType) \r\n        {\r\n            //清空关键字\r\n            if (this.props.keywords && this.props.keywords.length > 0)\r\n            {\r\n                this.props.dispatch(keywordChangeAction('')).then( () => {\r\n                    return this.props.dispatch(searchTypeChangeAction(searchType));\r\n                });\r\n            }\r\n            else\r\n            {\r\n                this.props.dispatch(searchTypeChangeAction(searchType));\r\n            }\r\n        }\r\n    }\r\n\r\n    // 保存 地图中心点 和 缩放级\r\n    setMapZoomAndCenterLocation()\r\n    {\r\n        if (!this.map)\r\n        {\r\n            return;\r\n        }\r\n        let centerPoint = this.map.getCenter();\r\n        let mapZoom = this.map.getZoom();\r\n        let centerLat = centerPoint.lat;\r\n        let centerLng = centerPoint.lng;\r\n        this.props.dispatch(mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng));\r\n    }\r\n\r\n    // 电话\r\n    dailPhone()\r\n    {\r\n        this.setMapZoomAndCenterLocation();\r\n        let detailItem = this.props.selectedItem;\r\n        if ( detailItem.telephone && detailItem.telephone.length > 0 )\r\n        {\r\n            if(this.props.isFromNativeApp && window.postMessage)\r\n            {\r\n                this.sendMessageToNative(NATIVE_MESSAGE_TYPE.DIAL, {\r\n                    phoneNumber: detailItem.telephone,\r\n                });\r\n            }\r\n            else\r\n            {\r\n                SysUtil.openTel(detailItem.telephone);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 导航\r\n    navTo()\r\n    {\r\n        this.setMapZoomAndCenterLocation();\r\n        let detailItem = this.props.selectedItem;\r\n        if (detailItem.latitude && detailItem.latitude > 0 && detailItem.longitude && detailItem.longitude > 0)\r\n        {\r\n            //导航点击\r\n            if(this.props.isFromNativeApp && window.postMessage)\r\n            {\r\n                this.sendMessageToNative(NATIVE_MESSAGE_TYPE.MAP_NAV, {\r\n                    code: detailItem.code,\r\n                    toLat: detailItem.latitude,\r\n                    toLng: detailItem.longitude,\r\n                });\r\n            }\r\n            else\r\n            {\r\n                this.props.history.push(`/map/mapNav/${detailItem.code}/${detailItem.latitude}/${detailItem.longitude}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    // 详情\r\n    showDetails()\r\n    {\r\n        if (this.isEntitySearchType())\r\n        {\r\n            return;\r\n        }\r\n\r\n        this.setMapZoomAndCenterLocation();\r\n        let detailItem = this.props.selectedItem;\r\n        let searchType = this.props.searchType;\r\n        if(window.postMessage)\r\n        {\r\n            this.sendMessageToNative(NATIVE_MESSAGE_TYPE.ELEMENT_DETAIL, {\r\n                type: searchType,\r\n                imageUrl: detailItem.imageUrl,\r\n                name: detailItem.name,\r\n                code: detailItem.code,\r\n            });\r\n        }\r\n        else\r\n        {\r\n            if (searchType === IConstant.ItemType.You)\r\n            {\r\n                this.props.history.push(`/scenic/detail/${detailItem.code}`);\r\n            }\r\n            else if ( searchType === IConstant.ItemType.Zhu )\r\n            {\r\n                this.props.history.push(`/hotel/detail/${detailItem.code}`);\r\n            }\r\n            else if ( searchType === IConstant.ItemType.CanTing )\r\n            {\r\n                this.props.history.push(`/restaurant/detail/${detailItem.code}`);\r\n            }\r\n            else if ( searchType === IConstant.ItemType.Gou )\r\n            {\r\n                this.props.history.push(`/shopping/detail/${detailItem.code}`);\r\n            }\r\n            else if ( searchType === IConstant.ItemType.Yu )\r\n            {\r\n                this.props.history.push(`/fun/detail/${detailItem.code}`);\r\n            }\r\n        }\r\n    }\r\n\r\n    getSearchTypeName()\r\n    {\r\n        let searchType = this.props.searchType;\r\n        let searchTypeName = '';\r\n        for (let i = 0; i < MAP_ELEMENT_TYPES.length; i++) \r\n        {\r\n            let list = MAP_ELEMENT_TYPES[i].list;\r\n            for (let j = 0; j < list.length; j++) \r\n            {\r\n                let item = list[j];\r\n                if (item.type === searchType) \r\n                {\r\n                    searchTypeName = item.name;\r\n                    break;\r\n                }\r\n            }\r\n            if (searchTypeName && searchTypeName.length > 0) \r\n            {\r\n                break;\r\n            }\r\n        }\r\n        return searchTypeName;\r\n    }\r\n\r\n    elementItemToCommonItem(item)\r\n    {\r\n        let name;\r\n        let code;\r\n        let distance;\r\n        let telephone;\r\n        let address;\r\n        let latitude;\r\n        let longitude;\r\n        let imageUrl;\r\n        let searchType = this.props.searchType;\r\n        let searchTypeName = this.getSearchTypeName();\r\n        item.Distance = item.Distance ? item.Distance : item.distance;\r\n        item.distance = item.distance ? item.distance : item.Distance;\r\n\r\n        if (searchType === IConstant.ItemType.You || searchType === IConstant.ItemType.Zhu) \r\n        {\r\n            name = item.CnName;\r\n            code = item.Code;\r\n            distance = item.Distance ? parseFloat(item.Distance).toFixed(1) + '千米' : '';\r\n            telephone = item.Telephone ? item.Telephone : '';\r\n            address = item.Address && item.Address.length > 0 ? item.Address : '地址暂无';\r\n            latitude = item.Latitude;\r\n            longitude = item.Longitude;\r\n            if (item.GetImage) \r\n            {\r\n                imageUrl = item.GetImage.ImageFrontUrl;\r\n            }\r\n        }\r\n        else if ( searchType === IConstant.ItemType.CanTing || searchType === IConstant.ItemType.Gou || searchType === IConstant.ItemType.Yu )\r\n        {\r\n            name = item.CnName;\r\n            code = item.Code;\r\n            distance = item.distance ? item.distance.toFixed(1) + '千米' : '';\r\n            telephone = item.Telephone ? item.Telephone : '';\r\n            address = item.Address && item.Address.length > 0 ? item.Address : '地址暂无';\r\n            latitude = item.Latitude;\r\n            longitude = item.Longitude;\r\n            if (item.GetImage) \r\n            {\r\n                imageUrl = item.GetImage.SmallImageFrontUrl;\r\n            }\r\n        }\r\n        else\r\n        {\r\n            name = item.CnName;\r\n            code = item.Code;\r\n            distance = item.distance ? item.distance.toFixed(1) + '千米' : '';\r\n            telephone = null;\r\n            address = item.Address && item.Address.length > 0 ? item.Address :  ( searchTypeName.replace('/',',') + '  地址暂无') ;\r\n            latitude = item.Latitude;\r\n            longitude = item.Longitude;\r\n            if (item.GetImage) \r\n            {\r\n                imageUrl = item.GetImage.SmallImageFrontUrl;\r\n            }\r\n        }\r\n        let selectedItem = {\r\n            name: name,\r\n            code: code,\r\n            distance: distance,\r\n            telephone: telephone,\r\n            address: address,\r\n            latitude: latitude,\r\n            longitude: longitude,\r\n            imageUrl: imageUrl,\r\n            type: searchType\r\n        };\r\n        return selectedItem;\r\n    }\r\n    dataListToCommonList()\r\n    {\r\n        if(!this.props.dataList || this.props.dataList.length === 0)\r\n        {\r\n            return [];\r\n        }\r\n        let _dataList = [];\r\n        for(let i = 0; i < this.props.dataList.length; i++)\r\n        {\r\n            let item = this.props.dataList[i];\r\n            _dataList.push(this.elementItemToCommonItem(item));\r\n        }\r\n        return _dataList;\r\n    }\r\n\r\n    sendCommonDataList()\r\n    {\r\n        if(window.postMessage)\r\n        {\r\n            window.postMessage(JSON.stringify({\r\n                type: NATIVE_MESSAGE_TYPE.ELEMENT_MAP_DATALIST,\r\n                data: {\r\n                    dataList: this.dataListToCommonList(),\r\n                    type: this.props.searchType,\r\n                    title: this.getSearchTypeName(),\r\n                }\r\n            }), '*');\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function (state, ownProps) {\r\n    let obj = state.map.elementMap;\r\n    return {\r\n        ...obj,\r\n        baiduMapInited: state.system.baiduMapInited,\r\n        markerClusterInited: state.system.markerClusterInited,\r\n        lat: state.system.latitude,\r\n        lng: state.system.longitude,\r\n        isFromNativeApp: state.native.isFromNativeApp,\r\n        ...state.native.windowSize,\r\n        nativeSearchKeywords: state.native.elemantMapSearchKeywords,\r\n        getElementMapDataList: state.native.getElementMapDataList,\r\n    };\r\n};\r\n\r\nSNJElementMapScreen = connect(mapStateToProps)(SNJElementMapScreen);\r\n\r\nexport default SNJElementMapScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/map/SNJElementMapScreen.js","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\nimport { _fetchAllList as  _fetchScenicList } from '../scenic/listAction';\r\nimport { _fetchAllList as  _fetchHotelList } from '../hotel/listAction';\r\nimport { _fetchAllList as  _fetchFoodList } from '../restaurant/listAction';\r\nimport { _fetchAllList as  _fetchShoppingList } from '../shopping/listAction';\r\nimport { _fetchAllList as  _fetchFunList } from '../fun/listAction';\r\n\r\nexport function goBackAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.GO_BACK,\r\n    };\r\n}\r\n\r\nexport function isPanelShowingChangeAction(isPanelShowing)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.IS_PANEL_SHOWING_CHANGE,\r\n        isPanelShowing: isPanelShowing,\r\n    };\r\n}\r\n\r\nexport function isFetchingChangeAction(isFetching)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.IS_FETCHING_CHANGE,\r\n        isFetching:isFetching\r\n    };\r\n}\r\n\r\nexport function keywordChangeAction(keywords)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(setKeywordsAction(keywords));\r\n        return new Promise((resolve)=>{\r\n            resolve();\r\n        });\r\n    };\r\n}\r\n\r\nfunction setKeywordsAction(keywords)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.KEYWORDS_CHANGE,\r\n        keywords: keywords,\r\n    };\r\n}\r\n\r\nexport function mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng));\r\n        return new Promise((resolve)=>{\r\n            resolve();\r\n        });\r\n    };\r\n    \r\n}\r\n\r\nfunction _mapZoomAndCenterLocationChangeAction(mapZoom,centerLat,centerLng)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.MAPZOOM_AND_CENTERLOCATION_CHANGE,\r\n        mapZoom:mapZoom,\r\n        centerLat: centerLat,\r\n        centerLng: centerLng\r\n    };\r\n}\r\n\r\nexport function searchTypeChangeAction(searchType)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.SEARCHTYPE_CHANGE,\r\n        searchType: searchType,\r\n    };\r\n}\r\n\r\nexport function asyncGetListAction(searchType, keywords,lat,lng)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getListRequestAction(searchType, keywords,lat,lng));\r\n        return _fetchList(searchType, keywords,lat,lng).then((resp)=>{\r\n            dispatch(_getListSuccessAction(searchType, keywords,lat,lng, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getListFailureAction(searchType, keywords,lat,lng, error));\r\n        });\r\n    };\r\n}\r\n\r\nexport function selectedItemChangeAction(selectedItem)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.SELECTEDITEM_CHANGE,\r\n        selectedItem: selectedItem,\r\n    };\r\n}\r\n\r\nfunction _fetchList(searchType, keywords,lat,lng)\r\n{\r\n    if (searchType === IConstant.ItemType.You)\r\n    {\r\n        return _fetchScenicList(keywords,lat,lng);\r\n    }\r\n    else if (searchType === IConstant.ItemType.Zhu)\r\n    {\r\n        return _fetchHotelList(keywords,lat,lng);\r\n    }\r\n    else if (searchType === IConstant.ItemType.CanTing)\r\n    {\r\n        return _fetchFoodList(keywords,lat,lng);\r\n    }\r\n    else if (searchType === IConstant.ItemType.Gou)\r\n    {\r\n        return _fetchShoppingList(keywords,lat,lng);\r\n    }\r\n    else if (searchType === IConstant.ItemType.Yu)\r\n    {\r\n        return _fetchFunList(keywords,lat,lng);\r\n    }\r\n    else\r\n    {\r\n        return _fetchEntityList(searchType,keywords,lat,lng);\r\n    }\r\n}\r\n\r\nfunction _fetchEntityList(searchType, keywords,lat,lng)\r\n{\r\n    let PortalApis;\r\n    let kvDict = {\r\n        conditionParams: {\r\n            Page: {\r\n                PageIndex: 1,\r\n                PageSize: IConstant.ALL_PAGE_SIZE\r\n            },\r\n            Search: [],\r\n            Order: []\r\n        },\r\n        CityCode: IConstant.CITY_CODE,\r\n        lat: lat,\r\n        lng: lng\r\n    };\r\n    if (searchType === IConstant.ItemType.Toilet)\r\n    {\r\n        PortalApis = IConstant.PortalApis.COMMON_SERVICE.ToiletList;\r\n    }\r\n    else if (searchType === IConstant.ItemType.Bank)\r\n    {\r\n        PortalApis = IConstant.PortalApis.COMMON_SERVICE.BankList;\r\n    }\r\n    else if (searchType === IConstant.ItemType.Hopsital)\r\n    {\r\n        PortalApis = IConstant.PortalApis.COMMON_SERVICE.HospitalList;\r\n    }\r\n    else if (searchType === IConstant.ItemType.PostOffice)\r\n    {\r\n        PortalApis = IConstant.PortalApis.COMMON_SERVICE.PostOfficeList;\r\n    }\r\n    else if (searchType === IConstant.ItemType.Gasstation)\r\n    {\r\n        PortalApis = IConstant.PortalApis.COMMON_SERVICE.GasstationList;\r\n    }\r\n    return HttpClient.getFromPortal(PortalApis,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getListRequestAction(searchType, keywords,lat,lng)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.GET_LIST_REQUEST,\r\n        searchType: searchType,\r\n        keywords: keywords,\r\n    };\r\n}\r\n\r\nfunction _getListSuccessAction(searchType, keywords,lat,lng,resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.GET_LIST_SUCCESS,\r\n        searchType: searchType,\r\n        keywords: keywords,\r\n        result:resp\r\n    };\r\n}\r\n\r\nfunction _getListFailureAction(searchType, keywords,lat,lng, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.MAP.ELEMENTMAP.GET_LIST_FAILURE,\r\n        searchType: searchType,\r\n        keywords: keywords,\r\n        message: error\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/map/elementMapAction.js","module.exports = __webpack_public_path__ + \"static/media/ico_map_phone@2x.02235dc5.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/map/ico_map_phone@2x.png\n// module id = 902\n// module chunks = 6 7","module.exports = __webpack_public_path__ + \"static/media/ico_map_go@2x.a847eed7.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/map/ico_map_go@2x.png\n// module id = 903\n// module chunks = 6 7","module.exports = __webpack_public_path__ + \"static/media/ico_map_detail@2x.8a6f5193.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/map/ico_map_detail@2x.png\n// module id = 904\n// module chunks = 6 7","module.exports = __webpack_public_path__ + \"static/media/common_poi_selected@2x.38730eb3.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/map/common_poi_selected@2x.png\n// module id = 905\n// module chunks = 6 7"],"sourceRoot":""}