webpackJsonp([1],{889:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),s=(n.n(r),n(12)),m=n.n(s),l=n(18),c=(n.n(l),n(19)),p=n.n(c),u=n(0),d=n.n(u),f=n(2),h=n(41),w=n(933),I=n(934),g=n(935),v=n(936),k=n(910),y=n(116),C=(n.n(y),function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}()),b=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSiteImageItemTapped=n.onSiteImageItemTapped.bind(n),n.showImageView=n.showImageView.bind(n),n.onImageItemTapped=n.onImageItemTapped.bind(n),n.friendProfileClicking=n.friendProfileClicking.bind(n),n}return o(t,e),C(t,[{key:"componentDidMount",value:function(){void 0===this.props.selectedTabIndex&&(this.props.dispatch(Object(k.f)(this.props.footmarkCode,1)),this.props.dispatch(Object(k.a)(this.props.footmarkCode)))}},{key:"render",value:function(){var e=this,t=window.innerHeight-45-5;return d.a.createElement("div",null,d.a.createElement(m.a,{mode:"dark",className:"navBar",icon:d.a.createElement(p.a,{type:"left"}),onLeftClick:function(){var t=e.props.dispatch;e.props.history.goBack(),t(Object(k.d)(e.props.footmarkCode))}},"\u8db3\u8ff9"),d.a.createElement("div",{className:"footmarkDetailContent"},d.a.createElement("div",{className:"footmarkDetailBox",style:{height:t+"px"}},this.renderLeftView(),d.a.createElement("div",{className:"footmarkDetailSplit"}),this.renderRightView()),d.a.createElement(h.a,{ref:function(t){e.photoBrowserView=t?t.getWrappedInstance():void 0}}),d.a.createElement(v.a,{detailItem:this.props.detailItem,imageViewVisible:this.props.imageViewVisible,onHideImageView:function(){return e.props.dispatch(Object(k.e)(e.props.footmarkCode,!1))},onImageItemTapped:this.onImageItemTapped})))}},{key:"renderRightView",value:function(){return d.a.createElement("div",{className:"footmarkDetailRight"},0===this.props.selectedTabIndex?this.renderMapView():null,1===this.props.selectedTabIndex?this.renderDetailView():null,3===this.props.selectedTabIndex?this.renderCommentsView():null)}},{key:"renderMapView",value:function(){return this.props.detailItem?d.a.createElement(g.a,{detailItem:this.props.detailItem}):null}},{key:"renderDetailView",value:function(){return this.props.detailItem?d.a.createElement(w.a,{detailItem:this.props.detailItem,onSiteImageItemTapped:this.onSiteImageItemTapped,friendProfileClicking:this.friendProfileClicking}):null}},{key:"renderCommentsView",value:function(){return this.props.detailItem?d.a.createElement(I.a,{detailItem:this.props.detailItem}):null}},{key:"renderLeftView",value:function(){var e=this,t=this.props.selectedTabIndex;return d.a.createElement("div",{className:"footmarkDetailLeft"},d.a.createElement("div",{className:0===t?"footmarkDetailLeftItem footmarkDetailLeftItemSelected":"footmarkDetailLeftItem",onClick:function(){return e.props.dispatch(Object(k.f)(e.props.footmarkCode,0))}},d.a.createElement("img",{src:n(0===t?938:939),alt:""}),d.a.createElement("span",null,"\u7ebf\u8def")),d.a.createElement("div",{className:1===t?"footmarkDetailLeftItem footmarkDetailLeftItemSelected":"footmarkDetailLeftItem",onClick:function(){return e.props.dispatch(Object(k.f)(e.props.footmarkCode,1))}},d.a.createElement("img",{src:n(1===t?940:941),alt:""}),d.a.createElement("span",null,"\u8be6\u60c5")),d.a.createElement("div",{className:2===t?"footmarkDetailLeftItem footmarkDetailLeftItemSelected":"footmarkDetailLeftItem",onClick:this.showImageView},d.a.createElement("img",{src:n(942),alt:""}),d.a.createElement("span",null,"\u7167\u7247")),this.props.detailItem&&1===this.props.detailItem.Status?d.a.createElement("div",{className:3===t?"footmarkDetailLeftItem footmarkDetailLeftItemSelected":"footmarkDetailLeftItem",onClick:function(){return e.props.dispatch(Object(k.f)(e.props.footmarkCode,3))}},d.a.createElement("img",{src:n(3===t?943:944),alt:""}),d.a.createElement("span",null,"\u8bc4\u8bba")):null)}},{key:"onSiteImageItemTapped",value:function(e,t){for(var n=[],i=0,a=0;a<this.props.detailItem.GetShowList.length;a++){var o=this.props.detailItem.GetShowList[a];if(o&&o.GetImage&&o.GetImage.ImageList&&o.GetImage.ImageList.length>0)for(var r=0;r<o.GetImage.ImageList.length;r++){var s=o.GetImage.ImageList[r];e===a&&t===r&&(i=n.length),n.push(s.BigImgSrc)}}this.photoBrowserView&&this.photoBrowserView.open(n,i)}},{key:"onImageItemTapped",value:function(e,t){for(var n=[],i=0;i<e.length;i++){var a=e[i];n.push(a.BigImgSrc)}this.photoBrowserView&&(this.photoBrowserView.open(n,t),this.props.dispatch(Object(k.e)(this.props.footmarkCode,!1)))}},{key:"showImageView",value:function(){this.props.dispatch(Object(k.e)(this.props.footmarkCode,!0))}},{key:"friendProfileClicking",value:function(e){this.props.history.push({pathname:"/userProfile/friendProfile",search:"?targetUserId="+e.UserID})}}]),t}(u.PureComponent),E=function(e,t){var n=t.history.location.state.item,i=n?n.Code:void 0,a=e.footmark.detailScreen[i];return a&&!a.detailItem&&(a.detailItem=n,a.selectedTabIndex=t.history.location.state.selectedTabIndex),Object.assign({},a,{footmarkCode:i})};b=Object(f.b)(E)(b),t.default=b},910:function(e,t,n){"use strict";function i(e){return function(t,n){return t(l(e)),s(e).then(function(n){t(n&&"0"===n.status&&n.results&&n.results.length>0?m(e,n.results[0]):c(e,new Error("\u83b7\u53d6\u8db3\u8ff9\u8be6\u60c5\u5931\u8d25")))}).catch(function(n){t(c(e,n))})}}function a(e,t){return{type:y.b.FOOTMARK.DETAIL.SET_SELECTED_TAB_INDEX,footmarkCode:e,index:t}}function o(e,t){return{type:y.b.FOOTMARK.DETAIL.SET_IMAGE_VIEW_VISIBLE,footmarkCode:e,imageViewVisible:t}}function r(e){return{type:y.b.FOOTMARK.DETAIL.GO_BACK,footmarkCode:e}}function s(e){var t={Code:e};return C.a.getFromPortal(y.q.FOOTMARK.DETAIL,t).then(function(e){return e.json()})}function m(e,t){return{type:y.b.FOOTMARK.DETAIL.GET_DETAIL_SUCCESS,footmarkCode:e,detailItem:t}}function l(e){return{type:y.b.FOOTMARK.DETAIL.GET_DETAIL_REQUEST,footmarkCode:e}}function c(e,t){return{type:y.b.FOOTMARK.DETAIL.GET_DETAIL_FAILURE,footmarkCode:e,message:t}}function p(e,t){return function(n,i){return n(d(e)),u(e,t).then(function(t){var i=t.results?t.results:{};n(f(e,i))}).catch(function(t){n(h(e,t))})}}function u(e,t){return C.a.postToPortal(y.q.FOOTMARK.COMMENT,t,void 0,!0).then(function(e){return e.json()})}function d(e){return{type:y.b.FOOTMARK.DETAIL.SEND_COMMENTS_REQUEST,footmarkCode:e}}function f(e,t){return{type:y.b.FOOTMARK.DETAIL.SEND_COMMENTS_SUCCESS,footmarkCode:e}}function h(e,t){return{type:y.b.FOOTMARK.DETAIL.SEND_COMMENTS_FAILURE,footmarkCode:e,message:t}}function w(e,t){return function(n,i){return n(g(e)),I(e,t).then(function(t){var i=t.results?t.results:{};n(v(e,i))}).catch(function(t){n(k(e,t))})}}function I(e,t){return C.a.postToPortal(y.q.FOOTMARK.REPLY_COMMENT,t,void 0,!0).then(function(e){return e.json()})}function g(e){return{type:y.b.FOOTMARK.DETAIL.SEND_REPLYS_REQUEST,footmarkCode:e}}function v(e,t){return{type:y.b.FOOTMARK.DETAIL.SEND_REPLYS_SUCCESS,footmarkCode:e}}function k(e,t){return{type:y.b.FOOTMARK.DETAIL.SEND_REPLYS_FAILURE,footmarkCode:e,message:t}}t.a=i,t.f=a,t.e=o,t.d=r,t.b=p,t.c=w;var y=n(1),C=n(8);n(21)},933:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),m=n(9),l=n.n(m),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),c(t,[{key:"render",value:function(){return this.props.detailItem?s.a.createElement("div",{className:"footmarkDetailView"},this.renderHeaderView(),this.renderTitleView(),this.renderSiteViews()):null}},{key:"renderSiteViews",value:function(){var e=this;return this.props.detailItem.GetShowList&&0!==this.props.detailItem.GetShowList.length?this.props.detailItem.GetShowList.map(function(t,n){return e.renderSiteItemView(t,n)}):null}},{key:"renderSiteItemView",value:function(e,t){return s.a.createElement("div",{className:"footmarkDetailViewSiteItem",key:t},this.renderSiteHeaderView(e),s.a.createElement("div",{className:"footmarkDetailViewSiteContent"},s.a.createElement("div",{className:"footmarkDetailViewSiteContentLeft",style:{width:"45px"}},s.a.createElement("div",{className:"footmarkDetailViewSiteContentSplit"})),s.a.createElement("div",{className:"footmarkDetailViewSiteContentRight"},e.Content&&e.Content.length>0?s.a.createElement("div",{className:"footmarkDetailViewSiteContentText"},e.Content):null,this.renderSiteImageViews(e,t))))}},{key:"renderSiteImageViews",value:function(e,t){if(!e.GetImage||!e.GetImage.ImageList||0===e.GetImage.ImageList.length)return null;return e.GetImage.ImageList.length<4?this.renderSiteImageRowView(t,e.GetImage.ImageList):s.a.createElement("div",null,this.renderSiteImageRowView(t,e.GetImage.ImageList.slice(0,2)),this.renderSiteImageRowView(t,e.GetImage.ImageList.slice(2,4)))}},{key:"renderSiteImageRowView",value:function(e,t){var n=this;return s.a.createElement("div",{className:"footmarkDetailViewsSiteImageRow"},t.map(function(i,a){return n.renderSiteImageItemView(e,t.length,i,a)}))}},{key:"renderSiteImageItemView",value:function(e,t,n,i){var a=this,o=23*(window.innerWidth-5)/28,r=o-45-10,m=(r-5*(t-1))/t,l=.75*m;return s.a.createElement("div",{key:i,className:"footmarkDetailViewsSiteImageItem",onClick:function(){var t=a.props.detailItem.GetShowList[e].GetImage.ImageList.indexOf(n);a.props.onSiteImageItemTapped&&a.props.onSiteImageItemTapped(e,t)},style:{backgroundImage:"url("+(1===t?n.MiddleImgSrc:n.SmallImgSrc)+")",width:m+"px",height:l+"px",marginLeft:(0===i?0:5)+"px",marginBottom:"5px"}})}},{key:"renderSiteHeaderView",value:function(e){return s.a.createElement("div",{className:"footmarkDetailViewSiteHeader"},s.a.createElement("div",{className:"footmarkDetailViewSiteHeaderIcon",style:{width:"45px"}},s.a.createElement("img",{src:n(169),alt:""})),s.a.createElement("div",{className:"footmarkDetailViewSiteHeaderText"},e.Address),s.a.createElement("div",{style:{width:"10px"}}),s.a.createElement("div",{className:"footmarkDetailViewSiteHeaderText"},this.getPlayDate(e.CreateTime)))}},{key:"getPlayDate",value:function(e){if(e&&e.length>0){var t=e.indexOf(" ");if(-1!==t&&-1!==(t=e.indexOf(":",t)))return e.substr(0,t)+"\u65f6"}return e}},{key:"renderTitleView",value:function(){return this.props.detailItem.Title&&this.props.detailItem.Title.length>0?s.a.createElement("div",{className:"footmarkDetailViewTitle",style:{marginLeft:"45px"}},this.props.detailItem.Title):null}},{key:"renderHeaderView",value:function(){var e=this;return s.a.createElement("div",{className:"footmarkDetailViewHeader"},s.a.createElement("div",{className:"footmarkDetailViewHeaderIcon",onClick:function(t){e.props.friendProfileClicking&&e.props.friendProfileClicking(e.props.detailItem)},style:{backgroundImage:"url("+this.props.detailItem.GetUserAvatar+")"}}),s.a.createElement("div",{className:"footmarkDetailViewHeaderText"},s.a.createElement("div",{className:"footmarkDetailViewHeaderName"},this.props.detailItem.NickName),s.a.createElement("div",{className:"footmarkDetailViewHeaderDesc"},this.props.detailItem.CreateTime)))}}]),t}(r.PureComponent);p.propTypes={onSiteImageItemTapped:l.a.func,friendProfileClicking:l.a.func},t.a=p},934:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(28),s=(n.n(r),n(29)),m=n.n(s),l=n(39),c=(n.n(l),n(40)),p=n.n(c),u=n(86),d=(n.n(u),n(87)),f=n.n(d),h=n(71),w=(n.n(h),n(72)),I=n.n(w),g=n(0),v=n.n(g),k=n(910),y=n(2),C=n(15),b=n(166),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),V="\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9",S=function(e){function t(e){i(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={showCommentsInput:!1,placeholder:V,comments:""},n.showCommentsButtonView=n.showCommentsButtonView.bind(n),n.sendComments=n.sendComments.bind(n),n}return o(t,e),E(t,[{key:"render",value:function(){var e=this;return this.props.detailItem?v.a.createElement("div",{className:"footmarkCommentsView"},this.renderHeaderView(),this.renderCommentsListView(),v.a.createElement(p.a,{popup:!0,visible:this.state.showCommentsInput,onClose:function(){return e.setState({showCommentsInput:!1})},animationType:"slide-up"},v.a.createElement(I.a,{ref:function(t){return e.commentsInputView=t},autoHeight:!0,placeholder:this.state.placeholder,onChange:function(t){return e.setState({comments:t})},rows:5,count:"500"}),v.a.createElement(f.a,{className:"forumDetailSendButton",type:"primary",onClick:this.sendComments,loading:this.props.isFetching&&this.state.comments,disabled:this.props.isFetching||!this.state.comments},"\u53d1\u9001"))):null}},{key:"renderCommentsListView",value:function(){var e=this;return this.props.detailItem.GetCommentList&&0!==this.props.detailItem.GetCommentList.length?this.props.detailItem.GetCommentList.map(function(t,n){return e.renderCommentsItemView(t,n)}):null}},{key:"renderCommentsItemView",value:function(e,t){var i=this;return v.a.createElement("div",{className:"footmarkCommentsViewCommentsItem",key:t},v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemIcon",style:{backgroundImage:"url("+e.GetUserAvatar+")"}}),v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemRight"},v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemHeaderText"},v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemNameRow"},v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemName"},e.NickName),v.a.createElement("div",{style:{flex:1}}),v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemNameRowCommentsButton",onClick:function(){i.showCommentsButtonView("\u56de\u590d@"+e.NickName,e)}},v.a.createElement("img",{src:n(168),alt:""}))),v.a.createElement("div",{className:"footmarkItemHeaderDate"},e.CreateTime)),v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemText"},e.Content),this.renderCommentsReplyListView(e),v.a.createElement("div",{className:"footmarkCommentsViewCommentsItemRightSplit"})))}},{key:"renderCommentsReplyListView",value:function(e){var t=this;return e.GetReplyList&&0!==e.GetReplyList.length?v.a.createElement("div",null,v.a.createElement("div",{className:"footmarkCommentsViewReplySplitView"}),e.GetReplyList.map(function(e,n){return t.renderCommentsReplyItemView(e,n)})):null}},{key:"renderCommentsReplyItemView",value:function(e,t){return v.a.createElement("div",{className:"footmarkCommentsViewReplyItem",key:t},v.a.createElement("span",{className:"footmarkCommentsViewReplyItemName"},e.NickName,"\xa0"),"\u56de\u590d",v.a.createElement("span",{className:"footmarkCommentsViewReplyItemName"},"\xa0",e.ToNickName,"\xa0"),":\xa0",e.Content)}},{key:"renderHeaderView",value:function(){var e=this,t=this.props.detailItem.GetCommentList?this.props.detailItem.GetCommentList.length:0;return v.a.createElement("div",{className:"footmarkCommentsViewHeader"},v.a.createElement("div",{className:"footmarkCommentsViewHeaderText"},"\u8bc4\u8bba(",t,")"),v.a.createElement("div",{style:{flex:1}}),v.a.createElement("div",{className:"footmarkCommentsViewHeaderButton",onClick:function(){return e.showCommentsButtonView()}},"\u6211\u8981\u8bc4\u8bba"))}},{key:"showCommentsButtonView",value:function(e,t){var n=this;this.props.userId||this.toLoginPage(),this.selectedItem=t,e=e||V,this.setState({showCommentsInput:!0,placeholder:e},function(){n.commentsInputView&&n.commentsInputView.focus()})}},{key:"sendComments",value:function(){var e=this;if(!this.state.comments)return m.a.fail(V),void this.commentsInputView.focus();if(this.selectedItem){var t={jsonParams:{CommentCode:this.selectedItem?this.selectedItem.Code:"",UserID:this.props.userId,Content:this.state.comments,ToUserID:this.selectedItem?this.selectedItem.UserID:""}};this.props.dispatch(Object(k.c)(this.props.detailItem.Code,t)).then(function(){e.props.successMessage&&m.a.success(e.props.successMessage,void 0,void 0,!1),e.setState({showCommentsInput:!1,comments:""}),e.selectedItem=void 0})}else{var n={jsonParams:{ThemeCode:this.props.detailItem.Code,UserID:this.props.userId,Content:this.state.comments}};this.props.dispatch(Object(k.b)(this.props.detailItem.Code,n)).then(function(){e.props.successMessage&&m.a.success(e.props.successMessage,void 0,void 0,!1),e.setState({showCommentsInput:!1,comments:""})})}}},{key:"toLoginPage",value:function(){this.props.history.push("/me/login")}}]),t}(g.PureComponent),T=function(e,t){var n=e.footmark.detailScreen[t.detailItem.Code];return Object.assign({},n,{userId:C.a.getUserId(e)})};S=Object(y.b)(T)(Object(b.a)(S)),t.a=S},935:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(0),s=n.n(r),m=n(2),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),l(t,[{key:"render",value:function(){var e=this,t=window.innerHeight-45-5;return s.a.createElement("div",{id:"footmarkDetailMap",ref:function(t){e.mapView=t},style:{height:t+"px"}})}},{key:"componentDidMount",value:function(){this.props.baiduMapInited&&this.initMap()}},{key:"componentDidUpdate",value:function(e,t,n){this.props.baiduMapInited&&!e.baiduMapInited&&this.initMap()}},{key:"initMap",value:function(){this.markerIcon=new window.BMap.Icon(n(284),new window.BMap.Size(30,30),{anchor:new window.BMap.Size(15,30),imageSize:new window.BMap.Size(30,30)}),this.map=this.map?this.map:new window.BMap.Map("footmarkDetailMap"),this.map.addControl(new window.BMap.NavigationControl({type:window.BMAP_NAVIGATION_CONTROL_SMALL,anchor:window.BMAP_ANCHOR_BOTTOM_RIGHT,enableGeolocation:!0,offset:new window.BMap.Size(20,20)})),this.map.addControl(new window.BMap.GeolocationControl({enableAutoLocation:!1})),this.addMarkers()}},{key:"addMarkers",value:function(){if(this.props.detailItem&&this.props.detailItem.GetShowList&&0!==this.props.detailItem.GetShowList.length){this.map.clearOverlays();for(var e=this.props.detailItem.GetShowList,t=[],n=0;n<e.length;n++){var i=this.addMarker(e[n]);t.push(i)}this.map.setViewport(t)}}},{key:"addMarker",value:function(e){e.Address&&(e.Address=e.Address.replace("\u4e2d\u56fd",""));var t=new window.BMap.Point(e.Longitude,e.Latitude),n=new window.BMap.Marker(t,{icon:this.markerIcon}),i='\n        <div style="display: flex; flex-direction: row;">\n            <div>\n                <div style="font-size: 14px; text-align: center; min-width:40vw; max-width: 70vw; white-space: normal;">'+e.Address+"</div>\n            </div>\n        </div>\n        ",a=new window.BMap.Label(i);return a.setStyle({padding:"5px 10px",color:"white","background-color":"#3988d4",border:"0px","border-radius":"3px",transform:"translate(calc(-50% + 11px), calc(-100% - 2px))"}),n.setLabel(a),this.map.addOverlay(n),t}}]),t}(r.PureComponent),p=function(e,t){return{baiduMapInited:e.system.baiduMapInited}};c=Object(m.b)(p)(c),t.a=c},936:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function o(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var r=n(39),s=(n.n(r),n(40)),m=n.n(s),l=n(0),c=n.n(l),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){return i(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,e),p(t,[{key:"render",value:function(){return this.props.detailItem?c.a.createElement(m.a,{popup:!0,visible:this.props.imageViewVisible,onClose:this.props.onHideImageView,className:"footmarkDetailImageViewModal",animationType:"slide-up"},c.a.createElement("div",{className:"footmarkDetailImageView",style:{height:window.innerHeight-45-20+"px"}},c.a.createElement("div",{className:"footmarkDetailImageViewCloseButton",onClick:this.props.onHideImageView},c.a.createElement("img",{src:n(937),alt:""})),c.a.createElement("div",{className:"footmarkDetailImageViewTitle"},"\u7167\u7247"),this.renderImageListView())):null}},{key:"renderImageListView",value:function(){var e=this;if(!this.props.detailItem.GetShowList||0===this.props.detailItem.GetShowList.length)return null;if(!this.imageList||0===this.imageList.length){this.imageList=[];for(var t=0;t<this.props.detailItem.GetShowList.length;t++){var n=this.props.detailItem.GetShowList[t];n&&n.GetImage&&n.GetImage.ImageList&&n.GetImage.ImageList.length>0&&(this.imageList=this.imageList.concat(n.GetImage.ImageList))}}var i=Math.ceil(this.imageList.length/2);return c.a.createElement("div",{className:"footmarkDetailImageViewRows"},Array(i).fill(0).map(function(t,n){return e.renderImageRowView(n)}))}},{key:"renderImageRowView",value:function(e){var t=this,n=2*e,i=this.imageList[n],a=void 0;n+1<this.imageList.length&&(a=this.imageList[n+1]);var o=(window.innerWidth-30-20)/2,r=.75*o;return c.a.createElement("div",{className:"footmarkDetailImageViewRow",style:{marginBottom:"10px"},key:e},c.a.createElement("div",{style:{width:"10px"}}),c.a.createElement("div",{className:"footmarkDetailImageViewItem",style:{backgroundImage:"url("+i.SmallImgSrc+")",width:o+"px",height:r+"px"},onClick:function(){return t.props.onImageItemTapped(t.imageList,n)}}),c.a.createElement("div",{style:{width:"10px"}}),a?c.a.createElement("div",{className:"footmarkDetailImageViewItem",style:{backgroundImage:"url("+a.SmallImgSrc+")",width:o+"px",height:r+"px"},onClick:function(){return t.props.onImageItemTapped(t.imageList,n+1)}}):null)}}]),t}(l.PureComponent);t.a=u},937:function(e,t,n){e.exports=n.p+"static/media/close-img@2x.806d3363.png"},938:function(e,t,n){e.exports=n.p+"static/media/footmark-route-on@2x.42bee076.png"},939:function(e,t,n){e.exports=n.p+"static/media/route@2x.24e0917d.png"},940:function(e,t,n){e.exports=n.p+"static/media/footmark-detail-on@2x.40013264.png"},941:function(e,t,n){e.exports=n.p+"static/media/footmark-detail@2x.bf05de89.png"},942:function(e,t,n){e.exports=n.p+"static/media/footmark-photo@2x.9ea30435.png"},943:function(e,t,n){e.exports=n.p+"static/media/footmark-comment-on@2x.1ced2794.png"},944:function(e,t,n){e.exports=n.p+"static/media/footmark-comment@2x.41b18193.png"}});
//# sourceMappingURL=1.a28ac1cb.chunk.js.map