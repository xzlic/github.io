{"version":3,"sources":["../static/js/23.eff813c6.chunk.js","screens/footmark/FootmarkListScreen.js"],"names":["webpackJsonp","888","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_tabs_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_tabs__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_tabs___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8__views_common_Content__","__WEBPACK_IMPORTED_MODULE_9__core_utils_SysUtil__","__WEBPACK_IMPORTED_MODULE_10__views_footmark_FootmarkListView__","__WEBPACK_IMPORTED_MODULE_11__views_photo_brower_PhotoBrowerView__","__WEBPACK_IMPORTED_MODULE_12__store_actions_footmark_listAction__","__WEBPACK_IMPORTED_MODULE_13__views_common_LeftContentView__","__WEBPACK_IMPORTED_MODULE_14__assets_css_footmark_css__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","FootmarkListScreen","_PureComponent","this","_this","getPrototypeOf","tabs","title","footmarkType","onItemClick","bind","onLineClick","toLoginPage","onSiteImageItemClick","createFootmarkViewTapped","myFootmarkEditClicking","friendProfileClicking","createFootMark","_this2","listViewHeight","window","innerHeight","a","createElement","mode","className","leftContent","ref","view","LeftContentView","getWrappedInstance","scrollView","goBackAction","history","onLeftClick","goHome","rightContent","renderRightMenu","style","backgroundColor","initialPage","selectedTabIndex","prerenderingSiblingsNumber","onChange","tab","index","dispatch","onTabClick","console","log","map","item","listView","height","photoBrowserView","undefined","siteIndex","imageIndex","imageList","selectedIndex","GetShowList","siteItem","GetImage","ImageList","j","imageItem","push","BigImgSrc","open","arguments","cacheScrollOffset","pathname","state","_this3","onClick","src","alt","userId","_this4","Status","alert","text","onPress","isEdit","footmarkItem","search","UserID","mapStateToProps","footmark","listScreen","getUserId"],"mappings":"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","file":"static/js/23.eff813c6.chunk.js","sourcesContent":["webpackJsonp([23],{\n\n/***/ 888:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_tabs_style_css__ = __webpack_require__(34);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_tabs_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_tabs_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_tabs__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_tabs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_tabs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__core_utils_SysUtil__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__views_footmark_FootmarkListView__ = __webpack_require__(291);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__views_photo_brower_PhotoBrowerView__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__store_actions_footmark_listAction__ = __webpack_require__(303);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__views_common_LeftContentView__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__assets_css_footmark_css__ = __webpack_require__(116);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__assets_css_footmark_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__assets_css_footmark_css__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var FootmarkListScreen=function(_PureComponent){_inherits(FootmarkListScreen,_PureComponent);function FootmarkListScreen(props){_classCallCheck(this,FootmarkListScreen);var _this=_possibleConstructorReturn(this,(FootmarkListScreen.__proto__||Object.getPrototypeOf(FootmarkListScreen)).call(this,props));_this.tabs=[{title:'推荐',footmarkType:1},{title:'最新',footmarkType:0},{title:'我的',footmarkType:3}];_this.onItemClick=_this.onItemClick.bind(_this);_this.onLineClick=_this.onLineClick.bind(_this);_this.toLoginPage=_this.toLoginPage.bind(_this);_this.onSiteImageItemClick=_this.onSiteImageItemClick.bind(_this);_this.createFootmarkViewTapped=_this.createFootmarkViewTapped.bind(_this);_this.myFootmarkEditClicking=_this.myFootmarkEditClicking.bind(_this);_this.friendProfileClicking=_this.friendProfileClicking.bind(_this);_this.createFootMark=_this.createFootMark.bind(_this);return _this;}// 0:最新；1:推荐；2:收藏；3:我的\n_createClass(FootmarkListScreen,[{key:'render',value:function render(){var _this2=this;var listViewHeight=window.innerHeight-(45+44);return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',leftContent:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__views_common_LeftContentView__[\"a\" /* default */],{ref:function ref(view){_this2.LeftContentView=view?view.getWrappedInstance():_this2.scrollView;},goBackAction:__WEBPACK_IMPORTED_MODULE_12__store_actions_footmark_listAction__[\"e\" /* goBackAction */],history:this.props.history}),onLeftClick:function onLeftClick(){_this2.LeftContentView.goHome();},rightContent:this.renderRightMenu()},'\\u8DB3\\u8FF9'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__views_common_Content__[\"a\" /* default */],{style:{backgroundColor:'#eeeef6'}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_tabs___default.a,{tabs:this.tabs,initialPage:this.props.selectedTabIndex,prerenderingSiblingsNumber:0,onChange:function onChange(tab,index){_this2.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_12__store_actions_footmark_listAction__[\"g\" /* setSelectedTabIndexAction */])(index));},onTabClick:function onTabClick(tab,index){console.log('onTabClick',index,tab);}},this.tabs.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__views_footmark_FootmarkListView__[\"a\" /* default */],{key:index,footmarkType:item.footmarkType,ref:function ref(listView){if(listView){_this2.tabs[index].listView=listView.getWrappedInstance();}},onItemClick:_this2.onItemClick,onLineClick:_this2.onLineClick,onSiteImageItemClick:_this2.onSiteImageItemClick,toLoginPage:_this2.toLoginPage,myFootmarkEditClicking:_this2.myFootmarkEditClicking,friendProfileClicking:_this2.friendProfileClicking,height:listViewHeight});})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_11__views_photo_brower_PhotoBrowerView__[\"a\" /* default */],{ref:function ref(view){_this2.photoBrowserView=view?view.getWrappedInstance():undefined;}})));}},{key:'onSiteImageItemClick',value:function onSiteImageItemClick(item,siteIndex,imageIndex){var imageList=[];var selectedIndex=0;for(var i=0;i<item.GetShowList.length;i++){var siteItem=item.GetShowList[i];if(siteItem&&siteItem.GetImage&&siteItem.GetImage.ImageList&&siteItem.GetImage.ImageList.length>0){for(var j=0;j<siteItem.GetImage.ImageList.length;j++){var imageItem=siteItem.GetImage.ImageList[j];if(siteIndex===i&&imageIndex===j){selectedIndex=imageList.length;}imageList.push(imageItem.BigImgSrc);}}}if(this.photoBrowserView){this.photoBrowserView.open(imageList,selectedIndex);}}},{key:'onLineClick',value:function onLineClick(item){this.onItemClick(item,0);}},{key:'onItemClick',value:function onItemClick(item){var selectedTabIndex=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!item){return;}for(var i=0;i<this.tabs.length;i++){var listView=this.tabs[i].listView;if(listView){listView.cacheScrollOffset();}}this.props.history.push({pathname:'/footmark/detail',state:{item:item,selectedTabIndex:selectedTabIndex}});}},{key:'renderRightMenu',value:function renderRightMenu(){var _this3=this;return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'footmarkAddMenu',onClick:function onClick(){return _this3.createFootmarkViewTapped();}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{src:__webpack_require__(287),alt:''}));}},{key:'createFootmarkViewTapped',value:function createFootmarkViewTapped(){for(var i=0;i<this.tabs.length;i++){var listView=this.tabs[i].listView;if(listView){listView.cacheScrollOffset();}}if(!this.props.userId){this.toLoginPage();}else{this.props.history.push({pathname:'/footmark/create'});}}},{key:'toLoginPage',value:function toLoginPage(){this.props.history.push('/me/login');}},{key:'myFootmarkEditClicking',value:function myFootmarkEditClicking(item){var _this4=this;if(item.Status===1){__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default.a.alert('提示','该足迹已审核通过，再次编辑将重新审核！',[{text:'取消',style:'default'},{text:'确定',onPress:function onPress(){return _this4.createFootMark(item);}}]);}else{this.createFootMark(item);}}},{key:'createFootMark',value:function createFootMark(item){this.props.history.push({pathname:'/footmark/create',state:{isEdit:true,footmarkItem:item}});}},{key:'friendProfileClicking',value:function friendProfileClicking(item){this.props.history.push({pathname:'/userProfile/friendProfile',search:'?targetUserId='+item.UserID});}}]);return FootmarkListScreen;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"PureComponent\"]);var mapStateToProps=function mapStateToProps(state){return{selectedTabIndex:state.footmark.listScreen.selectedTabIndex,userId:__WEBPACK_IMPORTED_MODULE_9__core_utils_SysUtil__[\"a\" /* default */].getUserId(state)};};FootmarkListScreen=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps)(FootmarkListScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (FootmarkListScreen);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/23.eff813c6.chunk.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Tabs, NavBar, Modal } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\nimport FootmarkListView from '../../views/footmark/FootmarkListView';\r\nimport PhotoBrowserView from '../../views/photo-brower/PhotoBrowerView';\r\nimport { setSelectedTabIndexAction, goBackAction } from '../../store/actions/footmark/listAction';\r\nimport LeftContentView from '../../views/common/LeftContentView';\r\nimport '../../assets/css/footmark.css';\r\n\r\nclass FootmarkListScreen extends PureComponent\r\n{\r\n    // 0:最新；1:推荐；2:收藏；3:我的\r\n    tabs = [\r\n        {title: '推荐', footmarkType: 1},\r\n        {title: '最新', footmarkType: 0},\r\n        {title: '我的', footmarkType: 3},\r\n    ];\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.onLineClick = this.onLineClick.bind(this);\r\n        this.toLoginPage = this.toLoginPage.bind(this);\r\n        this.onSiteImageItemClick = this.onSiteImageItemClick.bind(this);\r\n        this.createFootmarkViewTapped = this.createFootmarkViewTapped.bind(this);\r\n        this.myFootmarkEditClicking = this.myFootmarkEditClicking.bind(this);\r\n        this.friendProfileClicking = this.friendProfileClicking.bind(this);\r\n        this.createFootMark = this.createFootMark.bind(this);\r\n        \r\n    }\r\n    render()\r\n    {\r\n        let listViewHeight = window.innerHeight - (45 + 44);\r\n\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    leftContent={<LeftContentView\r\n                        ref={(view) => { this.LeftContentView = view ? view.getWrappedInstance() : this.scrollView; }}\r\n                        goBackAction={goBackAction}\r\n                        history={this.props.history}\r\n                    />}\r\n                    onLeftClick={() => {\r\n                        this.LeftContentView.goHome();\r\n                    }}\r\n                    rightContent={this.renderRightMenu()}>\r\n                    足迹\r\n                </NavBar>\r\n                <Content style={{backgroundColor: '#eeeef6'}}>\r\n                    <Tabs tabs={this.tabs}\r\n                        initialPage={this.props.selectedTabIndex}\r\n                        prerenderingSiblingsNumber={0}\r\n                        onChange={(tab, index) => { \r\n                            this.props.dispatch(setSelectedTabIndexAction(index));\r\n                        }}\r\n                        onTabClick={(tab, index) => { console.log('onTabClick', index, tab); }}>\r\n                        {\r\n                            this.tabs.map((item, index)=><FootmarkListView key={index} \r\n                                footmarkType={item.footmarkType}\r\n                                ref={(listView)=>{\r\n                                    if(listView)\r\n                                    {\r\n                                        this.tabs[index].listView = listView.getWrappedInstance();\r\n                                    }\r\n                                }}\r\n                                onItemClick={this.onItemClick}\r\n                                onLineClick={this.onLineClick}\r\n                                onSiteImageItemClick={this.onSiteImageItemClick}\r\n                                toLoginPage={this.toLoginPage}\r\n                                myFootmarkEditClicking={this.myFootmarkEditClicking}\r\n                                friendProfileClicking={this.friendProfileClicking}\r\n                                height={listViewHeight}/>)\r\n                        }\r\n                    </Tabs>\r\n                    <PhotoBrowserView \r\n                        ref={(view)=>{this.photoBrowserView = view ? view.getWrappedInstance() : undefined;}}\r\n                    />\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    onSiteImageItemClick(item, siteIndex, imageIndex)\r\n    {\r\n        let imageList = [];\r\n        let selectedIndex = 0;\r\n        for(let i = 0; i < item.GetShowList.length; i++)\r\n        {\r\n            let siteItem = item.GetShowList[i];\r\n            if(siteItem && siteItem.GetImage && siteItem.GetImage.ImageList && siteItem.GetImage.ImageList.length > 0)\r\n            {\r\n                for(let j = 0; j < siteItem.GetImage.ImageList.length; j++)\r\n                {\r\n                    let imageItem = siteItem.GetImage.ImageList[j];\r\n                    if(siteIndex === i && imageIndex === j)\r\n                    {\r\n                        selectedIndex = imageList.length;\r\n                    }\r\n                    imageList.push(imageItem.BigImgSrc);\r\n                }\r\n            }\r\n        }\r\n        if(this.photoBrowserView)\r\n        {\r\n            this.photoBrowserView.open(imageList, selectedIndex);\r\n        }\r\n    }\r\n    onLineClick(item)\r\n    {\r\n        this.onItemClick(item, 0);\r\n    }\r\n    onItemClick(item, selectedTabIndex = 1)\r\n    {\r\n        if(!item)\r\n        {\r\n            return;\r\n        }\r\n        for(let i = 0; i < this.tabs.length; i++)\r\n        {\r\n            let listView = this.tabs[i].listView;\r\n            if(listView)\r\n            {\r\n                listView.cacheScrollOffset();\r\n            }\r\n        }\r\n        this.props.history.push({\r\n            pathname: '/footmark/detail',\r\n            state: {\r\n                item,\r\n                selectedTabIndex,\r\n            }\r\n        });\r\n    }\r\n    renderRightMenu()\r\n    {\r\n        return (\r\n            <div className=\"footmarkAddMenu\" onClick={()=>this.createFootmarkViewTapped()}>\r\n                <img src={require('../../assets/images/add_public_account@2x.png')} alt=''/>\r\n            </div>\r\n        );\r\n    }\r\n    createFootmarkViewTapped()\r\n    {\r\n        for(let i = 0; i < this.tabs.length; i++)\r\n        {\r\n            let listView = this.tabs[i].listView;\r\n            if(listView)\r\n            {\r\n                listView.cacheScrollOffset();\r\n            }\r\n        }\r\n        if(!this.props.userId)\r\n        {\r\n            this.toLoginPage();\r\n        }\r\n        else\r\n        {\r\n            this.props.history.push({\r\n                pathname: '/footmark/create'\r\n            });\r\n        }\r\n    }\r\n    toLoginPage()\r\n    {\r\n        this.props.history.push('/me/login');\r\n    }\r\n    myFootmarkEditClicking(item)\r\n    {\r\n        if(item.Status === 1){\r\n            Modal.alert('提示', '该足迹已审核通过，再次编辑将重新审核！', [\r\n                { text: '取消', style: 'default' },\r\n                { text: '确定', onPress: () => this.createFootMark(item)},\r\n            ]);\r\n        } else {\r\n            this.createFootMark(item);\r\n        }\r\n    }\r\n\r\n    createFootMark(item){\r\n        this.props.history.push({\r\n            pathname: '/footmark/create', \r\n            state:{\r\n                isEdit: true,\r\n                footmarkItem: item\r\n            }\r\n        });\r\n    }\r\n    friendProfileClicking(item)\r\n    {\r\n        this.props.history.push({\r\n            pathname: '/userProfile/friendProfile',\r\n            search: `?targetUserId=${item.UserID}`,\r\n        });\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state)\r\n{\r\n    return {\r\n        selectedTabIndex: state.footmark.listScreen.selectedTabIndex,\r\n        userId: SysUtil.getUserId(state)\r\n    };\r\n};\r\n\r\nFootmarkListScreen = connect(mapStateToProps)(FootmarkListScreen);\r\n\r\nexport default FootmarkListScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/footmark/FootmarkListScreen.js"],"sourceRoot":""}