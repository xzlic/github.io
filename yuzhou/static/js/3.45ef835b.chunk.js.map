{"version":3,"sources":["../static/js/3.45ef835b.chunk.js","screens/journey/JourneyIndexScreen.js","store/actions/journey/indexAction.js","views/journey/JourneyIndexMineListView.js","assets/images/journey/my_journey@2x.png","assets/images/journey/my_journey_label@2x.png","assets/images/journey/journey-empty@2x.png","views/journey/JourenyIndexRecommendListView.js","assets/images/journey/recommend_journey@2x.png"],"names":["webpackJsonp","891","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8_react_dom__","__WEBPACK_IMPORTED_MODULE_8_react_dom___default","__WEBPACK_IMPORTED_MODULE_9__views_common_Content__","__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__","__WEBPACK_IMPORTED_MODULE_11__core_utils_SysUtil__","__WEBPACK_IMPORTED_MODULE_12__core_utils_UIUtil__","__WEBPACK_IMPORTED_MODULE_13__views_journey_JourneyIndexMineListView__","__WEBPACK_IMPORTED_MODULE_14__views_journey_JourenyIndexRecommendListView__","__WEBPACK_IMPORTED_MODULE_15__views_common_LeftContentView__","__WEBPACK_IMPORTED_MODULE_16__assets_css_journey_css__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","JourneyIndexScreen","_PureComponent","this","_this","getPrototypeOf","showMyJourneyListScreen","bind","onCreateButtonClick","onRecommendItemClick","onMineItemClick","onRefresh","state","isPullRefresh","_this2","mineList","dataList","recommendList","isRefresh","dispatch","userId","then","restoreScrollViewPosition","_this3","a","createElement","mode","className","leftContent","ref","view","LeftContentView","getWrappedInstance","scrollView","goBackAction","history","onLeftClick","goHome","style","height","window","innerHeight","overflow","refreshing","fixListViewHeightIssue","onMoreButtonClick","onItemClick","isFetching","toast","text","_this4","setState","cacheScrollOffset","push","match","url","item","isMine","PlanMainID","offsetY","findDOMNode","scrollTop","isNaN","scrollViewOffset","scrollToY","mapStateToProps","ownProps","obj","journey","indexScreen","assign","getUserId","906","asyncGetMyJourneyListAction","getState","_getMineListRequestAction","_fetchMineList","resp","_getMineListSuccessAction","results","catch","error","_getMineListFailureAction","asyncGetRecommendJourneyListAction","_getRecommendListRequestAction","_fetchRecommendList","_getRecommendListSuccessAction","_getRecommendListFailureAction","type","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","JOURNEY","INDEX","GO_BACK","setScrollerPositionAction","offset","SET_SCROLL_OFFSET","GET_MINE_LIST_REQUEST","GET_MINE_LIST_SUCCESS","GET_MINE_LIST_FAILURE","message","kvDict","pageIndex","pageSize","userID","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","getFromPortal","GetTourPlanInfo","json","GET_RECOMMEND_LIST_REQUEST","GET_RECOMMEND_LIST_FAILURE","GET_RECOMMEND_LIST_SUCCESS","GetRecommendTourForHome","_setRefreshAction","SET_LIST_REFRESH","945","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","__WEBPACK_IMPORTED_MODULE_1_react_redux__","__WEBPACK_IMPORTED_MODULE_2_prop_types__","__WEBPACK_IMPORTED_MODULE_2_prop_types___default","__WEBPACK_IMPORTED_MODULE_3__core_utils_SysUtil__","JourneyIndexMineListView","apply","arguments","onClick","src","alt","flex","renderJourneyListView","renderEmptyView","rows","Math","ceil","Array","fill","map","index","renderJourneyRowView","rowIndex","marginTop","renderJourneyItemView","width","innerWidth","marginLeft","H_MARGIN","GetImage","ImageFrontUrl","TourName","BeginDate","DayCount","propTypes","func","946","exports","p","947","948","949","JourenyIndexRecommendListView","isLast","marginBottom","950"],"mappings":"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","file":"static/js/3.45ef835b.chunk.js","sourcesContent":["webpackJsonp([3],{\n\n/***/ 891:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__ = __webpack_require__(906);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__core_utils_SysUtil__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__core_utils_UIUtil__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__views_journey_JourneyIndexMineListView__ = __webpack_require__(945);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__views_journey_JourenyIndexRecommendListView__ = __webpack_require__(949);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__views_common_LeftContentView__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__assets_css_journey_css__ = __webpack_require__(115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__assets_css_journey_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16__assets_css_journey_css__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var JourneyIndexScreen=function(_PureComponent){_inherits(JourneyIndexScreen,_PureComponent);function JourneyIndexScreen(props){_classCallCheck(this,JourneyIndexScreen);var _this=_possibleConstructorReturn(this,(JourneyIndexScreen.__proto__||Object.getPrototypeOf(JourneyIndexScreen)).call(this,props));_this.showMyJourneyListScreen=_this.showMyJourneyListScreen.bind(_this);_this.onCreateButtonClick=_this.onCreateButtonClick.bind(_this);_this.onRecommendItemClick=_this.onRecommendItemClick.bind(_this);_this.onMineItemClick=_this.onMineItemClick.bind(_this);_this.onRefresh=_this.onRefresh.bind(_this);_this.state={isPullRefresh:false};return _this;}_createClass(JourneyIndexScreen,[{key:'componentDidMount',value:function componentDidMount(){var _this2=this;if(!this.props.mineList.dataList||!this.props.recommendList.dataList||this.props.mineList.isRefresh){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"b\" /* asyncGetMyJourneyListAction */])(this.props.userId)).then(function(){return _this2.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"c\" /* asyncGetRecommendJourneyListAction */])(_this2.props.userId));});}this.restoreScrollViewPosition();}},{key:'render',value:function render(){var _this3=this;return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',leftContent:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15__views_common_LeftContentView__[\"a\" /* default */],{ref:function ref(view){_this3.LeftContentView=view?view.getWrappedInstance():_this3.scrollView;},goBackAction:__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"d\" /* goBackAction */],history:this.props.history}),onLeftClick:function onLeftClick(){_this3.LeftContentView.goHome();}},'\\u6211\\u7684\\u884C\\u7A0B'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__views_common_Content__[\"a\" /* default */],{ref:function ref(view){_this3.scrollView=view?view.getWrappedInstance():_this3.scrollView;}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default.a,{style:{height:window.innerHeight-45+'px',overflow:'auto'},refreshing:this.state.isPullRefresh,onRefresh:this.onRefresh,ref:function ref(_ref){return __WEBPACK_IMPORTED_MODULE_12__core_utils_UIUtil__[\"a\" /* default */].fixListViewHeightIssue(_ref,window.innerHeight-45);}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__views_journey_JourneyIndexMineListView__[\"a\" /* default */],{onMoreButtonClick:this.showMyJourneyListScreen,onCreateButtonClick:this.onCreateButtonClick,onItemClick:this.onMineItemClick}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14__views_journey_JourenyIndexRecommendListView__[\"a\" /* default */],{onItemClick:this.onRecommendItemClick}),!this.state.isPullRefresh&&(this.props.mineList.isFetching||this.props.recommendList.isFetching)?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null)));}},{key:'onRefresh',value:function onRefresh(){var _this4=this;this.setState({isPullRefresh:true});this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"d\" /* goBackAction */])());this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"b\" /* asyncGetMyJourneyListAction */])(this.props.userId)).then(function(){return _this4.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"c\" /* asyncGetRecommendJourneyListAction */])(_this4.props.userId)).then(function(){_this4.setState({isPullRefresh:false});});});}},{key:'showMyJourneyListScreen',value:function showMyJourneyListScreen(){this.cacheScrollOffset();if(!this.props.userId){this.props.history.push('/me/login');}else{this.props.history.push(this.props.match.url+'/list');}}},{key:'onCreateButtonClick',value:function onCreateButtonClick(){this.cacheScrollOffset();if(!this.props.userId){this.props.history.push('/me/login');}else{this.props.history.push(this.props.match.url+'/create');}}},{key:'onMineItemClick',value:function onMineItemClick(item){this.onItemClick(item,true);}},{key:'onRecommendItemClick',value:function onRecommendItemClick(item){this.onItemClick(item,false);}},{key:'onItemClick',value:function onItemClick(item,isMine){this.cacheScrollOffset();this.props.history.push(this.props.match.url+'/detail/'+item.PlanMainID);}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){var offsetY=__WEBPACK_IMPORTED_MODULE_8_react_dom___default.a.findDOMNode(this.scrollView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_indexAction__[\"e\" /* setScrollerPositionAction */])(offsetY));}},{key:'restoreScrollViewPosition',value:function restoreScrollViewPosition(){if(this.scrollView){if(!isNaN(this.props.scrollViewOffset)){this.scrollView.scrollToY(this.props.scrollViewOffset);}else{this.scrollView.scrollToY(0);}}}}]);return JourneyIndexScreen;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"PureComponent\"]);var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.journey.indexScreen;return Object.assign({userId:__WEBPACK_IMPORTED_MODULE_11__core_utils_SysUtil__[\"a\" /* default */].getUserId(state)},obj);};JourneyIndexScreen=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps)(JourneyIndexScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (JourneyIndexScreen);\n\n/***/ }),\n\n/***/ 906:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetMyJourneyListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = asyncGetRecommendJourneyListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = setScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = _setRefreshAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction asyncGetMyJourneyListAction(userId){return function(dispatch,getState){dispatch(_getMineListRequestAction());return _fetchMineList(userId).then(function(resp){dispatch(_getMineListSuccessAction(resp?resp.results:[]));}).catch(function(error){dispatch(_getMineListFailureAction(error));});};}function asyncGetRecommendJourneyListAction(userId){return function(dispatch,getState){dispatch(_getRecommendListRequestAction());return _fetchRecommendList(userId).then(function(resp){dispatch(_getRecommendListSuccessAction(resp?resp.results:[]));}).catch(function(error){dispatch(_getRecommendListFailureAction(error));});};}function goBackAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GO_BACK};}function setScrollerPositionAction(offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.SET_SCROLL_OFFSET,scrollViewOffset:offset};}function _getMineListRequestAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GET_MINE_LIST_REQUEST};}function _getMineListSuccessAction(resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GET_MINE_LIST_SUCCESS,dataList:resp};}function _getMineListFailureAction(error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GET_MINE_LIST_FAILURE,message:error};}function _fetchMineList(userId){var kvDict={pageIndex:1,pageSize:4,userID:userId};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getFromPortal(__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].JOURNEY.GetTourPlanInfo,kvDict).then(function(resp){return resp.json();});}function _getRecommendListRequestAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GET_RECOMMEND_LIST_REQUEST};}function _getRecommendListFailureAction(error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GET_RECOMMEND_LIST_FAILURE,message:error};}function _getRecommendListSuccessAction(resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.GET_RECOMMEND_LIST_SUCCESS,dataList:resp};}function _fetchRecommendList(userId){var kvDict={pageIndex:1,pageSize:10000};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getFromPortal(__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].JOURNEY.GetRecommendTourForHome,kvDict).then(function(resp){return resp.json();});}function _setRefreshAction(isRefresh){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.INDEX.SET_LIST_REFRESH,isRefresh:isRefresh};}\n\n/***/ }),\n\n/***/ 945:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_utils_SysUtil__ = __webpack_require__(15);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var H_MARGIN=10;var JourneyIndexMineListView=function(_PureComponent){_inherits(JourneyIndexMineListView,_PureComponent);function JourneyIndexMineListView(){_classCallCheck(this,JourneyIndexMineListView);return _possibleConstructorReturn(this,(JourneyIndexMineListView.__proto__||Object.getPrototypeOf(JourneyIndexMineListView)).apply(this,arguments));}_createClass(JourneyIndexMineListView,[{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexHeaderRow',onClick:this.props.onMoreButtonClick},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'journeyIndexHeaderIcon',src:__webpack_require__(946),alt:''}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexHeaderTitle'},'\\u6211\\u7684\\u884C\\u7A0B'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{style:{flex:1}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexHeaderMore'},'\\u66F4\\u591A'),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'journeyIndexHeaderArrow',src:__webpack_require__(55),alt:''})),this.props.dataList&&this.props.dataList.length>0?this.renderJourneyListView():this.renderEmptyView(),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexCreateButtonRow'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexCreateButton',onClick:this.props.onCreateButtonClick},'\\u521B\\u5EFA\\u6211\\u7684\\u884C\\u7A0B')));}},{key:'renderJourneyListView',value:function renderJourneyListView(){var _this2=this;var rows=Math.ceil(this.props.dataList.length/2);return Array(rows).fill(0).map(function(item,index){return _this2.renderJourneyRowView(index);});}},{key:'renderJourneyRowView',value:function renderJourneyRowView(rowIndex){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:rowIndex,style:{marginTop:(rowIndex===0?0:15)+'px'},className:'joruneyIndexItemRow'},this.renderJourneyItemView(rowIndex*2),this.renderJourneyItemView(rowIndex*2+1));}},{key:'renderJourneyItemView',value:function renderJourneyItemView(index){var _this3=this;if(index>=this.props.dataList.length){return null;}var item=this.props.dataList[index];var width=(window.innerWidth-3*H_MARGIN)/2.0;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexItem',style:{width:width+'px',marginLeft:H_MARGIN+'px'},onClick:function onClick(){if(_this3.props.onItemClick){_this3.props.onItemClick(item);}}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{src:item.GetImage.ImageFrontUrl,alt:'',style:{width:width+'px',height:width*0.6+'px'}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexItemTitle'},item.TourName),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexItemStartTime'},'\\u51FA\\u53D1\\u65F6\\u95F4\\uFF1A',item.BeginDate),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexItemIcon'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{src:__webpack_require__(947),alt:''}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexItemDay'},item.DayCount,'\\u5929')));}},{key:'renderEmptyView',value:function renderEmptyView(){var width=window.innerWidth;var height=477.0*width/588.0;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexEmptyViews'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'journeyIndexEmptyImage',style:{width:width,height:height},src:__webpack_require__(948),alt:''}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexEmptyText'},'\\u60A8\\u8FD8\\u6CA1\\u6709\\u884C\\u7A0B\\u8BA1\\u5212'));}}]);return JourneyIndexMineListView;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]);JourneyIndexMineListView.propTypes={// 列表项点击事件\nonItemClick:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.func,// 点击更多\nonMoreButtonClick:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.func,// 点击创建\nonCreateButtonClick:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.func};var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.journey.indexScreen.mineList;return Object.assign({},obj,{userId:__WEBPACK_IMPORTED_MODULE_3__core_utils_SysUtil__[\"a\" /* default */].getUserId(state)});};JourneyIndexMineListView=Object(__WEBPACK_IMPORTED_MODULE_1_react_redux__[\"b\" /* connect */])(mapStateToProps)(JourneyIndexMineListView);/* harmony default export */ __webpack_exports__[\"a\"] = (JourneyIndexMineListView);\n\n/***/ }),\n\n/***/ 946:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/my_journey@2x.33460c8b.png\";\n\n/***/ }),\n\n/***/ 947:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/my_journey_label@2x.61a60e0b.png\";\n\n/***/ }),\n\n/***/ 948:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/journey-empty@2x.1d0ff9ec.png\";\n\n/***/ }),\n\n/***/ 949:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3__core_utils_SysUtil__ = __webpack_require__(15);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var H_MARGIN=10;var JourenyIndexRecommendListView=function(_PureComponent){_inherits(JourenyIndexRecommendListView,_PureComponent);function JourenyIndexRecommendListView(){_classCallCheck(this,JourenyIndexRecommendListView);return _possibleConstructorReturn(this,(JourenyIndexRecommendListView.__proto__||Object.getPrototypeOf(JourenyIndexRecommendListView)).apply(this,arguments));}_createClass(JourenyIndexRecommendListView,[{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexRecommendListView'},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexHeaderRow',onClick:this.props.onMoreButtonClick},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'journeyIndexHeaderIcon',src:__webpack_require__(950),alt:''}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexHeaderTitle'},'\\u63A8\\u8350\\u884C\\u7A0B')),this.renderJourneyListView());}},{key:'renderJourneyListView',value:function renderJourneyListView(){var _this2=this;if(!this.props.dataList||this.props.dataList.length===0){return null;}return this.props.dataList.map(function(item,index){return _this2.renderJourneyItemView(item,index);});}},{key:'renderJourneyItemView',value:function renderJourneyItemView(item,index){var _this3=this;var width=window.innerWidth-2*H_MARGIN;var height=width*0.6;var isLast=index===this.props.dataList.length-1;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:index,className:'journeyIndexRecommendItem',style:isLast?{marginBottom:'0px'}:null,onClick:function onClick(){if(_this3.props.onItemClick){_this3.props.onItemClick(item);}}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{src:item.GetImage.ImageFrontUrl,alt:'',style:{width:width+'px',height:height+'px'}}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexRecommendItemName'},item.TourName),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'journeyIndexRecommendItemDate'},item.DayCount,'\\u5929\\u884C\\u7A0B | \\u51FA\\u53D1\\u65F6\\u95F4\\uFF1A',item.BeginDate));}}]);return JourenyIndexRecommendListView;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"PureComponent\"]);JourenyIndexRecommendListView.propTypes={// 列表项点击事件\nonItemClick:__WEBPACK_IMPORTED_MODULE_2_prop_types___default.a.func};var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.journey.indexScreen.recommendList;return Object.assign({},obj,{userId:__WEBPACK_IMPORTED_MODULE_3__core_utils_SysUtil__[\"a\" /* default */].getUserId(state)});};JourenyIndexRecommendListView=Object(__WEBPACK_IMPORTED_MODULE_1_react_redux__[\"b\" /* connect */])(mapStateToProps)(JourenyIndexRecommendListView);/* harmony default export */ __webpack_exports__[\"a\"] = (JourenyIndexRecommendListView);\n\n/***/ }),\n\n/***/ 950:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/recommend_journey@2x.fc7339d4.png\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/3.45ef835b.chunk.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, ActivityIndicator, PullToRefresh } from 'antd-mobile';\r\nimport ReactDOM from 'react-dom';\r\nimport Content from '../../views/common/Content';\r\nimport { asyncGetMyJourneyListAction, asyncGetRecommendJourneyListAction, goBackAction, setScrollerPositionAction } from '../../store/actions/journey/indexAction';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\nimport UITool from '../../core/utils/UIUtil';\r\nimport JourneyIndexMineListView from '../../views/journey/JourneyIndexMineListView';\r\nimport JourenyIndexRecommendListView from '../../views/journey/JourenyIndexRecommendListView';\r\nimport LeftContentView from '../../views/common/LeftContentView';\r\nimport '../../assets/css/journey.css';\r\n\r\nclass JourneyIndexScreen extends PureComponent\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.showMyJourneyListScreen = this.showMyJourneyListScreen.bind(this);\r\n        this.onCreateButtonClick = this.onCreateButtonClick.bind(this);\r\n        this.onRecommendItemClick = this.onRecommendItemClick.bind(this);\r\n        this.onMineItemClick = this.onMineItemClick.bind(this);\r\n        this.onRefresh = this.onRefresh.bind(this);\r\n        this.state = {\r\n            isPullRefresh: false,\r\n        };\r\n    }\r\n    componentDidMount()\r\n    {\r\n        if(!this.props.mineList.dataList || !this.props.recommendList.dataList || this.props.mineList.isRefresh)\r\n        {\r\n            this.props.dispatch(asyncGetMyJourneyListAction(this.props.userId)).then(()=>{\r\n                return this.props.dispatch(asyncGetRecommendJourneyListAction(this.props.userId));\r\n            });\r\n        }\r\n        this.restoreScrollViewPosition();\r\n    }\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    leftContent={<LeftContentView\r\n                        ref={(view) => { this.LeftContentView = view ? view.getWrappedInstance() : this.scrollView; }}\r\n                        goBackAction={goBackAction}\r\n                        history={this.props.history}\r\n                    />}\r\n                    onLeftClick={() => {\r\n                        this.LeftContentView.goHome();\r\n                    }}>\r\n                    我的行程\r\n                </NavBar>\r\n                <Content ref={(view)=>{this.scrollView = view ? view.getWrappedInstance() : this.scrollView;}}>\r\n                    <PullToRefresh\r\n                        style={{ height: (window.innerHeight - 45) + 'px', overflow: 'auto' }}\r\n                        refreshing={this.state.isPullRefresh}\r\n                        onRefresh={this.onRefresh}\r\n                        ref={(ref)=>UITool.fixListViewHeightIssue(ref, window.innerHeight - 45)}>\r\n                        <JourneyIndexMineListView onMoreButtonClick={this.showMyJourneyListScreen}\r\n                            onCreateButtonClick={this.onCreateButtonClick}\r\n                            onItemClick={this.onMineItemClick}/>\r\n                        <JourenyIndexRecommendListView onItemClick={this.onRecommendItemClick}/>\r\n                        {\r\n                            !this.state.isPullRefresh && (this.props.mineList.isFetching || this.props.recommendList.isFetching)\r\n                                ?\r\n                                <ActivityIndicator \r\n                                    toast\r\n                                    text=\"Loading...\" />\r\n                                :null\r\n                        }\r\n                    </PullToRefresh>\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    onRefresh()\r\n    {\r\n        this.setState({ isPullRefresh: true });\r\n        this.props.dispatch(goBackAction());\r\n        this.props.dispatch(asyncGetMyJourneyListAction(this.props.userId)).then(()=>{\r\n            return this.props.dispatch(asyncGetRecommendJourneyListAction(this.props.userId)).then(()=>{\r\n                this.setState({ isPullRefresh: false });\r\n            });\r\n        });\r\n    }\r\n    showMyJourneyListScreen()\r\n    {\r\n        this.cacheScrollOffset();\r\n        if(!this.props.userId)\r\n        {\r\n            this.props.history.push('/me/login');\r\n        }\r\n        else\r\n        {\r\n            this.props.history.push(`${this.props.match.url}/list`);\r\n        }\r\n    }\r\n    onCreateButtonClick()\r\n    {\r\n        this.cacheScrollOffset();\r\n        if(!this.props.userId)\r\n        {\r\n            this.props.history.push('/me/login');\r\n        }\r\n        else\r\n        {\r\n            this.props.history.push(`${this.props.match.url}/create`);\r\n        }\r\n    }\r\n    onMineItemClick(item)\r\n    {\r\n        this.onItemClick(item, true);\r\n    }\r\n    onRecommendItemClick(item)\r\n    {\r\n        this.onItemClick(item, false);\r\n    }\r\n    onItemClick(item, isMine)\r\n    {\r\n        this.cacheScrollOffset();\r\n        this.props.history.push(`${this.props.match.url}/detail/${item.PlanMainID}`);\r\n    }\r\n    cacheScrollOffset()\r\n    {\r\n        let offsetY = ReactDOM.findDOMNode(this.scrollView).scrollTop;\r\n        this.props.dispatch(setScrollerPositionAction(offsetY));\r\n    }\r\n    restoreScrollViewPosition()\r\n    {\r\n        if(this.scrollView)\r\n        {\r\n            if(!isNaN(this.props.scrollViewOffset))\r\n            {\r\n                this.scrollView.scrollToY(this.props.scrollViewOffset);\r\n            }\r\n            else\r\n            {\r\n                this.scrollView.scrollToY(0);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    let obj = state.journey.indexScreen;\r\n    return {\r\n        userId: SysUtil.getUserId(state),\r\n        ...obj,\r\n    };\r\n};\r\n\r\nJourneyIndexScreen = connect(mapStateToProps)(JourneyIndexScreen);\r\n\r\nexport default JourneyIndexScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/journey/JourneyIndexScreen.js","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function asyncGetMyJourneyListAction(userId)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getMineListRequestAction());\r\n        return _fetchMineList(userId).then((resp)=>{\r\n            dispatch(_getMineListSuccessAction(resp ? resp.results : []));\r\n        }).catch((error)=>{\r\n            dispatch(_getMineListFailureAction(error));\r\n        });\r\n    };\r\n}\r\n\r\nexport function asyncGetRecommendJourneyListAction(userId)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getRecommendListRequestAction());\r\n        return _fetchRecommendList(userId).then((resp)=>{\r\n            dispatch(_getRecommendListSuccessAction(resp ? resp.results : []));\r\n        }).catch((error)=>{\r\n            dispatch(_getRecommendListFailureAction(error));\r\n        });\r\n    };\r\n}\r\n\r\nexport function goBackAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GO_BACK,\r\n    };\r\n}\r\n\r\nexport function setScrollerPositionAction(offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.SET_SCROLL_OFFSET,\r\n        scrollViewOffset: offset\r\n    };\r\n}\r\n\r\nfunction _getMineListRequestAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GET_MINE_LIST_REQUEST,\r\n    };\r\n}\r\n\r\nfunction _getMineListSuccessAction(resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GET_MINE_LIST_SUCCESS,\r\n        dataList: resp,\r\n    };\r\n}\r\n\r\nfunction _getMineListFailureAction(error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GET_MINE_LIST_FAILURE,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchMineList(userId)\r\n{\r\n    let kvDict = {\r\n        pageIndex: 1,\r\n        pageSize: 4,\r\n        userID: userId\r\n    };\r\n    return HttpClient.getFromPortal(IConstant.PortalApis.JOURNEY.GetTourPlanInfo, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getRecommendListRequestAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GET_RECOMMEND_LIST_REQUEST,\r\n    };\r\n}\r\n\r\nfunction _getRecommendListFailureAction(error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GET_RECOMMEND_LIST_FAILURE,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _getRecommendListSuccessAction(resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.GET_RECOMMEND_LIST_SUCCESS,\r\n        dataList: resp,\r\n    };\r\n}\r\n\r\nfunction _fetchRecommendList(userId)\r\n{\r\n    let kvDict = {\r\n        pageIndex: 1,\r\n        pageSize: 10000\r\n    };\r\n    return HttpClient.getFromPortal(IConstant.PortalApis.JOURNEY.GetRecommendTourForHome, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nexport function _setRefreshAction(isRefresh){\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.INDEX.SET_LIST_REFRESH,\r\n        isRefresh\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/journey/indexAction.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\n\r\nconst H_MARGIN = 10;\r\n\r\nclass JourneyIndexMineListView extends PureComponent\r\n{\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                <div className=\"journeyIndexHeaderRow\"\r\n                    onClick={this.props.onMoreButtonClick}>\r\n                    <img className=\"journeyIndexHeaderIcon\" src={require('../../assets/images/journey/my_journey@2x.png')} alt=''/>\r\n                    <div className=\"journeyIndexHeaderTitle\">我的行程</div>\r\n                    <div style={{flex: 1}}/>\r\n                    <div className=\"journeyIndexHeaderMore\">更多</div>\r\n                    <img className=\"journeyIndexHeaderArrow\" src={require('../../assets/images/arrow@2x.png')} alt=''/>\r\n                </div>\r\n                {\r\n                    (this.props.dataList && this.props.dataList.length > 0)\r\n                        ? \r\n                        this.renderJourneyListView()\r\n                        :\r\n                        this.renderEmptyView()\r\n                }\r\n                <div className=\"journeyIndexCreateButtonRow\">\r\n                    <div className=\"journeyIndexCreateButton\" onClick={this.props.onCreateButtonClick}>创建我的行程</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderJourneyListView()\r\n    {\r\n        let rows = Math.ceil(this.props.dataList.length / 2);\r\n        return Array(rows).fill(0).map((item, index)=>this.renderJourneyRowView(index));\r\n    }\r\n    renderJourneyRowView(rowIndex)\r\n    {\r\n        return (\r\n            <div key={rowIndex} \r\n                style={{marginTop: (rowIndex === 0 ? 0 : 15) + 'px'}}\r\n                className=\"joruneyIndexItemRow\">\r\n                {\r\n                    this.renderJourneyItemView(rowIndex * 2)\r\n                }\r\n                {\r\n                    this.renderJourneyItemView(rowIndex * 2 + 1)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    renderJourneyItemView(index)\r\n    {\r\n        if(index >= this.props.dataList.length)\r\n        {\r\n            return null;\r\n        }\r\n        let item = this.props.dataList[index];\r\n        let width = (window.innerWidth - 3 * H_MARGIN) / 2.0;\r\n        return (\r\n            <div className=\"journeyIndexItem\"\r\n                style={{width: (width + 'px'), marginLeft: (H_MARGIN + 'px')}}\r\n                onClick={()=>{\r\n                    if(this.props.onItemClick)\r\n                    {\r\n                        this.props.onItemClick(item);\r\n                    }\r\n                }}>\r\n                <img src={item.GetImage.ImageFrontUrl} \r\n                    alt=''\r\n                    style={{width: (width + 'px'), height: (width * 0.6 + 'px')}}/>\r\n                <div className=\"journeyIndexItemTitle\">{item.TourName}</div>\r\n                <div className=\"journeyIndexItemStartTime\">出发时间：{item.BeginDate}</div>\r\n                <div className=\"journeyIndexItemIcon\">\r\n                    <img src={require('../../assets/images/journey/my_journey_label@2x.png')} alt=''/>\r\n                    <div className=\"journeyIndexItemDay\">{item.DayCount}天</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderEmptyView()\r\n    {\r\n        let width = window.innerWidth;\r\n        let height = 477.0 * width / 588.0;\r\n        return (\r\n            <div className=\"journeyIndexEmptyViews\">\r\n                <img className=\"journeyIndexEmptyImage\" style={{width: width, height: height}} src={require('../../assets/images/journey/journey-empty@2x.png')} alt=''/>\r\n                <div className=\"journeyIndexEmptyText\">您还没有行程计划</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nJourneyIndexMineListView.propTypes = {\r\n    // 列表项点击事件\r\n    onItemClick: PropTypes.func,\r\n    // 点击更多\r\n    onMoreButtonClick: PropTypes.func,\r\n    // 点击创建\r\n    onCreateButtonClick: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    let obj = state.journey.indexScreen.mineList;\r\n    return {\r\n        ...obj,\r\n        userId: SysUtil.getUserId(state),\r\n    };\r\n};\r\n\r\nJourneyIndexMineListView = connect(mapStateToProps)(JourneyIndexMineListView);\r\n\r\nexport default JourneyIndexMineListView;\n\n\n// WEBPACK FOOTER //\n// ./src/views/journey/JourneyIndexMineListView.js","module.exports = __webpack_public_path__ + \"static/media/my_journey@2x.33460c8b.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/my_journey@2x.png\n// module id = 946\n// module chunks = 3","module.exports = __webpack_public_path__ + \"static/media/my_journey_label@2x.61a60e0b.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/my_journey_label@2x.png\n// module id = 947\n// module chunks = 3","module.exports = __webpack_public_path__ + \"static/media/journey-empty@2x.1d0ff9ec.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/journey-empty@2x.png\n// module id = 948\n// module chunks = 3","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\n\r\nconst H_MARGIN = 10;\r\n\r\nclass JourenyIndexRecommendListView extends PureComponent\r\n{\r\n    render()\r\n    {\r\n        return (\r\n            <div className=\"journeyIndexRecommendListView\">\r\n                <div className=\"journeyIndexHeaderRow\"\r\n                    onClick={this.props.onMoreButtonClick}>\r\n                    <img className=\"journeyIndexHeaderIcon\" src={require('../../assets/images/journey/recommend_journey@2x.png')} alt=''/>\r\n                    <div className=\"journeyIndexHeaderTitle\">推荐行程</div>\r\n                </div>\r\n                {\r\n                    this.renderJourneyListView()\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    renderJourneyListView()\r\n    {\r\n        if(!this.props.dataList || this.props.dataList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return this.props.dataList.map((item, index)=>this.renderJourneyItemView(item, index));\r\n    }\r\n    renderJourneyItemView(item, index)\r\n    {\r\n        let width = window.innerWidth - 2 * H_MARGIN;\r\n        let height = width * 0.6;\r\n        let isLast = index === this.props.dataList.length - 1;\r\n        return (\r\n            <div key={index}\r\n                className=\"journeyIndexRecommendItem\"\r\n                style={isLast ? {marginBottom: '0px'} : null}\r\n                onClick={()=>{\r\n                    if(this.props.onItemClick)\r\n                    {\r\n                        this.props.onItemClick(item);\r\n                    }\r\n                }}>\r\n                <img src={item.GetImage.ImageFrontUrl} alt='' style={{width: (width + 'px'), height: (height + 'px')}}/>\r\n                <div className=\"journeyIndexRecommendItemName\">{item.TourName}</div>\r\n                <div className=\"journeyIndexRecommendItemDate\">{item.DayCount}天行程 | 出发时间：{item.BeginDate}</div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nJourenyIndexRecommendListView.propTypes = {\r\n    // 列表项点击事件\r\n    onItemClick: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    let obj = state.journey.indexScreen.recommendList;\r\n    return {\r\n        ...obj,\r\n        userId: SysUtil.getUserId(state),\r\n    };\r\n};\r\n\r\nJourenyIndexRecommendListView = connect(mapStateToProps)(JourenyIndexRecommendListView);\r\n\r\nexport default JourenyIndexRecommendListView;\n\n\n// WEBPACK FOOTER //\n// ./src/views/journey/JourenyIndexRecommendListView.js","module.exports = __webpack_public_path__ + \"static/media/recommend_journey@2x.fc7339d4.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/recommend_journey@2x.png\n// module id = 950\n// module chunks = 3"],"sourceRoot":""}