{"version":3,"sources":["../static/js/2.8d44d069.chunk.js","screens/journey/JourneyListScreen.js","store/actions/journey/listAction.js","views/journey/JourneyListView.js","assets/images/journey/icon_plan_edit_date.png","assets/images/journey/icon_plan_name_modify.png","assets/images/journey/icon_plan_del.png","assets/images/journey/plan-calendar-bg.png","assets/images/journey/trip_actionbar_edit_white.png"],"names":["webpackJsonp","895","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_date_picker_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_date_picker__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_date_picker___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8__views_common_Content__","__WEBPACK_IMPORTED_MODULE_9__views_journey_JourneyListView__","__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_listAction__","__WEBPACK_IMPORTED_MODULE_11__core_utils_HttpClient__","__WEBPACK_IMPORTED_MODULE_13__core_utils_IConstant__","__WEBPACK_IMPORTED_MODULE_14__assets_css_journey_css__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","JourneyListScreen","_PureComponent","this","_this","getPrototypeOf","onItemClick","bind","onModifyTime","journeyEditTapped","state","isEdit","pickerVisible","_this2","listViewHeight","window","innerHeight","a","createElement","mode","className","icon","type","onLeftClick","dispatch","history","goBack","rightContent","dataList","style","display","alignItems","height","onClick","src","alt","isRefresh","ref","listView","getWrappedInstance","visible","Date","date","minDate","maxDate","addDays","onOk","ModifyTime","id","onDismiss","setState","item","push","PlanMainID","_this3","kvDict","planMainID","formatDate","postToPortal","JOURNEY","UpdateTourBegin","then","resp","text","onRefresh","mapStateToProps","ownProps","assign","journey","listScreen","912","asyncGetMyJourneyListAction","userId","pageIndex","getState","_getMineListRequestAction","_fetchMineList","_getMineListSuccessAction","results","catch","error","_getMineListFailureAction","goBackAction","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","MINE","GO_BACK","setScrollerPositionAction","offset","SET_SCROLL_OFFSET","scrollViewOffset","GET_LIST_REQUEST","GET_LIST_SUCCESS","pageSize","GET_LIST_FAILURE","message","userID","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","GetTourPlanInfo","json","asyncDeleteListAction","deleteListAction","Promise","resolve","DELETE","973","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_pull_to_refresh_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_pull_to_refresh__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_pull_to_refresh___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_list_view_style_css__","__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view__","__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view___default","__WEBPACK_IMPORTED_MODULE_8_react__","__WEBPACK_IMPORTED_MODULE_8_react___default","__WEBPACK_IMPORTED_MODULE_9_react_redux__","__WEBPACK_IMPORTED_MODULE_10_prop_types__","__WEBPACK_IMPORTED_MODULE_10_prop_types___default","__WEBPACK_IMPORTED_MODULE_11_react_dom__","__WEBPACK_IMPORTED_MODULE_11_react_dom___default","__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__","__WEBPACK_IMPORTED_MODULE_13__store_actions_journey_listAction__","__WEBPACK_IMPORTED_MODULE_14__core_utils_HttpClient__","__WEBPACK_IMPORTED_MODULE_15__core_utils_IConstant__","__WEBPACK_IMPORTED_MODULE_16__views_common_EmptyView__","JourneyListView","renderRow","renderFooter","loadNextPage","dataSource","DataSource","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","cloneWithRows","loadData","isNaN","listViewOffset","scrollTo","prevProps","prevState","snapshot","backgroundColor","paddingTop","renderListView","isFetching","toast","el","overflow","pullToRefresh","refreshing","onEndReached","scrollRenderAheadDistance","scrollEventThrottle","onEndReachedThreshold","sectionID","rowID","_this4","timeIcon","editIcon","delIcon","dayIcon","cacheScrollOffset","GetImage","SmallImageFrontUrl","TourName","CreateDate","replace","BeginDate","split","PlanProList","map","index","Name","ModifyName","ModifyEdit","backgroundImage","DayCount","hasMore","offsetY","findDOMNode","scrollTop","_this5","name","_this6","prompt","onPress","onChangeName","_this7","title","UpdateTourTitle","_this8","alert","onDelete","_this9","ePlanType","DeleteTourInUserCenter","propTypes","func","getUserId","withRef","974","exports","p","975","976","977","978"],"mappings":"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","file":"static/js/2.8d44d069.chunk.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 895:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_date_picker_style_css__ = __webpack_require__(163);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_date_picker_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_date_picker_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_date_picker__ = __webpack_require__(164);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_date_picker___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_date_picker__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__ = __webpack_require__(19);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__views_journey_JourneyListView__ = __webpack_require__(973);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__store_actions_journey_listAction__ = __webpack_require__(912);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__core_utils_HttpClient__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__core_utils_DateUtil__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__assets_css_journey_css__ = __webpack_require__(115);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__assets_css_journey_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_14__assets_css_journey_css__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var JourneyListScreen=function(_PureComponent){_inherits(JourneyListScreen,_PureComponent);function JourneyListScreen(props){_classCallCheck(this,JourneyListScreen);var _this=_possibleConstructorReturn(this,(JourneyListScreen.__proto__||Object.getPrototypeOf(JourneyListScreen)).call(this,props));_this.onItemClick=_this.onItemClick.bind(_this);_this.onModifyTime=_this.onModifyTime.bind(_this);_this.journeyEditTapped=_this.journeyEditTapped.bind(_this);_this.state={isEdit:false,pickerVisible:false};return _this;}_createClass(JourneyListScreen,[{key:'render',value:function render(){var _this2=this;var listViewHeight=window.innerHeight-45;return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',icon:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default.a,{type:'left'}),onLeftClick:function onLeftClick(){var dispatch=_this2.props.dispatch;_this2.props.history.goBack();dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_journey_listAction__[\"c\" /* goBackAction */])());},rightContent:this.props.dataList&&this.props.dataList.length>0?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{style:{display:'flex',alignItems:'center',height:'100%'}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'journeyListRightEditButton',onClick:function onClick(){return _this2.journeyEditTapped();}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{className:'journeyListRightEditImage',src:__webpack_require__(978),alt:''}))):null},'\\u6211\\u7684\\u884C\\u7A0B'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__views_common_Content__[\"a\" /* default */],null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__views_journey_JourneyListView__[\"a\" /* default */],{onItemClick:this.onItemClick,onModifyTime:this.onModifyTime,journeyEditTapped:this.journeyEditTapped,height:listViewHeight,isRefresh:this.state.isRefresh,isEdit:this.state.isEdit,ref:function ref(listView){if(listView){_this2.listView=listView.getWrappedInstance();}}}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_date_picker___default.a,{mode:'date',visible:this.state.pickerVisible,value:new Date(this.state.date),minDate:new Date(),maxDate:new Date().addDays(3),onOk:function onOk(date){return _this2.ModifyTime(_this2.state.id,date);},onDismiss:function onDismiss(){return _this2.setState({pickerVisible:!_this2.state.pickerVisible});}})));}},{key:'onItemClick',value:function onItemClick(item){this.props.history.push('/journey/detail/'+item.PlanMainID);}},{key:'onModifyTime',value:function onModifyTime(id,date){this.setState({pickerVisible:!this.state.pickerVisible,date:date,id:id});}},{key:'ModifyTime',value:function ModifyTime(id,date){var _this3=this;var kvDict={planMainID:id,date:date.formatDate('YYYY-MM-DD')};__WEBPACK_IMPORTED_MODULE_11__core_utils_HttpClient__[\"a\" /* default */].postToPortal(__WEBPACK_IMPORTED_MODULE_13__core_utils_IConstant__[\"q\" /* PortalApis */].JOURNEY.UpdateTourBegin,kvDict,null,true).then(function(resp){return resp.text();}).then(function(resp){if(resp){_this3.setState({pickerVisible:!_this3.state.pickerVisible,isEdit:!_this3.state.isEdit});_this3.listView.onRefresh();}});}},{key:'journeyEditTapped',value:function journeyEditTapped(){this.setState({isEdit:!this.state.isEdit});}}]);return JourneyListScreen;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"PureComponent\"]);var mapStateToProps=function mapStateToProps(state,ownProps){return Object.assign({},state.journey.listScreen.dataList,{dataList:state.journey.listScreen.dataList});};JourneyListScreen=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps)(JourneyListScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (JourneyListScreen);\n\n/***/ }),\n\n/***/ 912:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetMyJourneyListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = setScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncDeleteListAction;\n/* unused harmony export deleteListAction */\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction asyncGetMyJourneyListAction(userId,pageIndex){return function(dispatch,getState){dispatch(_getMineListRequestAction(pageIndex));return _fetchMineList(userId,pageIndex).then(function(resp){dispatch(_getMineListSuccessAction(resp?resp.results:[],pageIndex));}).catch(function(error){dispatch(_getMineListFailureAction(error));});};}function goBackAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.MINE.GO_BACK};}function setScrollerPositionAction(offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.MINE.SET_SCROLL_OFFSET,scrollViewOffset:offset};}function _getMineListRequestAction(pageIndex){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.MINE.GET_LIST_REQUEST,pageIndex:pageIndex};}function _getMineListSuccessAction(resp,pageIndex){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.MINE.GET_LIST_SUCCESS,pageIndex:pageIndex,pageSize:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"o\" /* PAGE_SIZE */],resp:resp};}function _getMineListFailureAction(error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.MINE.GET_LIST_FAILURE,message:error};}function _fetchMineList(userId,pageIndex){var kvDict={pageIndex:pageIndex,pageSize:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"o\" /* PAGE_SIZE */],userID:userId};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortal(__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].JOURNEY.GetTourPlanInfo,kvDict,null,true).then(function(resp){return resp.json();});}function asyncDeleteListAction(){return function(dispatch,getState){dispatch(deleteListAction());return new Promise(function(resolve){resolve();});};}function deleteListAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].JOURNEY.MINE.DELETE};}\n\n/***/ }),\n\n/***/ 973:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_modal_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_pull_to_refresh_style_css__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_pull_to_refresh_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_pull_to_refresh_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_pull_to_refresh__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_pull_to_refresh___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_pull_to_refresh__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_list_view_style_css__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_list_view_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_list_view_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_prop_types__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__store_actions_journey_listAction__ = __webpack_require__(912);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__core_utils_HttpClient__ = __webpack_require__(8);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__views_common_EmptyView__ = __webpack_require__(32);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var JourneyListView=function(_PureComponent){_inherits(JourneyListView,_PureComponent);function JourneyListView(props){_classCallCheck(this,JourneyListView);var _this=_possibleConstructorReturn(this,(JourneyListView.__proto__||Object.getPrototypeOf(JourneyListView)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);_this.onRefresh=_this.onRefresh.bind(_this);_this.renderFooter=_this.renderFooter.bind(_this);_this.loadNextPage=_this.loadNextPage.bind(_this);var dataSource=new __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view___default.a.DataSource({rowHasChanged:function rowHasChanged(row1,row2){return row1!==row2;},sectionHeaderHasChanged:function sectionHeaderHasChanged(s1,s2){return s1!==s2;}});_this.state={dataSource:dataSource.cloneWithRows(_this.props.dataList?_this.props.dataList:[])};return _this;}_createClass(JourneyListView,[{key:'componentDidMount',value:function componentDidMount(){// 处理返回\nif(!this.props.dataList){this.loadData();}if(this.listView&&!isNaN(this.props.listViewOffset)){this.listView.scrollTo(0,this.props.listViewOffset);}}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.dataList!==prevProps.dataList){this.setState({dataSource:this.state.dataSource.cloneWithRows(this.props.dataList?this.props.dataList:[])});}}},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListBox',style:{height:this.props.height,backgroundColor:'#efeff4',paddingTop:5}},this.renderListView(),!this.props.isFetching&&(!this.props.dataList||this.props.dataList.length===0)?__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_16__views_common_EmptyView__[\"a\" /* default */],{style:{height:this.props.height},onClick:function onClick(){return _this2.onRefresh();}}):null,this.props.isFetching&&this.props.pageIndex===1?__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null);}},{key:'renderListView',value:function renderListView(){var _this3=this;if(this.props.dataList&&this.props.dataList.length>0){return __WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_list_view___default.a,{ref:function ref(el){return _this3.listView=el;},dataSource:this.state.dataSource,renderRow:this.renderRow,style:{height:this.props.height,overflow:'auto'},pullToRefresh:__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_pull_to_refresh___default.a,{refreshing:this.props.isFetching,onRefresh:this.onRefresh}),onEndReached:this.loadNextPage,renderFooter:this.renderFooter,pageSize:20,scrollRenderAheadDistance:500,scrollEventThrottle:50,onEndReachedThreshold:20});}else{return null;}}},{key:'renderRow',value:function renderRow(item,sectionID,rowID){var _this4=this;var timeIcon=__webpack_require__(974);var editIcon=__webpack_require__(975);var delIcon=__webpack_require__(976);var dayIcon=__webpack_require__(977);return __WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemBg'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItem'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{onClick:function onClick(){if(_this4.props.onItemClick){_this4.cacheScrollOffset();_this4.props.onItemClick(item);}}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemTop'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('img',{src:item.GetImage.SmallImageFrontUrl,alt:'',className:'journeyListItemImg'}),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemContent'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemTitle'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemName'},item.TourName)),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemNumber'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemName'},'\\u7F16\\u53F7:',item.CreateDate.replace(/-/g,'').replace(/:/g,'').replace(' ',''))),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemTime'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('img',{src:timeIcon,alt:'',className:'journeyListItemTimeIcon'}),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemTimeText'},'\\u51FA\\u53D1\\u65F6\\u95F4\\uFF1A',item.BeginDate?item.BeginDate.split(' ')[0]:'')))),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemBottom'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('ul',{className:'journeyListItemRoute'},item.PlanProList.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('li',{key:index},item.Name);})))),this.props.isEdit?__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemEdit'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemEditTime',onClick:function onClick(){return _this4.props.onModifyTime(item.PlanMainID,item.BeginDate);}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('img',{src:timeIcon,alt:'',className:'journeyListItemEditIcon'}),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('span',{className:'journeyListItemEditText'},'\\u51FA\\u53D1\\u65E5\\u671F')),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemEditName',onClick:function onClick(){return _this4.ModifyName(item.PlanMainID,item.TourName);}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('img',{src:editIcon,alt:'',className:'journeyListItemEditIcon'}),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('span',{className:'journeyListItemEditText'},'\\u884C\\u7A0B\\u540D\\u79F0')),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemEditDel',onClick:function onClick(){return _this4.ModifyEdit(item.PlanMainID);}},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('img',{src:delIcon,alt:'',className:'journeyListItemEditIcon'}),__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('span',{className:'journeyListItemEditText'},'\\u5220\\u9664'))):null,__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'journeyListItemDay',style:{backgroundImage:'url('+dayIcon+')'}},item.DayCount,'\\u5929')));}},{key:'renderFooter',value:function renderFooter(){if(!this.props.isFetching||this.props.hasMore!==true){return null;}return __WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement('div',{className:'loadingMore'},__WEBPACK_IMPORTED_MODULE_8_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_activity_indicator___default.a,{text:'Loading...'}));}},{key:'loadData',value:function loadData(){if(this.props.isFetching){return;}if(this.props.hasMore===false){return;}var pageIndex=this.props.pageIndex?this.props.pageIndex+1:1;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_journey_listAction__[\"b\" /* asyncGetMyJourneyListAction */])(this.props.userId,pageIndex));}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){var offsetY=__WEBPACK_IMPORTED_MODULE_11_react_dom___default.a.findDOMNode(this.listView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_journey_listAction__[\"d\" /* setScrollerPositionAction */])(offsetY));}},{key:'onRefresh',value:function onRefresh(){var _this5=this;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_journey_listAction__[\"a\" /* asyncDeleteListAction */])()).then(function(){_this5.loadData();});}},{key:'loadNextPage',value:function loadNextPage(){this.loadData();}},{key:'ModifyName',value:function ModifyName(id,name){var _this6=this;__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default.a.prompt('修改行程名称','给你的行程起个响亮的名字',[{text:'取消'},{text:'确认',onPress:function onPress(value){return _this6.onChangeName(id,value);}}],'plain-text',name);}},{key:'onChangeName',value:function onChangeName(id,name){var _this7=this;var kvDict={planMainID:id,title:name};__WEBPACK_IMPORTED_MODULE_14__core_utils_HttpClient__[\"a\" /* default */].postToPortal(__WEBPACK_IMPORTED_MODULE_15__core_utils_IConstant__[\"q\" /* PortalApis */].JOURNEY.UpdateTourTitle,kvDict,null,true).then(function(resp){return resp.json();}).then(function(resp){if(resp){_this7.props.journeyEditTapped();_this7.onRefresh();}});}},{key:'ModifyEdit',value:function ModifyEdit(id){var _this8=this;__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_modal___default.a.alert('提示','确认删除行程?',[{text:'取消',style:'default'},{text:'确认',style:'default',onPress:function onPress(){return _this8.onDelete(id);}}]);}},{key:'onDelete',value:function onDelete(id){var _this9=this;var kvDict={planMainID:id,ePlanType:0};__WEBPACK_IMPORTED_MODULE_14__core_utils_HttpClient__[\"a\" /* default */].postToPortal(__WEBPACK_IMPORTED_MODULE_15__core_utils_IConstant__[\"q\" /* PortalApis */].JOURNEY.DeleteTourInUserCenter,kvDict,null,true).then(function(resp){return resp.text();}).then(function(resp){if(resp){_this9.props.journeyEditTapped();_this9.onRefresh();}});}}]);return JourneyListView;}(__WEBPACK_IMPORTED_MODULE_8_react__[\"PureComponent\"]);JourneyListView.propTypes={// 列表项点击事件\nonItemClick:__WEBPACK_IMPORTED_MODULE_10_prop_types___default.a.func,onModifyTime:__WEBPACK_IMPORTED_MODULE_10_prop_types___default.a.func,journeyEditTapped:__WEBPACK_IMPORTED_MODULE_10_prop_types___default.a.func};var mapStateToProps=function mapStateToProps(state){return Object.assign({userId:__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__[\"a\" /* default */].getUserId(state)},state.journey.listScreen);};JourneyListView=Object(__WEBPACK_IMPORTED_MODULE_9_react_redux__[\"b\" /* connect */])(mapStateToProps,null,null,{withRef:true})(JourneyListView);/* harmony default export */ __webpack_exports__[\"a\"] = (JourneyListView);\n\n/***/ }),\n\n/***/ 974:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/icon_plan_edit_date.5e0785dc.png\";\n\n/***/ }),\n\n/***/ 975:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/icon_plan_name_modify.f9f33922.png\";\n\n/***/ }),\n\n/***/ 976:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/icon_plan_del.4735d5a4.png\";\n\n/***/ }),\n\n/***/ 977:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/plan-calendar-bg.e8674877.png\";\n\n/***/ }),\n\n/***/ 978:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/trip_actionbar_edit_white.c90cf84e.png\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.8d44d069.chunk.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, Icon} from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport JourneyListView from '../../views/journey/JourneyListView';\r\nimport { DatePicker } from 'antd-mobile';\r\nimport {goBackAction} from '../../store/actions/journey/listAction';\r\nimport HttpClient from '../../core/utils/HttpClient';\r\nimport '../../core/utils/DateUtil';\r\nimport * as IConstant from '../../core/utils/IConstant';\r\n\r\nimport '../../assets/css/journey.css';\r\n\r\nclass JourneyListScreen extends PureComponent\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.onModifyTime=this.onModifyTime.bind(this);\r\n        this.journeyEditTapped=this.journeyEditTapped.bind(this);\r\n        this.state={\r\n            isEdit:false,\r\n            pickerVisible:false,\r\n        };\r\n    }\r\n\r\n    render()\r\n    {\r\n        let listViewHeight = window.innerHeight - 45;\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    icon={<Icon type=\"left\" />}\r\n                    onLeftClick={() => {\r\n                        let dispatch = this.props.dispatch;\r\n                        this.props.history.goBack();\r\n                        dispatch(goBackAction());\r\n                    }}\r\n                    rightContent={\r\n                        this.props.dataList && this.props.dataList.length > 0 ?\r\n                            <div style={{display:'flex',alignItems:'center',height:'100%'}}>\r\n                                <div className=\"journeyListRightEditButton\" onClick={() => this.journeyEditTapped()}>\r\n                                    <img className=\"journeyListRightEditImage\" src={require('../../assets/images/journey/trip_actionbar_edit_white.png')} alt='' />\r\n                                </div>\r\n                            </div>\r\n                            : null\r\n                    }>\r\n                    我的行程\r\n                </NavBar>\r\n                <Content>\r\n                    <JourneyListView\r\n                        onItemClick={this.onItemClick}\r\n                        onModifyTime={this.onModifyTime}\r\n                        journeyEditTapped={this.journeyEditTapped}\r\n                        height={listViewHeight}\r\n                        isRefresh={this.state.isRefresh}\r\n                        isEdit={this.state.isEdit}\r\n                        ref={(listView) => {\r\n                            if (listView) {\r\n                                this.listView = listView.getWrappedInstance();\r\n                            }\r\n                        }} />\r\n                    <DatePicker\r\n                        mode=\"date\"\r\n                        visible={this.state.pickerVisible}\r\n                        value={new Date(this.state.date)}\r\n                        minDate={new Date()}\r\n                        maxDate={new Date().addDays(3)}\r\n                        onOk={(date) => this.ModifyTime(this.state.id, date)}\r\n                        onDismiss={() => this.setState({ pickerVisible: !this.state.pickerVisible })}\r\n                    />\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    onItemClick(item){\r\n        this.props.history.push(`/journey/detail/${item.PlanMainID}`);\r\n    }\r\n    onModifyTime(id, date) {\r\n        this.setState({\r\n            pickerVisible: !this.state.pickerVisible,\r\n            date: date,\r\n            id: id\r\n        });\r\n    }\r\n    ModifyTime(id, date) {\r\n        let kvDict = {\r\n            planMainID: id,\r\n            date: date.formatDate('YYYY-MM-DD')\r\n        };\r\n        HttpClient.postToPortal(IConstant.PortalApis.JOURNEY.UpdateTourBegin, kvDict, null, true)\r\n            .then((resp) => resp.text()).then((resp) => {\r\n                if (resp) {\r\n                    this.setState({\r\n                        pickerVisible: !this.state.pickerVisible,\r\n                        isEdit: !this.state.isEdit\r\n                    });\r\n                    this.listView.onRefresh();\r\n                }\r\n            });\r\n    }\r\n    journeyEditTapped(){\r\n        this.setState({\r\n            isEdit:!this.state.isEdit\r\n        });\r\n    }\r\n    \r\n}\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    \r\n    return {\r\n        ...state.journey.listScreen.dataList,\r\n        dataList: state.journey.listScreen.dataList\r\n    };\r\n};\r\n\r\nJourneyListScreen = connect(mapStateToProps)(JourneyListScreen);\r\n\r\nexport default JourneyListScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/journey/JourneyListScreen.js","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function asyncGetMyJourneyListAction(userId,pageIndex)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getMineListRequestAction(pageIndex));\r\n        return _fetchMineList(userId,pageIndex).then((resp)=>{\r\n            dispatch(_getMineListSuccessAction(resp ? resp.results : [],pageIndex));\r\n        }).catch((error)=>{\r\n            dispatch(_getMineListFailureAction(error));\r\n        });\r\n    };\r\n}\r\n\r\nexport function goBackAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.MINE.GO_BACK,\r\n    };\r\n}\r\n\r\nexport function setScrollerPositionAction(offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.MINE.SET_SCROLL_OFFSET,\r\n        scrollViewOffset: offset\r\n    };\r\n}\r\n\r\nfunction _getMineListRequestAction(pageIndex)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.MINE.GET_LIST_REQUEST,\r\n        pageIndex\r\n    };\r\n}\r\n\r\nfunction _getMineListSuccessAction(resp,pageIndex)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.MINE.GET_LIST_SUCCESS,\r\n        pageIndex,\r\n        pageSize:IConstant.PAGE_SIZE,\r\n        resp,\r\n    };\r\n}\r\n\r\nfunction _getMineListFailureAction(error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.MINE.GET_LIST_FAILURE,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchMineList(userId,pageIndex)\r\n{\r\n    let kvDict = {\r\n        pageIndex: pageIndex,\r\n        pageSize: IConstant.PAGE_SIZE,\r\n        userID: userId,\r\n    };\r\n    return HttpClient.postToPortal(IConstant.PortalApis.JOURNEY.GetTourPlanInfo, kvDict,null,true)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nexport function asyncDeleteListAction() {\r\n    return function (dispatch, getState) {\r\n        dispatch(deleteListAction());\r\n        return new Promise((resolve) => {\r\n            resolve();\r\n        });\r\n    };\r\n}\r\n\r\nexport function deleteListAction() {\r\n    return {\r\n        type: IConstant.Actions.JOURNEY.MINE.DELETE,\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/journey/listAction.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport ReactDOM from 'react-dom';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\nimport { ListView, PullToRefresh, ActivityIndicator, Modal } from 'antd-mobile';\r\nimport { asyncGetMyJourneyListAction, setScrollerPositionAction, asyncDeleteListAction } from '../../store/actions/journey/listAction';\r\nimport HttpClient from '../../core/utils/HttpClient';\r\nimport * as IConstant from '../../core/utils/IConstant';\r\nimport EmptyView from '../../views/common/EmptyView';\r\n\r\nclass JourneyListView extends PureComponent {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.renderRow = this.renderRow.bind(this);\r\n        this.onRefresh = this.onRefresh.bind(this);\r\n        this.renderFooter = this.renderFooter.bind(this);\r\n        this.loadNextPage = this.loadNextPage.bind(this);\r\n        const dataSource = new ListView.DataSource({\r\n            rowHasChanged: (row1, row2) => row1 !== row2,\r\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\r\n        });\r\n\r\n        this.state = {\r\n            dataSource: dataSource.cloneWithRows(this.props.dataList ? this.props.dataList : []),\r\n        };\r\n    }\r\n    componentDidMount() {\r\n        // 处理返回\r\n        if (!this.props.dataList) {\r\n            this.loadData();\r\n        }\r\n        if (this.listView && !isNaN(this.props.listViewOffset)) {\r\n            this.listView.scrollTo(0, this.props.listViewOffset);\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot)\r\n    {\r\n        if (this.props.dataList !== prevProps.dataList)\r\n        {\r\n            this.setState({ dataSource: this.state.dataSource.cloneWithRows(this.props.dataList ? this.props.dataList : []) });\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <div className='journeyListBox' style={{ height: this.props.height, backgroundColor: '#efeff4', paddingTop: 5 }}>\r\n                {\r\n                    this.renderListView()\r\n                }\r\n                {\r\n                    !this.props.isFetching && (!this.props.dataList || this.props.dataList.length === 0)\r\n                        ?\r\n                        <EmptyView style={{height: this.props.height}} onClick={()=>this.onRefresh()}/>\r\n                        : null\r\n                }\r\n                {\r\n                    (this.props.isFetching && this.props.pageIndex === 1)\r\n                        ?\r\n                        <ActivityIndicator\r\n                            toast\r\n                            text='Loading...' />\r\n                        : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    renderListView() {\r\n        if (this.props.dataList && this.props.dataList.length > 0) {\r\n            return (\r\n                <ListView\r\n                    ref={el => this.listView = el}\r\n                    dataSource={this.state.dataSource}\r\n                    renderRow={this.renderRow}\r\n                    style={{\r\n                        height: this.props.height,\r\n                        overflow: 'auto',\r\n                    }}\r\n                    pullToRefresh={<PullToRefresh\r\n                        refreshing={this.props.isFetching}\r\n                        onRefresh={this.onRefresh}\r\n                    />}\r\n                    onEndReached={this.loadNextPage}\r\n                    renderFooter={this.renderFooter}\r\n                    pageSize={20}\r\n                    scrollRenderAheadDistance={500}\r\n                    scrollEventThrottle={50}\r\n                    onEndReachedThreshold={20} />\r\n            );\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n    renderRow(item, sectionID, rowID) {\r\n        let timeIcon = require('../../assets/images/journey/icon_plan_edit_date.png');\r\n        let editIcon = require('../../assets/images/journey/icon_plan_name_modify.png');\r\n        let delIcon = require('../../assets/images/journey/icon_plan_del.png');\r\n        let dayIcon = require('../../assets/images/journey/plan-calendar-bg.png');\r\n\r\n        return (\r\n            <div className='journeyListItemBg'>\r\n                <div className='journeyListItem'>\r\n                    <div\r\n                        onClick={() => {\r\n                            if (this.props.onItemClick) {\r\n                                this.cacheScrollOffset();\r\n                                this.props.onItemClick(item);\r\n                            }\r\n                        }}>\r\n                        <div className='journeyListItemTop'>\r\n                            <img src={item.GetImage.SmallImageFrontUrl} alt='' className='journeyListItemImg' />\r\n                            <div className='journeyListItemContent'>\r\n                                <div className='journeyListItemTitle'>\r\n                                    <div className='journeyListItemName'>\r\n                                        {item.TourName}\r\n                                    </div>\r\n                                    {/* <div className='journeyListItemCode'>\r\n                                        {item.DayCount}\r\n                                    </div> */}\r\n                                </div>\r\n                                <div className='journeyListItemNumber'>\r\n                                    <div className='journeyListItemName'>\r\n                                        编号:{item.CreateDate.replace(/-/g ,'').replace(/:/g ,'').replace(' ','')}\r\n                                    </div>\r\n                                </div>\r\n                                <div className='journeyListItemTime'>\r\n                                    <img src={timeIcon} alt='' className='journeyListItemTimeIcon' />\r\n                                    <div className='journeyListItemTimeText'>\r\n                                        出发时间：{item.BeginDate ? item.BeginDate.split(' ')[0] : ''}\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className='journeyListItemBottom'>\r\n                            <ul className='journeyListItemRoute'>\r\n                                {\r\n                                    item.PlanProList.map((item, index) =>\r\n                                        <li key={index}>{item.Name}</li>\r\n                                    )\r\n                                }\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                    {\r\n                        this.props.isEdit\r\n                            ?\r\n                            <div className='journeyListItemEdit' >\r\n                                <div className='journeyListItemEditTime' onClick={() => this.props.onModifyTime(item.PlanMainID, item.BeginDate)}>\r\n                                    <img src={timeIcon} alt='' className='journeyListItemEditIcon' />\r\n                                    <span className='journeyListItemEditText'>出发日期</span>\r\n                                </div>\r\n                                <div className='journeyListItemEditName' onClick={() => this.ModifyName(item.PlanMainID, item.TourName)}>\r\n                                    <img src={editIcon} alt='' className='journeyListItemEditIcon' />\r\n                                    <span className='journeyListItemEditText'>行程名称</span>\r\n                                </div>\r\n                                <div className='journeyListItemEditDel' onClick={() => this.ModifyEdit(item.PlanMainID)}>\r\n                                    <img src={delIcon} alt='' className='journeyListItemEditIcon' />\r\n                                    <span className='journeyListItemEditText'>删除</span>\r\n                                </div>\r\n                            </div>\r\n                            :\r\n                            null\r\n                    }\r\n                    <div className='journeyListItemDay' style={{ backgroundImage: `url(${dayIcon})` }}>\r\n                        {item.DayCount}天\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderFooter() {\r\n        if (!this.props.isFetching || this.props.hasMore !== true) {\r\n            return null;\r\n        }\r\n        return (\r\n            <div className=\"loadingMore\">\r\n                <ActivityIndicator\r\n                    text=\"Loading...\"\r\n                />\r\n            </div>\r\n        );\r\n    }\r\n    loadData() {\r\n        if (this.props.isFetching) {\r\n            return;\r\n        }\r\n        if (this.props.hasMore === false) {\r\n            return;\r\n        }\r\n        let pageIndex = this.props.pageIndex ? (this.props.pageIndex + 1) : 1;\r\n        this.props.dispatch(asyncGetMyJourneyListAction(this.props.userId, pageIndex));\r\n    }\r\n    cacheScrollOffset() {\r\n        let offsetY = ReactDOM.findDOMNode(this.listView).scrollTop;\r\n        this.props.dispatch(setScrollerPositionAction(offsetY));\r\n    }\r\n    onRefresh() {\r\n        this.props.dispatch(asyncDeleteListAction()).then(() => {\r\n            this.loadData();\r\n        });\r\n    }\r\n    loadNextPage() {\r\n        this.loadData();\r\n    }\r\n    ModifyName(id, name) {\r\n        Modal.prompt('修改行程名称', '给你的行程起个响亮的名字', [\r\n            { text: '取消' },\r\n            { text: '确认', onPress: value => this.onChangeName(id, value) },\r\n        ], 'plain-text', name);\r\n    }\r\n    onChangeName(id, name) {\r\n        let kvDict = {\r\n            planMainID: id,\r\n            title: name\r\n        };\r\n        HttpClient.postToPortal(IConstant.PortalApis.JOURNEY.UpdateTourTitle, kvDict, null, true)\r\n            .then((resp) => resp.json()).then((resp) => {\r\n                if (resp) {\r\n                    this.props.journeyEditTapped();\r\n                    this.onRefresh();\r\n                }\r\n            });\r\n    }\r\n    ModifyEdit(id) {\r\n        Modal.alert('提示', '确认删除行程?', [\r\n            { text: '取消', style: 'default'},\r\n            { text: '确认', style: 'default', onPress: () => this.onDelete(id) },\r\n        ]);\r\n    }\r\n    onDelete(id){\r\n        let kvDict = {\r\n            planMainID: id,\r\n            ePlanType: 0\r\n        };\r\n        HttpClient.postToPortal(IConstant.PortalApis.JOURNEY.DeleteTourInUserCenter, kvDict, null, true)\r\n            .then((resp) => resp.text()).then((resp) => {\r\n                if (resp) {\r\n                    this.props.journeyEditTapped();\r\n                    this.onRefresh();\r\n                }\r\n            });\r\n    }\r\n}\r\n\r\nJourneyListView.propTypes = {\r\n    // 列表项点击事件\r\n    onItemClick: PropTypes.func,\r\n    onModifyTime: PropTypes.func,\r\n    journeyEditTapped: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = function (state) {\r\n    return {\r\n        userId: SysUtil.getUserId(state),\r\n        ...state.journey.listScreen\r\n    };\r\n};\r\n\r\nJourneyListView = connect(mapStateToProps, null, null, { withRef: true })(JourneyListView);\r\n\r\nexport default JourneyListView;\n\n\n// WEBPACK FOOTER //\n// ./src/views/journey/JourneyListView.js","module.exports = __webpack_public_path__ + \"static/media/icon_plan_edit_date.5e0785dc.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/icon_plan_edit_date.png\n// module id = 974\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/media/icon_plan_name_modify.f9f33922.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/icon_plan_name_modify.png\n// module id = 975\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/media/icon_plan_del.4735d5a4.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/icon_plan_del.png\n// module id = 976\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/media/plan-calendar-bg.e8674877.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/plan-calendar-bg.png\n// module id = 977\n// module chunks = 2","module.exports = __webpack_public_path__ + \"static/media/trip_actionbar_edit_white.c90cf84e.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/journey/trip_actionbar_edit_white.png\n// module id = 978\n// module chunks = 2"],"sourceRoot":""}