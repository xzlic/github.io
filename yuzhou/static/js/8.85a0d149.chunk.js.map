{"version":3,"sources":["../static/js/8.85a0d149.chunk.js","screens/scenic/ScenicRecommendListScreen.js","assets/images/scenic/ico_a_full@2x.png","assets/images/scenic/ico_a_empty@2x.png","store/actions/scenic/recommendListAction.js","views/scenic/ScenicRecommendListView.js"],"names":["webpackJsonp","883","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control___default","__WEBPACK_IMPORTED_MODULE_4_react__","__WEBPACK_IMPORTED_MODULE_4_react___default","__WEBPACK_IMPORTED_MODULE_5_react_redux__","__WEBPACK_IMPORTED_MODULE_6__views_common_Content__","__WEBPACK_IMPORTED_MODULE_7__views_scenic_ScenicRecommendListView__","__WEBPACK_IMPORTED_MODULE_8__store_actions_scenic_recommendListAction__","__WEBPACK_IMPORTED_MODULE_9__assets_css_scenic_css__","__WEBPACK_IMPORTED_MODULE_10__views_common_LeftContentView__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","ScenicRecommendListScreen","_PureComponent","this","_this","getPrototypeOf","onItemClick","bind","showCommonList","_this2","listViewHeight","window","innerHeight","a","createElement","mode","className","leftContent","ref","view","LeftContentView","getWrappedInstance","scrollView","goBackAction","history","onLeftClick","goHome","values","tintColor","selectedIndex","onValueChange","listView","height","item","GetRelation","Code","cacheScrollOffset","push","898","exports","p","899","909","asyncGetListAction","dispatch","getState","_getListRequestAction","_fetchList","then","resp","dataList","results","_getListSuccessAction","catch","error","_getListFailureAction","type","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","SCENIC","RECOMMEND_LIST","GO_BACK","asyncDeleteListAction","deleteListAction","Promise","resolve","DELETE","setScrollerPositionAction","offset","SET_LISTVIEW_OFFSET","listViewOffset","orderFiled","orderType","pageIndex","searchKey","kvDict","ModuleEnName","CatalogIdentifier","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","getFromPortal","ELEMENTS","AttractionsRecommendList","json","GET_LIST_REQUEST","GET_LIST_SUCCESS","GET_LIST_FAILURE","message","930","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8_prop_types__","__WEBPACK_IMPORTED_MODULE_8_prop_types___default","__WEBPACK_IMPORTED_MODULE_9_react_dom__","__WEBPACK_IMPORTED_MODULE_9_react_dom___default","__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__","__WEBPACK_IMPORTED_MODULE_11__core_utils_UIUtil__","__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__","ScenicRecommendListView","renderRow","onRefresh","dataSource","DataSource","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","state","cloneWithRows","loadData","isNaN","scrollTo","prevProps","prevState","snapshot","setState","style","renderListView","isFetching","toast","text","separator","sectionID","rowID","backgroundColor","el","fixListViewHeightIssue","renderSeparator","overflow","pullToRefresh","refreshing","initialListSize","pageSize","scrollRenderAheadDistance","scrollEventThrottle","onEndReachedThreshold","str","_this3","_this4","star","getScenicStarCount","AttractionsStar","starImg","starEmptyImg","imageUrl","GetImage","MiddleImageFrontUrl","indexOf","onClick","backgroundImage","Head","Array","fill","map","index","src","alt","offsetY","findDOMNode","scrollTop","propTypes","func","mapStateToProps","assign","scenic","recommendListScreen","withRef"],"mappings":"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","file":"static/js/8.85a0d149.chunk.js","sourcesContent":["webpackJsonp([8],{\n\n/***/ 883:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css__ = __webpack_require__(44);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control__ = __webpack_require__(45);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7__views_scenic_ScenicRecommendListView__ = __webpack_require__(930);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__store_actions_scenic_recommendListAction__ = __webpack_require__(909);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__assets_css_scenic_css__ = __webpack_require__(288);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__assets_css_scenic_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9__assets_css_scenic_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__views_common_LeftContentView__ = __webpack_require__(23);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ScenicRecommendListScreen=function(_PureComponent){_inherits(ScenicRecommendListScreen,_PureComponent);function ScenicRecommendListScreen(props){_classCallCheck(this,ScenicRecommendListScreen);var _this=_possibleConstructorReturn(this,(ScenicRecommendListScreen.__proto__||Object.getPrototypeOf(ScenicRecommendListScreen)).call(this,props));_this.onItemClick=_this.onItemClick.bind(_this);_this.showCommonList=_this.showCommonList.bind(_this);return _this;}_createClass(ScenicRecommendListScreen,[{key:'render',value:function render(){var _this2=this;var listViewHeight=window.innerHeight-45;return __WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',leftContent:__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__views_common_LeftContentView__[\"a\" /* default */],{ref:function ref(view){_this2.LeftContentView=view?view.getWrappedInstance():_this2.scrollView;},goBackAction:__WEBPACK_IMPORTED_MODULE_8__store_actions_scenic_recommendListAction__[\"c\" /* goBackAction */],history:this.props.history}),onLeftClick:function onLeftClick(){_this2.LeftContentView.goHome();}},__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control___default.a,{values:['非游不可','全部景区'],tintColor:'white',selectedIndex:0,onValueChange:this.showCommonList})),__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_6__views_common_Content__[\"a\" /* default */],null,__WEBPACK_IMPORTED_MODULE_4_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7__views_scenic_ScenicRecommendListView__[\"a\" /* default */],{ref:function ref(listView){if(listView){_this2.listView=listView.getWrappedInstance();}},onItemClick:this.onItemClick,height:listViewHeight})));}},{key:'onItemClick',value:function onItemClick(item){if(!item||!item.GetRelation||!item.GetRelation.Code){return;}if(this.listView){this.listView.cacheScrollOffset();}this.props.history.push('/scenic/detail/'+item.GetRelation.Code);}},{key:'showCommonList',value:function showCommonList(){if(this.listView){this.listView.cacheScrollOffset();}this.props.history.push('/scenic/list?segment=true');}}]);return ScenicRecommendListScreen;}(__WEBPACK_IMPORTED_MODULE_4_react__[\"PureComponent\"]);ScenicRecommendListScreen=Object(__WEBPACK_IMPORTED_MODULE_5_react_redux__[\"b\" /* connect */])()(ScenicRecommendListScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (ScenicRecommendListScreen);\n\n/***/ }),\n\n/***/ 898:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_a_full@2x.a5d6eea0.png\";\n\n/***/ }),\n\n/***/ 899:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_a_empty@2x.f866e867.png\";\n\n/***/ }),\n\n/***/ 909:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncDeleteListAction;\n/* unused harmony export deleteListAction */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = setScrollerPositionAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction asyncGetListAction(){return function(dispatch,getState){dispatch(_getListRequestAction());return _fetchList().then(function(resp){var dataList=resp&&resp.results&&resp.results.length>0?resp.results:[];dispatch(_getListSuccessAction(dataList));}).catch(function(error){dispatch(_getListFailureAction(error));});};}function goBackAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.RECOMMEND_LIST.GO_BACK};}function asyncDeleteListAction(){return function(dispatch,getState){dispatch(deleteListAction());return new Promise(function(resolve){resolve();});};}function deleteListAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.RECOMMEND_LIST.DELETE};}function setScrollerPositionAction(offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.RECOMMEND_LIST.SET_LISTVIEW_OFFSET,listViewOffset:offset};}function _fetchList(orderFiled,orderType,pageIndex,searchKey){var kvDict={'ModuleEnName':'tuijianjingqu','CatalogIdentifier':'mobile/wanzhuan/you'};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getFromPortal(__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.AttractionsRecommendList,kvDict).then(function(resp){return resp.json();});}function _getListRequestAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.RECOMMEND_LIST.GET_LIST_REQUEST};}function _getListSuccessAction(dataList){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.RECOMMEND_LIST.GET_LIST_SUCCESS,dataList:dataList};}function _getListFailureAction(error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.RECOMMEND_LIST.GET_LIST_FAILURE,message:error};}\n\n/***/ }),\n\n/***/ 930:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view__ = __webpack_require__(27);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_prop_types__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__ = __webpack_require__(909);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__core_utils_UIUtil__ = __webpack_require__(20);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__ = __webpack_require__(15);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ScenicRecommendListView=function(_PureComponent){_inherits(ScenicRecommendListView,_PureComponent);function ScenicRecommendListView(props){_classCallCheck(this,ScenicRecommendListView);var _this=_possibleConstructorReturn(this,(ScenicRecommendListView.__proto__||Object.getPrototypeOf(ScenicRecommendListView)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);_this.onRefresh=_this.onRefresh.bind(_this);var dataSource=new __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default.a.DataSource({rowHasChanged:function rowHasChanged(row1,row2){return row1!==row2;},sectionHeaderHasChanged:function sectionHeaderHasChanged(s1,s2){return s1!==s2;}});_this.state={dataSource:dataSource.cloneWithRows(_this.props.dataList?_this.props.dataList:[])};return _this;}_createClass(ScenicRecommendListView,[{key:'componentDidMount',value:function componentDidMount(){// 处理返回\nif(!this.props.dataList){this.loadData();}if(this.listView&&!isNaN(this.props.listViewOffset)){this.listView.scrollTo(0,this.props.listViewOffset);}}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.dataList!==prevProps.dataList){this.setState({dataSource:this.state.dataSource.cloneWithRows(this.props.dataList?this.props.dataList:[])});}}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicListBox',style:{height:this.props.height}},this.renderListView(),this.props.isFetching?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null);}},{key:'renderListView',value:function renderListView(){var _this2=this;if(this.props.dataList&&this.props.dataList.length>=0){var separator=function separator(sectionID,rowID){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:sectionID+'-'+rowID,style:{height:'5px',backgroundColor:'#2d2327'}});};return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default.a,{ref:function ref(el){_this2.listView=el;__WEBPACK_IMPORTED_MODULE_11__core_utils_UIUtil__[\"a\" /* default */].fixListViewHeightIssue(el,_this2.props.height);},dataSource:this.state.dataSource,renderRow:this.renderRow,renderSeparator:separator,style:{height:this.props.height,overflow:'auto'},pullToRefresh:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default.a,{refreshing:this.props.isFetching,onRefresh:this.onRefresh}),initialListSize:this.props.dataList.length,pageSize:20,scrollRenderAheadDistance:500,scrollEventThrottle:50,onEndReachedThreshold:20});}}},{key:'isEmptyString',value:function isEmptyString(str){return!str||str.length===0;}},{key:'onRefresh',value:function onRefresh(){var _this3=this;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"a\" /* asyncDeleteListAction */])()).then(function(){_this3.loadData();});}},{key:'renderRow',value:function renderRow(item,sectionID,rowID){var _this4=this;var star=__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__[\"a\" /* default */].getScenicStarCount(item.GetRelation&&item.GetRelation.AttractionsStar?item.GetRelation.AttractionsStar:'0');var starImg=__webpack_require__(898);var starEmptyImg=__webpack_require__(899);var imageUrl=item.GetImage&&item.GetImage.MiddleImageFrontUrl?item.GetImage.MiddleImageFrontUrl:'';imageUrl=imageUrl&&imageUrl.length>0&&imageUrl.indexOf('noPicture')<0?imageUrl:item.GetRelation&&item.GetRelation.GetImage&&item.GetRelation.GetImage.MiddleImageFrontUrl?item.GetRelation.GetImage.MiddleImageFrontUrl:'';return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:rowID,className:'scenicRecommendListItemBox',onClick:function onClick(){if(_this4.props.onItemClick){_this4.props.onItemClick(item);}}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicRecommendListItemBg',style:{backgroundImage:'url('+imageUrl+')'}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicRecommendListBottom'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomText'},item.Head),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicRecommendListBottomStars'},Array(5).fill(0).map(function(item,index){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{key:index,className:'scenicDetailHeaderBottomStar',src:index<star?starImg:starEmptyImg,alt:''});})))));}},{key:'loadData',value:function loadData(){if(this.props.isFetching){return;}this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"b\" /* asyncGetListAction */])());}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){if(!this.listView){return;}var offsetY=__WEBPACK_IMPORTED_MODULE_9_react_dom___default.a.findDOMNode(this.listView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"d\" /* setScrollerPositionAction */])(offsetY));}}]);return ScenicRecommendListView;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"PureComponent\"]);ScenicRecommendListView.propTypes={// 列表项点击事件\nonItemClick:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.func};var mapStateToProps=function mapStateToProps(state){return Object.assign({},state.scenic.recommendListScreen);};ScenicRecommendListView=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps,null,null,{withRef:true})(ScenicRecommendListView);/* harmony default export */ __webpack_exports__[\"a\"] = (ScenicRecommendListView);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/8.85a0d149.chunk.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, SegmentedControl } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport ScenicRecommendListView from '../../views/scenic/ScenicRecommendListView';\r\nimport {  \r\n    goBackAction\r\n} from '../../store/actions/scenic/recommendListAction';\r\nimport '../../assets/css/scenic.css';\r\nimport LeftContentView from '../../views/common/LeftContentView';\r\n\r\nclass ScenicRecommendListScreen extends PureComponent\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.showCommonList = this.showCommonList.bind(this);\r\n    }\r\n    render()\r\n    {\r\n        let listViewHeight = window.innerHeight - 45;\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    leftContent={<LeftContentView\r\n                        ref={(view) => { this.LeftContentView = view ? view.getWrappedInstance() : this.scrollView; }}\r\n                        goBackAction={goBackAction}\r\n                        history={this.props.history}\r\n                    />}\r\n                    onLeftClick={() => {\r\n                        this.LeftContentView.goHome();\r\n                    }}>\r\n                    <SegmentedControl values={['非游不可', '全部景区']} \r\n                        tintColor=\"white\" \r\n                        selectedIndex={0}\r\n                        onValueChange={this.showCommonList}/>\r\n                </NavBar>\r\n                <Content>\r\n                    <ScenicRecommendListView ref={(listView)=>{\r\n                        if(listView)\r\n                        {\r\n                            this.listView = listView.getWrappedInstance();\r\n                        }\r\n                    }}\r\n                    onItemClick={this.onItemClick}\r\n                    height={listViewHeight}/>\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    onItemClick(item)\r\n    {\r\n        if(!item || !item.GetRelation || !item.GetRelation.Code)\r\n        {\r\n            return;\r\n        }\r\n        if(this.listView)\r\n        {\r\n            this.listView.cacheScrollOffset();\r\n        }\r\n        this.props.history.push(`/scenic/detail/${item.GetRelation.Code}`);\r\n    }\r\n    showCommonList()\r\n    {\r\n        if(this.listView)\r\n        {\r\n            this.listView.cacheScrollOffset();\r\n        }\r\n        this.props.history.push('/scenic/list?segment=true');\r\n    }\r\n}\r\n\r\nScenicRecommendListScreen = connect()(ScenicRecommendListScreen);\r\n\r\nexport default ScenicRecommendListScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/scenic/ScenicRecommendListScreen.js","module.exports = __webpack_public_path__ + \"static/media/ico_a_full@2x.a5d6eea0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/scenic/ico_a_full@2x.png\n// module id = 898\n// module chunks = 8 9","module.exports = __webpack_public_path__ + \"static/media/ico_a_empty@2x.f866e867.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/scenic/ico_a_empty@2x.png\n// module id = 899\n// module chunks = 8 9","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function asyncGetListAction()\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getListRequestAction());\r\n        return _fetchList().then((resp)=>{\r\n            let dataList = (resp && resp.results && resp.results.length > 0) ? resp.results : [];\r\n            dispatch(_getListSuccessAction(dataList));\r\n        }).catch((error)=>{\r\n            dispatch(_getListFailureAction(error));\r\n        });\r\n    };\r\n}\r\n\r\nexport function goBackAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GO_BACK,\r\n    };\r\n}\r\n\r\nexport function asyncDeleteListAction()\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(deleteListAction());\r\n        return new Promise((resolve)=>{\r\n            resolve();\r\n        });\r\n    };\r\n}\r\n\r\nexport function deleteListAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.DELETE,\r\n    };\r\n}\r\n\r\nexport function setScrollerPositionAction(offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.SET_LISTVIEW_OFFSET,\r\n        listViewOffset: offset\r\n    };\r\n}\r\n\r\nfunction _fetchList(orderFiled, orderType, pageIndex, searchKey)\r\n{\r\n    let kvDict = {'ModuleEnName': 'tuijianjingqu', 'CatalogIdentifier': 'mobile/wanzhuan/you'};\r\n    return HttpClient.getFromPortal(IConstant.PortalApis.ELEMENTS.AttractionsRecommendList, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getListRequestAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GET_LIST_REQUEST,\r\n    };\r\n}\r\n\r\nfunction _getListSuccessAction(dataList)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GET_LIST_SUCCESS,\r\n        dataList\r\n    };\r\n}\r\n\r\nfunction _getListFailureAction(error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GET_LIST_FAILURE,\r\n        message: error\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/scenic/recommendListAction.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport ReactDOM from 'react-dom';\r\nimport { ListView, PullToRefresh, ActivityIndicator } from 'antd-mobile';\r\nimport { asyncGetListAction, asyncDeleteListAction, setScrollerPositionAction } from '../../store/actions/scenic/recommendListAction';\r\nimport UIUtil from '../../core/utils/UIUtil';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\n\r\nclass ScenicRecommendListView extends PureComponent\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.renderRow = this.renderRow.bind(this);\r\n        this.onRefresh = this.onRefresh.bind(this);\r\n        \r\n        const dataSource = new ListView.DataSource({\r\n            rowHasChanged: (row1, row2) => row1 !== row2,\r\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\r\n        });\r\n\r\n        this.state = {\r\n            dataSource: dataSource.cloneWithRows(this.props.dataList ? this.props.dataList : []),\r\n        };\r\n    }\r\n    componentDidMount()\r\n    {\r\n        // 处理返回\r\n        if(!this.props.dataList)\r\n        {\r\n            this.loadData();\r\n        }\r\n        if(this.listView && !isNaN(this.props.listViewOffset))\r\n        {\r\n            this.listView.scrollTo(0, this.props.listViewOffset);\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot)\r\n    {\r\n        if(this.props.dataList !== prevProps.dataList)\r\n        {\r\n            this.setState({dataSource: this.state.dataSource.cloneWithRows(this.props.dataList ? this.props.dataList : [])});\r\n        }\r\n    }\r\n    render()\r\n    {\r\n        return (\r\n            <div className=\"scenicListBox\" style={{height: this.props.height}}>\r\n                {\r\n                    this.renderListView()\r\n                }\r\n                {\r\n                    this.props.isFetching\r\n                        ?\r\n                        <ActivityIndicator \r\n                            toast\r\n                            text=\"Loading...\" />\r\n                        :null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    renderListView()\r\n    {\r\n        if(this.props.dataList && this.props.dataList.length >= 0)\r\n        {\r\n            const separator = (sectionID, rowID) => (\r\n                <div\r\n                    key={`${sectionID}-${rowID}`}\r\n                    style={{\r\n                        height: '5px',\r\n                        backgroundColor: '#2d2327',\r\n                    }}\r\n                />\r\n            );\r\n    \r\n            return (\r\n                <ListView\r\n                    ref={(el) => {\r\n                        this.listView = el;\r\n                        UIUtil.fixListViewHeightIssue(el, this.props.height);\r\n                    }}\r\n                    dataSource={this.state.dataSource}\r\n                    renderRow={this.renderRow}\r\n                    renderSeparator={separator}\r\n                    style={{\r\n                        height: this.props.height,\r\n                        overflow: 'auto',\r\n                    }}\r\n                    pullToRefresh={<PullToRefresh\r\n                        refreshing={this.props.isFetching}\r\n                        onRefresh={this.onRefresh}\r\n                    />}\r\n                    initialListSize={this.props.dataList.length}\r\n                    pageSize={20}\r\n                    scrollRenderAheadDistance={500}\r\n                    scrollEventThrottle={50}\r\n                    onEndReachedThreshold={20}/>\r\n            );\r\n        }\r\n    }\r\n    isEmptyString(str)\r\n    {\r\n        return !str || str.length === 0;\r\n    }\r\n    onRefresh()\r\n    {\r\n        this.props.dispatch(asyncDeleteListAction()).then(()=>{\r\n            this.loadData();\r\n        });\r\n    }\r\n    renderRow(item, sectionID, rowID)\r\n    {\r\n        let star = SysUtil.getScenicStarCount(item.GetRelation && item.GetRelation.AttractionsStar ? item.GetRelation.AttractionsStar : '0');\r\n\r\n        let starImg = require('../../assets/images/scenic/ico_a_full@2x.png');\r\n        let starEmptyImg = require('../../assets/images/scenic/ico_a_empty@2x.png');\r\n        let imageUrl = item.GetImage && item.GetImage.MiddleImageFrontUrl ? item.GetImage.MiddleImageFrontUrl : '';\r\n        imageUrl = imageUrl && imageUrl.length > 0 && imageUrl.indexOf('noPicture') < 0 ? imageUrl : (item.GetRelation && item.GetRelation.GetImage && item.GetRelation.GetImage.MiddleImageFrontUrl ? item.GetRelation.GetImage.MiddleImageFrontUrl : '');\r\n        return (\r\n            <div key={rowID} \r\n                className=\"scenicRecommendListItemBox\"\r\n                onClick={()=>{\r\n                    if(this.props.onItemClick)\r\n                    {\r\n                        this.props.onItemClick(item);\r\n                    }\r\n                }}>\r\n                <div className=\"scenicRecommendListItemBg\"\r\n                    style={{backgroundImage: `url(${imageUrl})`}}>\r\n                    <div className=\"scenicRecommendListBottom\">\r\n                        <div className=\"scenicDetailHeaderBottomText\">{item.Head}</div>\r\n                        <div className=\"scenicRecommendListBottomStars\">\r\n                            {\r\n                                Array(5).fill(0).map((item, index)=><img key={index}\r\n                                    className=\"scenicDetailHeaderBottomStar\"\r\n                                    src={index < star ? starImg : starEmptyImg}\r\n                                    alt=''/>)\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    loadData()\r\n    {\r\n        if(this.props.isFetching)\r\n        {\r\n            return;\r\n        }\r\n        this.props.dispatch(asyncGetListAction());\r\n    }\r\n    cacheScrollOffset()\r\n    {\r\n        if(!this.listView)\r\n        {\r\n            return;\r\n        }\r\n        let offsetY = ReactDOM.findDOMNode(this.listView).scrollTop;\r\n        this.props.dispatch(setScrollerPositionAction(offsetY));\r\n    }\r\n}\r\n\r\nScenicRecommendListView.propTypes = {\r\n    // 列表项点击事件\r\n    onItemClick: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = function(state)\r\n{\r\n    return {\r\n        ...state.scenic.recommendListScreen\r\n    };\r\n};\r\n\r\nScenicRecommendListView = connect(mapStateToProps, null, null, {withRef: true})(ScenicRecommendListView);\r\n\r\nexport default ScenicRecommendListView;\n\n\n// WEBPACK FOOTER //\n// ./src/views/scenic/ScenicRecommendListView.js"],"sourceRoot":""}