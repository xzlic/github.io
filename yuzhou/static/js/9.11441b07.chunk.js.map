{"version":3,"sources":["../static/js/9.11441b07.chunk.js","screens/scenic/ScenicDetailScreen.js","store/actions/scenic/detailAction.js","assets/images/scenic/ico_a_full@2x.png","assets/images/scenic/ico_a_empty@2x.png","assets/images/more@2x.png"],"names":["webpackJsonp","880","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8_rc_progress__","__WEBPACK_IMPORTED_MODULE_9_react_dom__","__WEBPACK_IMPORTED_MODULE_9_react_dom___default","__WEBPACK_IMPORTED_MODULE_10__views_common_Content__","__WEBPACK_IMPORTED_MODULE_11__core_utils_IConstant__","__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__","__WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__","__WEBPACK_IMPORTED_MODULE_14__views_photo_brower_PhotoBrowerView__","__WEBPACK_IMPORTED_MODULE_15__views_common_ElementOperationView__","__WEBPACK_IMPORTED_MODULE_16__assets_css_scenic_css__","__WEBPACK_IMPORTED_MODULE_17__views_common_LeftContentView__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","ScenicDetailScreen","_PureComponent","this","_this","getPrototypeOf","state","Score","PriceScore","ServiceScore","InstallationScore","EnvironmentScore","index","showImageBrowser","imageList","showSceneryList","bind","showElementMarkerMap","goBack","detailItem","startScoreAnimation","loadData","restoreScrollViewPosition","history","action","onDestroy","prevProps","prevState","snapshot","_this2","a","createElement","mode","className","leftContent","ref","view","LeftContentView","getWrappedInstance","scrollView","goBackAction","onLeftClick","goHome","renderHeaderView","renderElementOperationView","renderScoreView","renderTicketListView","renderMapView","renderBasicViews","renderSceneryListView","isFetching","toast","text","photoBrowserView","dispatch","code","match","params","_this3","onNearByTapped","push","pathname","centerLat","Latitude","centerLng","Longitude","_this4","ticketList","map","item","renderTicketItemView","_this5","ticketItem","onClick","showBooking","CnName","TicketPrice","IsReserve","isUserLogined","scenicCode","Code","TICKET","scenicName","star","getScenicStarCount","AttractionsStarNo","starImg","starEmptyImg","renderHeaderImages","Array","fill","src","alt","GetImage","ImageList","percent","strokeWidth","trailWidth","strokeColor","trailColor","style","flex","toFixed","_this6","afterChange","imageChage","autoplay","dots","swiping","infinite","selectedIndex","swipeSpeed","backgroundImage","ImgSrc","setState","_this7","width","window","innerWidth","imgUrl","_this8","Address","Telephone","openTel","BusinesTime","Summary","_this9","sceneryList","renderSceneryView","_this10","ImageFrontUrl","replace","showSceneryDetail","_this11","then","offsetY","findDOMNode","scrollTop","isNaN","scrollViewOffset","scrollToY","cacheScrollOffset","_this12","setTimeout","imageItem","open","mapStateToProps","ownProps","obj","scenic","detailScreen","assign","897","type","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","SCENIC","DETAIL","GO_BACK","asyncGetDetailAction","getState","_getDetailRequestAction","_fetchDetail","resp","results","_getDetailSuccessAction","catch","error","_getDetailFailureAction","asyncGetTicketListAction","_getTicketListRequestAction","_fetchTicketList","_getTicketListSuccessAction","_getTicketListFailureAction","asyncGetSceneryListAction","_getGetSceneryListRequestAction","_fetchGetSceneryList","_getGetSceneryListSuccessAction","_getGetSceneryListFailureAction","setDetailScrollerPositionAction","offset","SET_DETAIL_SCROLL_OFFSET","setSceneryListScrollerPositionAction","SET_SCENERY_LIST_SCROLL_OFFSET","setSceneryDetailScrollerPositionAction","sceneryCode","SET_SCENERY_DETAIL_SCROLL_OFFSET","kvDict","ConditionParams","Params","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","postToPortalWithUrl","HOST_E_BUSINESS","ELEMENTS","SceneryList","json","GET_SCENERY_LIST_REQUEST","GET_SCENERY_LIST_SUCCESS","GET_SCENERY_LIST_FAILURE","message","PlayDate","Date","formatDate","AttractionsTicketList","GET_TICKET_LIST_REQUEST","GET_TICKET_LIST_SUCCESS","GET_TICKET_LIST_FAILURE","AttractionsDetail","GET_DETAIL_REQUEST","GET_DETAIL_SUCCESS","GET_DETAIL_FAILURE","898","exports","p","899","929"],"mappings":"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","file":"static/js/9.11441b07.chunk.js","sourcesContent":["webpackJsonp([9],{\n\n/***/ 880:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__ = __webpack_require__(42);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__ = __webpack_require__(43);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_rc_progress__ = __webpack_require__(56);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom__ = __webpack_require__(14);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__views_common_Content__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__ = __webpack_require__(15);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__ = __webpack_require__(897);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__views_photo_brower_PhotoBrowerView__ = __webpack_require__(41);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__views_common_ElementOperationView__ = __webpack_require__(61);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__assets_css_scenic_css__ = __webpack_require__(288);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16__assets_css_scenic_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16__assets_css_scenic_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__views_common_LeftContentView__ = __webpack_require__(23);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ScenicDetailScreen=function(_PureComponent){_inherits(ScenicDetailScreen,_PureComponent);function ScenicDetailScreen(props){_classCallCheck(this,ScenicDetailScreen);var _this=_possibleConstructorReturn(this,(ScenicDetailScreen.__proto__||Object.getPrototypeOf(ScenicDetailScreen)).call(this,props));_this.state={Score:0,PriceScore:0,ServiceScore:0,InstallationScore:0,EnvironmentScore:0,index:1,showImageBrowser:false,imageList:[]};_this.showSceneryList=_this.showSceneryList.bind(_this);_this.showElementMarkerMap=_this.showElementMarkerMap.bind(_this);_this.showImageBrowser=_this.showImageBrowser.bind(_this);_this.goBack=_this.goBack.bind(_this);return _this;}_createClass(ScenicDetailScreen,[{key:'componentDidMount',value:function componentDidMount(){if(!this.props.detailItem){this.loadData();}else{this.startScoreAnimation(this.props.detailItem);}this.restoreScrollViewPosition();}},{key:'componentWillUnmount',value:function componentWillUnmount(){if(this.props&&this.props.history&&this.props.history.action==='POP'){this.onDestroy();}}},{key:'componentDidUpdate',value:function componentDidUpdate(prevProps,prevState,snapshot){if(prevProps.detailItem!==this.props.detailItem&&this.props.detailItem){this.startScoreAnimation(this.props.detailItem);}}},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',leftContent:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_17__views_common_LeftContentView__[\"a\" /* default */],{ref:function ref(view){_this2.LeftContentView=view?view.getWrappedInstance():_this2.scrollView;},goBackAction:function goBackAction(){},history:this.props.history}),onLeftClick:function onLeftClick(){_this2.LeftContentView.goHome();}},'\\u666F\\u533A\\u8BE6\\u60C5'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__views_common_Content__[\"a\" /* default */],{ref:function ref(view){_this2.scrollView=view?view.getWrappedInstance():_this2.scrollView;}},this.renderHeaderView(),this.renderElementOperationView(),this.renderScoreView(),this.renderTicketListView(),this.renderMapView(),this.renderBasicViews(),this.renderSceneryListView(),this.props.isFetching?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_14__views_photo_brower_PhotoBrowerView__[\"a\" /* default */],{ref:function ref(view){_this2.photoBrowserView=view?view.getWrappedInstance():_this2.scrollView;}})));}},{key:'goBack',value:function goBack(){this.props.history.goBack();}},{key:'onDestroy',value:function onDestroy(){var dispatch=this.props.dispatch;var code=this.props.match.params.code;dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__[\"d\" /* goBackAction */])(code));}},{key:'renderElementOperationView',value:function renderElementOperationView(){var _this3=this;if(!this.props.detailItem){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_15__views_common_ElementOperationView__[\"a\" /* default */],{code:this.props.match.params.code,onNearByTapped:function onNearByTapped(){_this3.props.history.push({pathname:'/me/near-by',state:{centerLat:_this3.props.detailItem.Latitude,centerLng:_this3.props.detailItem.Longitude}});}});}},{key:'renderTicketListView',value:function renderTicketListView(){var _this4=this;if(!this.props.ticketList||this.props.ticketList.length===0){return null;}return this.props.ticketList.map(function(item,index){return _this4.renderTicketItemView(index);});}},{key:'renderTicketItemView',value:function renderTicketItemView(index){var _this5=this;var ticketItem=this.props.ticketList[index];return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:index,onClick:function onClick(){return _this5.showBooking(ticketItem);}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemRow'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemLeft'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemName'},ticketItem.CnName),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemTags'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemTag'},'\\u5B98\\u65B9'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemTag'},'\\u5B9E\\u540D\\u5236'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemTag'},'\\u5FEB\\u901F\\u5165\\u56ED'))),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemRight'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemPrice'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemPriceLabel'},'\\xA5'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemPriceValue'},ticketItem.TicketPrice)),ticketItem.IsReserve?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemButton'},'\\u7ACB\\u5373\\u9884\\u8BA2'):null)),index===this.props.ticketList.length-1?null:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'ticketItemSplitLine'}));}},{key:'showBooking',value:function showBooking(ticketItem){if(!ticketItem.IsReserve){return;}if(!this.props.isUserLogined){this.props.history.push('/me/login');return;}var scenicCode=this.props.match.params.code;this.props.history.push({pathname:'/order/booking/'+scenicCode+'/'+ticketItem.Code+'/'+__WEBPACK_IMPORTED_MODULE_11__core_utils_IConstant__[\"n\" /* ORDER_TYPE */].TICKET,state:{scenicName:this.props.detailItem.CnName}});}},{key:'renderHeaderView',value:function renderHeaderView(){if(!this.props.detailItem){return null;}var star=__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__[\"a\" /* default */].getScenicStarCount(this.props.detailItem.AttractionsStarNo?this.props.detailItem.AttractionsStarNo:'0');var starImg=__webpack_require__(898);var starEmptyImg=__webpack_require__(899);return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeader',onClick:this.showImageBrowser},this.renderHeaderImages(),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottom'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomText'},this.props.detailItem.CnName),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomView'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomStars'},Array(5).fill(0).map(function(item,index){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{key:index,className:'scenicDetailHeaderBottomStar',src:index<star?starImg:starEmptyImg,alt:''});})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomText'},this.state.index,'/',this.props.detailItem.GetImage&&this.props.detailItem.GetImage.ImageList?this.props.detailItem.GetImage.ImageList.length:1))));}},{key:'renderScoreView',value:function renderScoreView(){if(!this.props.detailItem){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreView'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreCircle'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_rc_progress__[\"a\" /* Circle */],{percent:this.state.Score*20,strokeWidth:'6',trailWidth:'6',strokeColor:'#42a6dc',trailColor:'#f0f0f0'}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreCircleTextBox'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{style:{flex:1}}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreCircleTextSubBox'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreCircleText'},this.state.Score.toFixed(1)),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreCircleUnit'},'\\u5206')),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{style:{flex:1}}))),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLines'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLine'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLineLabel'},'\\u4EF7\\u683C'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_rc_progress__[\"b\" /* Line */],{className:'scenicScoreLineProgress',percent:this.state.PriceScore*20,strokeWidth:'4',trailWidth:'4',strokeColor:'#42a6dc',trailColor:'#f0f0f0'})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLine'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLineLabel'},'\\u670D\\u52A1'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_rc_progress__[\"b\" /* Line */],{className:'scenicScoreLineProgress',percent:this.state.ServiceScore*20,strokeWidth:'4',trailWidth:'4',strokeColor:'#42a6dc',trailColor:'#f0f0f0'})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLine'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLineLabel'},'\\u8BBE\\u65BD'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_rc_progress__[\"b\" /* Line */],{className:'scenicScoreLineProgress',percent:this.state.InstallationScore*20,strokeWidth:'4',trailWidth:'4',strokeColor:'#42a6dc',trailColor:'#f0f0f0'})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLine'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicScoreLineLabel'},'\\u73AF\\u5883'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8_rc_progress__[\"b\" /* Line */],{className:'scenicScoreLineProgress',percent:this.state.EnvironmentScore*20,strokeWidth:'4',trailWidth:'4',strokeColor:'#42a6dc',trailColor:'#f0f0f0'}))));}},{key:'renderHeaderImages',value:function renderHeaderImages(){var _this6=this;if(!this.props.detailItem||!this.props.detailItem.GetImage||!this.props.detailItem.GetImage.ImageList||this.props.detailItem.GetImage.ImageList.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default.a,{className:'scenicDetailHeaderImgSlider',afterChange:function afterChange(){return _this6.imageChage();},autoplay:true,dots:false,swiping:true,infinite:true,selectedIndex:0,swipeSpeed:35},this.props.detailItem.GetImage.ImageList.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:index,className:'scenicDetailHeaderImg',style:{backgroundImage:'url('+item.ImgSrc+')'}});}));}},{key:'imageChage',value:function imageChage(){if(this.state.index===this.props.detailItem.GetImage.ImageList.length){this.setState({index:1});}else{this.setState({index:this.state.index+1});}}},{key:'renderMapView',value:function renderMapView(){var _this7=this;if(!this.props.detailItem||!this.props.detailItem.Longitude||!this.props.detailItem.Latitude){return null;}var width=window.innerWidth*2;var imgUrl='http://api.map.baidu.com/staticimage?width='+width+'&height=250&markers='+this.props.detailItem.Longitude+','+this.props.detailItem.Latitude+'&markerStyles=-1,http://oe72hu540.bkt.clouddn.com/ico_pin_blu.png';return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{className:'scenicDetailMapImg',src:imgUrl,onClick:function onClick(){return _this7.showElementMarkerMap();},alt:''});}},{key:'renderBasicViews',value:function renderBasicViews(){var _this8=this;if(!this.props.detailItem){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRows'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRow'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u5730\\u5740'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoValue'},this.props.detailItem.Address)),this.props.detailItem.Telephone&&this.props.detailItem.Telephone.length>0?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRow'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u7535\\u8BDD'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoPhoneRow',onClick:function onClick(){return __WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__[\"a\" /* default */].openTel(_this8.props.detailItem.Telephone);}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoValue'},this.props.detailItem.Telephone),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{style:{flex:1}}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{className:'scenicDetailInfoPhone',src:__webpack_require__(62),alt:''}))):null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRow'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u8425\\u4E1A\\u65F6\\u95F4'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoValue'},this.props.detailItem.BusinesTime)),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRow'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u666F\\u533A\\u7B80\\u4ECB'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoValue scenicDetailMultDesc'},this.props.detailItem.Summary)));}},{key:'renderSceneryListView',value:function renderSceneryListView(){var _this9=this;if(!this.props.sceneryList||this.props.sceneryList.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'sceneryListSplitLine'}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'sceneryTitleBox'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u5B50\\u666F\\u70B9'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{style:{flex:1}}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'sceneryListMoreView',onClick:this.showSceneryList},'\\u66F4\\u591A ',__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{src:__webpack_require__(929),alt:''}))),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'sceneryListBox'},this.props.sceneryList.map(function(item,index){return _this9.renderSceneryView(index);})));}},{key:'renderSceneryView',value:function renderSceneryView(index){var _this10=this;if(index>=10){return null;}var item=this.props.sceneryList[index];var imgUrl=item.GetImage&&item.GetImage.ImageFrontUrl?item.GetImage.ImageFrontUrl.replace('/Middle/','/Small/'):'';return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:index,className:'sceneryItemView',onClick:function onClick(){_this10.showSceneryDetail(index);}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{className:'sceneryItemImg',src:imgUrl,alt:''}),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'sceneryItemName'},item.CnName));}},{key:'loadData',value:function loadData(){var _this11=this;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__[\"a\" /* asyncGetDetailAction */])(this.props.match.params.code)).then(function(){return _this11.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__[\"c\" /* asyncGetTicketListAction */])(_this11.props.match.params.code));}).then(function(){return _this11.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__[\"b\" /* asyncGetSceneryListAction */])(_this11.props.match.params.code));});}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){var offsetY=__WEBPACK_IMPORTED_MODULE_9_react_dom___default.a.findDOMNode(this.scrollView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_13__store_actions_scenic_detailAction__[\"e\" /* setDetailScrollerPositionAction */])(this.props.match.params.code,offsetY));}},{key:'restoreScrollViewPosition',value:function restoreScrollViewPosition(){if(this.scrollView){if(!isNaN(this.props.scrollViewOffset)){this.scrollView.scrollToY(this.props.scrollViewOffset);}else{this.scrollView.scrollToY(0);}}}},{key:'showSceneryList',value:function showSceneryList(){this.cacheScrollOffset();this.props.history.push('/scenic/scenery-list/'+this.props.match.params.code);}},{key:'showSceneryDetail',value:function showSceneryDetail(index){var item=this.props.sceneryList[index];this.cacheScrollOffset();this.props.history.push('/scenic/scenery-detail/'+this.props.match.params.code+'/'+item.Code);}},{key:'startScoreAnimation',value:function startScoreAnimation(detailItem){var _this12=this;// 这样进度条可以有动画\nsetTimeout(function(){_this12.setState({Score:detailItem.Score?detailItem.Score:3.0,PriceScore:detailItem.PriceScore?detailItem.PriceScore:3.0,ServiceScore:detailItem.ServiceScore?detailItem.ServiceScore:3.0,InstallationScore:detailItem.InstallationScore?detailItem.InstallationScore:3.0,EnvironmentScore:detailItem.EnvironmentScore?detailItem.EnvironmentScore:3.0});},700);}},{key:'showElementMarkerMap',value:function showElementMarkerMap(){this.cacheScrollOffset();var detailItem=this.props.detailItem;this.props.history.push('/map/elementMarker/'+this.props.match.params.code+'/'+detailItem.CnName+'/'+detailItem.Address+'/'+detailItem.Latitude+'/'+detailItem.Longitude);}},{key:'showImageBrowser',value:function showImageBrowser(){if(!this.props.detailItem||!this.props.detailItem.GetImage||!this.props.detailItem.GetImage.ImageList||this.props.detailItem.GetImage.ImageList.length===0){return null;}var imageList=[];for(var i=0;i<this.props.detailItem.GetImage.ImageList.length;i++){var imageItem=this.props.detailItem.GetImage.ImageList[i];imageList.push(imageItem.ImgSrc.replace('Small','Large'));}this.photoBrowserView.open(imageList);}}]);return ScenicDetailScreen;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"PureComponent\"]);var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.scenic.detailScreen[ownProps.match.params.code];return Object.assign({},obj,{isUserLogined:__WEBPACK_IMPORTED_MODULE_12__core_utils_SysUtil__[\"a\" /* default */].isUserLogined(state)});};ScenicDetailScreen=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps)(ScenicDetailScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (ScenicDetailScreen);\n\n/***/ }),\n\n/***/ 897:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncGetDetailAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = asyncGetTicketListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetSceneryListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = setDetailScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = setSceneryListScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = setSceneryDetailScrollerPositionAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction goBackAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GO_BACK,code:code};}// 景区详情\nfunction asyncGetDetailAction(code){return function(dispatch,getState){dispatch(_getDetailRequestAction(code));return _fetchDetail(code).then(function(resp){resp=resp&&resp.results&&resp.results.length>0?resp.results[0]:resp;dispatch(_getDetailSuccessAction(code,resp));}).catch(function(error){dispatch(_getDetailFailureAction(code,error));});};}// 门票列表\nfunction asyncGetTicketListAction(code){return function(dispatch,getState){dispatch(_getTicketListRequestAction(code));return _fetchTicketList(code).then(function(resp){resp=resp?resp.results:[];dispatch(_getTicketListSuccessAction(code,resp));}).catch(function(error){dispatch(_getTicketListFailureAction(code,error));});};}// 景点列表\nfunction asyncGetSceneryListAction(code){return function(dispatch,getState){dispatch(_getGetSceneryListRequestAction(code));return _fetchGetSceneryList(code).then(function(resp){resp=resp?resp.results:[];dispatch(_getGetSceneryListSuccessAction(code,resp));}).catch(function(error){dispatch(_getGetSceneryListFailureAction(code,error));});};}// 景区详情页面滚动条位置\nfunction setDetailScrollerPositionAction(code,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,code:code,scrollViewOffset:offset};}// 景点列表页面滚动条位置\nfunction setSceneryListScrollerPositionAction(code,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,code:code,scrollViewOffset:offset};}function setSceneryDetailScrollerPositionAction(scenicCode,sceneryCode,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,code:scenicCode,sceneryCode:sceneryCode,scrollViewOffset:offset};}function _fetchGetSceneryList(code){var kvDict={ConditionParams:{Params:{Code:code}}};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortalWithUrl(__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS,__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.SceneryList,kvDict).then(function(resp){return resp.json();});}function _getGetSceneryListRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,code:code};}function _getGetSceneryListSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,code:code,sceneryList:resp};}function _getGetSceneryListFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,code:code,message:error};}function _fetchTicketList(code){var kvDict={ConditionParams:{Params:{Code:code,PlayDate:new Date().formatDate('YYYY-MM-DD')}}};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortalWithUrl(__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS,__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.AttractionsTicketList,kvDict).then(function(resp){return resp.json();});}function _getTicketListRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,code:code};}function _getTicketListSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,code:code,ticketList:resp};}function _getTicketListFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,code:code,message:error};}function _fetchDetail(code){var kvDict={ConditionParams:{Params:{Code:code}}};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].postToPortalWithUrl(__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS,__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"q\" /* PortalApis */].ELEMENTS.AttractionsDetail,kvDict).then(function(resp){return resp.json();});}function _getDetailRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_REQUEST,code:code};}function _getDetailSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_SUCCESS,code:code,detailItem:resp};}function _getDetailFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"b\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_FAILURE,code:code,message:error};}\n\n/***/ }),\n\n/***/ 898:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_a_full@2x.a5d6eea0.png\";\n\n/***/ }),\n\n/***/ 899:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_a_empty@2x.f866e867.png\";\n\n/***/ }),\n\n/***/ 929:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/more@2x.19f5c55a.png\";\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/9.11441b07.chunk.js","import React, { PureComponent } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, ActivityIndicator, Carousel } from 'antd-mobile';\r\nimport { Line, Circle } from 'rc-progress';\r\nimport ReactDOM from 'react-dom';\r\nimport Content from '../../views/common/Content';\r\nimport * as IConstant from '../../core/utils/IConstant';\r\nimport SysUtil from '../../core/utils/SysUtil';\r\nimport { \r\n    asyncGetDetailAction, \r\n    goBackAction, \r\n    asyncGetTicketListAction, \r\n    asyncGetSceneryListAction,\r\n    setDetailScrollerPositionAction,\r\n} from '../../store/actions/scenic/detailAction';\r\nimport PhotoBrowserView from '../../views/photo-brower/PhotoBrowerView';\r\nimport ElementOperationView from '../../views/common/ElementOperationView';\r\n\r\nimport '../../assets/css/scenic.css';\r\nimport LeftContentView from '../../views/common/LeftContentView';\r\n\r\nclass ScenicDetailScreen extends PureComponent\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.state = {\r\n            Score: 0,\r\n            PriceScore: 0,\r\n            ServiceScore: 0,\r\n            InstallationScore: 0,\r\n            EnvironmentScore: 0,\r\n            index : 1,\r\n            showImageBrowser:false,\r\n            imageList:[]\r\n        };\r\n        this.showSceneryList = this.showSceneryList.bind(this);\r\n        this.showElementMarkerMap = this.showElementMarkerMap.bind(this);\r\n        this.showImageBrowser = this.showImageBrowser.bind(this);\r\n        this.goBack = this.goBack.bind(this);\r\n    }\r\n    componentDidMount()\r\n    {\r\n        if(!this.props.detailItem)\r\n        {\r\n            this.loadData();\r\n        }\r\n        else\r\n        {\r\n            this.startScoreAnimation(this.props.detailItem);\r\n        }\r\n        this.restoreScrollViewPosition();\r\n    }\r\n    componentWillUnmount()\r\n    {\r\n        if(this.props && this.props.history && this.props.history.action === 'POP')\r\n        {\r\n            this.onDestroy();\r\n        }\r\n    }\r\n    componentDidUpdate(prevProps, prevState, snapshot)\r\n    {\r\n        if(prevProps.detailItem !== this.props.detailItem && this.props.detailItem)\r\n        {\r\n            this.startScoreAnimation(this.props.detailItem);\r\n        }\r\n    }\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    leftContent={<LeftContentView\r\n                        ref={(view) => { this.LeftContentView = view ? view.getWrappedInstance() : this.scrollView; }}\r\n                        goBackAction={() => {}}\r\n                        history={this.props.history}\r\n                    />}\r\n                    onLeftClick={() => {\r\n                        this.LeftContentView.goHome();\r\n                    }}>\r\n                    景区详情\r\n                </NavBar>\r\n                <Content ref={(view)=>{this.scrollView = view ? view.getWrappedInstance() : this.scrollView;}}>\r\n                    {\r\n                        this.renderHeaderView()\r\n                    }\r\n                    {\r\n                        this.renderElementOperationView()\r\n                    }\r\n                    {\r\n                        this.renderScoreView()\r\n                    }\r\n                    {\r\n                        this.renderTicketListView()\r\n                    }\r\n                    {\r\n                        this.renderMapView()\r\n                    }\r\n                    {\r\n                        this.renderBasicViews()\r\n                    }\r\n                    {\r\n                        this.renderSceneryListView()\r\n                    }\r\n                    {\r\n                        this.props.isFetching\r\n                            ?\r\n                            <ActivityIndicator \r\n                                toast\r\n                                text=\"Loading...\" />\r\n                            :null\r\n                    }\r\n                    <PhotoBrowserView \r\n                        ref={(view)=>{this.photoBrowserView = view ? view.getWrappedInstance() : this.scrollView;}}\r\n                    />\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    goBack()\r\n    {\r\n        this.props.history.goBack();\r\n    }\r\n    onDestroy()\r\n    {\r\n        let dispatch = this.props.dispatch;\r\n        let code = this.props.match.params.code;\r\n        dispatch(goBackAction(code));\r\n    }\r\n    renderElementOperationView()\r\n    {\r\n        if(!this.props.detailItem)\r\n        {\r\n            return null;\r\n        }\r\n        return <ElementOperationView\r\n            code={this.props.match.params.code}\r\n            onNearByTapped={()=>{\r\n                this.props.history.push({\r\n                    pathname: '/me/near-by',\r\n                    state: {\r\n                        centerLat: this.props.detailItem.Latitude,\r\n                        centerLng: this.props.detailItem.Longitude,\r\n                    },\r\n                });\r\n            }}/>;\r\n    }\r\n    renderTicketListView()\r\n    {\r\n        if(!this.props.ticketList || this.props.ticketList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return this.props.ticketList.map((item, index)=>this.renderTicketItemView(index));\r\n    }\r\n    renderTicketItemView(index)\r\n    {\r\n        let ticketItem = this.props.ticketList[index];\r\n        return (\r\n            <div key={index} onClick={()=>this.showBooking(ticketItem)}>\r\n                <div className=\"ticketItemRow\">\r\n                    <div className=\"ticketItemLeft\">\r\n                        <div className=\"ticketItemName\">{ticketItem.CnName}</div>\r\n                        <div className=\"ticketItemTags\">\r\n                            <div className=\"ticketItemTag\">官方</div>\r\n                            <div className=\"ticketItemTag\">实名制</div>\r\n                            <div className=\"ticketItemTag\">快速入园</div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"ticketItemRight\">\r\n                        <div className=\"ticketItemPrice\">\r\n                            <div className=\"ticketItemPriceLabel\">¥</div>\r\n                            <div className=\"ticketItemPriceValue\">{ticketItem.TicketPrice}</div>\r\n                        </div>\r\n                        {\r\n                            ticketItem.IsReserve\r\n                                ?\r\n                                <div className=\"ticketItemButton\">立即预订</div>\r\n                                : null\r\n                        }\r\n                    </div>\r\n                </div>\r\n                {\r\n                    (index === this.props.ticketList.length - 1)\r\n                        ? null\r\n                        : <div className=\"ticketItemSplitLine\"/>\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    showBooking(ticketItem)\r\n    {\r\n        if(!ticketItem.IsReserve)\r\n        {\r\n            return;\r\n        }\r\n        if(!this.props.isUserLogined)\r\n        {\r\n            this.props.history.push('/me/login');\r\n            return;\r\n        }\r\n        let scenicCode = this.props.match.params.code;\r\n        this.props.history.push({\r\n            pathname: `/order/booking/${scenicCode}/${ticketItem.Code}/${IConstant.ORDER_TYPE.TICKET}`,\r\n            state: {\r\n                scenicName: this.props.detailItem.CnName\r\n            },\r\n        });\r\n    }\r\n    renderHeaderView()\r\n    {\r\n        if(!this.props.detailItem)\r\n        {\r\n            return null;\r\n        }\r\n        let star = SysUtil.getScenicStarCount(this.props.detailItem.AttractionsStarNo ? this.props.detailItem.AttractionsStarNo : '0');\r\n        let starImg = require('../../assets/images/scenic/ico_a_full@2x.png');\r\n        let starEmptyImg = require('../../assets/images/scenic/ico_a_empty@2x.png');\r\n        return (\r\n            <div className=\"scenicDetailHeader\" onClick={this.showImageBrowser}>\r\n                {\r\n                    this.renderHeaderImages()\r\n                }\r\n                <div className=\"scenicDetailHeaderBottom\">\r\n                    <div className=\"scenicDetailHeaderBottomText\">{this.props.detailItem.CnName}</div>\r\n                    <div className=\"scenicDetailHeaderBottomView\">\r\n                        <div className=\"scenicDetailHeaderBottomStars\">\r\n                            {\r\n                                Array(5).fill(0).map((item, index)=><img key={index}\r\n                                    className=\"scenicDetailHeaderBottomStar\"\r\n                                    src={index < star ? starImg : starEmptyImg}\r\n                                    alt=''/>)\r\n                            }\r\n                        </div>\r\n                        <div className=\"scenicDetailHeaderBottomText\">{this.state.index}/{this.props.detailItem.GetImage  && this.props.detailItem.GetImage.ImageList ? this.props.detailItem.GetImage.ImageList.length : 1}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderScoreView()\r\n    {\r\n        if(!this.props.detailItem)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div className=\"scenicScoreView\">\r\n                <div className=\"scenicScoreCircle\">\r\n                    <Circle percent={this.state.Score * 20} strokeWidth=\"6\" trailWidth=\"6\" strokeColor=\"#42a6dc\" trailColor=\"#f0f0f0\"/>\r\n                    <div className=\"scenicScoreCircleTextBox\">\r\n                        <div style={{flex: 1}}/>\r\n                        <div  className=\"scenicScoreCircleTextSubBox\">\r\n                            <div className=\"scenicScoreCircleText\">{this.state.Score.toFixed(1)}</div>\r\n                            <div className=\"scenicScoreCircleUnit\">分</div>\r\n                        </div>\r\n                        <div style={{flex: 1}}/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"scenicScoreLines\">\r\n                    <div className=\"scenicScoreLine\">\r\n                        <div className=\"scenicScoreLineLabel\">价格</div>\r\n                        <Line className=\"scenicScoreLineProgress\" percent={this.state.PriceScore * 20} strokeWidth=\"4\" trailWidth=\"4\" strokeColor=\"#42a6dc\" trailColor=\"#f0f0f0\" />\r\n                    </div>\r\n                    <div className=\"scenicScoreLine\">\r\n                        <div className=\"scenicScoreLineLabel\">服务</div>\r\n                        <Line className=\"scenicScoreLineProgress\" percent={this.state.ServiceScore * 20} strokeWidth=\"4\" trailWidth=\"4\" strokeColor=\"#42a6dc\" trailColor=\"#f0f0f0\" />\r\n                    </div>\r\n                    <div className=\"scenicScoreLine\">\r\n                        <div className=\"scenicScoreLineLabel\">设施</div>\r\n                        <Line className=\"scenicScoreLineProgress\" percent={this.state.InstallationScore * 20} strokeWidth=\"4\" trailWidth=\"4\" strokeColor=\"#42a6dc\" trailColor=\"#f0f0f0\" />\r\n                    </div>\r\n                    <div className=\"scenicScoreLine\">\r\n                        <div className=\"scenicScoreLineLabel\">环境</div>\r\n                        <Line className=\"scenicScoreLineProgress\" percent={this.state.EnvironmentScore * 20} strokeWidth=\"4\" trailWidth=\"4\" strokeColor=\"#42a6dc\" trailColor=\"#f0f0f0\" />\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderHeaderImages()\r\n    {\r\n        if(!this.props.detailItem || !this.props.detailItem.GetImage || !this.props.detailItem.GetImage.ImageList || this.props.detailItem.GetImage.ImageList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <Carousel\r\n                className=\"scenicDetailHeaderImgSlider\"\r\n                afterChange = {()=>this.imageChage()}\r\n                autoplay={true}\r\n                dots={false}\r\n                swiping={true}\r\n                infinite\r\n                selectedIndex={0}\r\n                swipeSpeed={35}>\r\n                {\r\n                    this.props.detailItem.GetImage.ImageList.map((item, index)=><div key={index} className=\"scenicDetailHeaderImg\" style={{backgroundImage: `url(${item.ImgSrc})`}}/>)\r\n                }\r\n            </Carousel>\r\n        );\r\n    }\r\n    imageChage(){\r\n        if(this.state.index === this.props.detailItem.GetImage.ImageList.length){\r\n            this.setState({index:1});\r\n        }else{\r\n            this.setState({index:this.state.index+1});\r\n        }\r\n    }\r\n\r\n    renderMapView()\r\n    {\r\n        if(!this.props.detailItem || !this.props.detailItem.Longitude || !this.props.detailItem.Latitude)\r\n        {\r\n            return null;\r\n        }\r\n        let width = window.innerWidth * 2;\r\n        let imgUrl = `http://api.map.baidu.com/staticimage?width=${width}&height=250&markers=${this.props.detailItem.Longitude},${this.props.detailItem.Latitude}&markerStyles=-1,http://oe72hu540.bkt.clouddn.com/ico_pin_blu.png`;\r\n        return (\r\n            <img className=\"scenicDetailMapImg\"\r\n                src={imgUrl}\r\n                onClick={()=>this.showElementMarkerMap()}\r\n                alt=''/>\r\n        );\r\n    }\r\n    renderBasicViews()\r\n    {\r\n        if(!this.props.detailItem)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div className=\"scenicDetailInfoRows\">\r\n                <div className=\"scenicDetailInfoRow\">\r\n                    <div className=\"scenicDetailInfoLabel\">地址</div>\r\n                    <div className=\"scenicDetailInfoValue\">{this.props.detailItem.Address}</div>\r\n                </div>\r\n                {\r\n                    (this.props.detailItem.Telephone && this.props.detailItem.Telephone.length > 0)\r\n                        ?\r\n                        <div className=\"scenicDetailInfoRow\">\r\n                            <div className=\"scenicDetailInfoLabel\">电话</div> \r\n                            <div className=\"scenicDetailInfoPhoneRow\" onClick={()=> SysUtil.openTel(this.props.detailItem.Telephone)}>\r\n                                <div className=\"scenicDetailInfoValue\">{this.props.detailItem.Telephone}</div>\r\n                                <div style={{flex:1}}/>\r\n                                <img className=\"scenicDetailInfoPhone\" src={require('../../assets/images/scenic/ico_phone_ora@2x.png')} alt=''/>\r\n                            </div>\r\n                        </div>\r\n                        :null\r\n                }\r\n                <div className=\"scenicDetailInfoRow\">\r\n                    <div className=\"scenicDetailInfoLabel\">营业时间</div>\r\n                    <div className=\"scenicDetailInfoValue\">{this.props.detailItem.BusinesTime}</div>\r\n                </div>\r\n                <div className=\"scenicDetailInfoRow\">\r\n                    <div className=\"scenicDetailInfoLabel\">景区简介</div>\r\n                    <div className=\"scenicDetailInfoValue scenicDetailMultDesc\">{this.props.detailItem.Summary}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderSceneryListView()\r\n    {\r\n        if(!this.props.sceneryList || this.props.sceneryList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div>\r\n                <div className=\"sceneryListSplitLine\"/>\r\n                <div className=\"sceneryTitleBox\">\r\n                    <div className=\"scenicDetailInfoLabel\">子景点</div>\r\n                    <div style={{flex: 1}}/>\r\n                    <div className=\"sceneryListMoreView\"\r\n                        onClick={this.showSceneryList}>\r\n                        更多 <img src={require('../../assets/images/more@2x.png')} alt=''/>\r\n                    </div>\r\n                </div>\r\n                <div className=\"sceneryListBox\">\r\n                    {\r\n                        this.props.sceneryList.map((item, index)=>this.renderSceneryView(index))\r\n                    }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderSceneryView(index)\r\n    {\r\n        if(index >= 10)\r\n        {\r\n            return null;\r\n        }\r\n        let item = this.props.sceneryList[index];\r\n        let imgUrl = item.GetImage && item.GetImage.ImageFrontUrl ? item.GetImage.ImageFrontUrl.replace('/Middle/', '/Small/') : '';\r\n        return (\r\n            <div key={index} \r\n                className=\"sceneryItemView\"\r\n                onClick={()=>{\r\n                    this.showSceneryDetail(index);\r\n                }}>\r\n                <img className=\"sceneryItemImg\"\r\n                    src={imgUrl}\r\n                    alt=''/>\r\n                <div className=\"sceneryItemName\">{item.CnName}</div>\r\n            </div>\r\n        );\r\n    }\r\n    loadData()\r\n    {\r\n        this.props.dispatch(asyncGetDetailAction(this.props.match.params.code)).then(()=>{\r\n            return this.props.dispatch(asyncGetTicketListAction(this.props.match.params.code));\r\n        }).then(()=>{\r\n            return this.props.dispatch(asyncGetSceneryListAction(this.props.match.params.code));\r\n        });\r\n    }\r\n    cacheScrollOffset()\r\n    {\r\n        let offsetY = ReactDOM.findDOMNode(this.scrollView).scrollTop;\r\n        this.props.dispatch(setDetailScrollerPositionAction(this.props.match.params.code, offsetY));\r\n    }\r\n    restoreScrollViewPosition()\r\n    {\r\n        if(this.scrollView)\r\n        {\r\n            if(!isNaN(this.props.scrollViewOffset))\r\n            {\r\n                this.scrollView.scrollToY(this.props.scrollViewOffset);\r\n            }\r\n            else\r\n            {\r\n                this.scrollView.scrollToY(0);\r\n            }\r\n        }\r\n    }\r\n    showSceneryList()\r\n    {\r\n        this.cacheScrollOffset();\r\n        this.props.history.push(`/scenic/scenery-list/${this.props.match.params.code}`);\r\n    }\r\n    showSceneryDetail(index)\r\n    {\r\n        let item = this.props.sceneryList[index];\r\n        this.cacheScrollOffset();\r\n        this.props.history.push(`/scenic/scenery-detail/${this.props.match.params.code}/${item.Code}`);\r\n    }\r\n    startScoreAnimation(detailItem)\r\n    {\r\n        // 这样进度条可以有动画\r\n        setTimeout(()=>{\r\n            this.setState({\r\n                Score: detailItem.Score ? detailItem.Score : 3.0,\r\n                PriceScore: detailItem.PriceScore ? detailItem.PriceScore : 3.0,\r\n                ServiceScore: detailItem.ServiceScore ? detailItem.ServiceScore : 3.0,\r\n                InstallationScore: detailItem.InstallationScore ? detailItem.InstallationScore : 3.0,\r\n                EnvironmentScore: detailItem.EnvironmentScore ? detailItem.EnvironmentScore: 3.0,\r\n            });\r\n        }, 700);\r\n    }\r\n\r\n    showElementMarkerMap()\r\n    {\r\n        this.cacheScrollOffset();\r\n        let detailItem = this.props.detailItem;\r\n        this.props.history.push(`/map/elementMarker/${this.props.match.params.code}/${detailItem.CnName}/${detailItem.Address}/${detailItem.Latitude}/${detailItem.Longitude}`);\r\n    }\r\n\r\n    showImageBrowser()\r\n    {\r\n        if(!this.props.detailItem || !this.props.detailItem.GetImage || !this.props.detailItem.GetImage.ImageList || this.props.detailItem.GetImage.ImageList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        let imageList = [];\r\n        for (let i = 0; i < this.props.detailItem.GetImage.ImageList.length; i++)\r\n        {\r\n            let imageItem = this.props.detailItem.GetImage.ImageList[i];\r\n            imageList.push(imageItem.ImgSrc.replace('Small', 'Large'));\r\n        }\r\n\r\n        this.photoBrowserView.open(imageList);\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    let obj = state.scenic.detailScreen[ownProps.match.params.code];\r\n    return {\r\n        ...obj,\r\n        isUserLogined: SysUtil.isUserLogined(state),\r\n    };\r\n};\r\n\r\nScenicDetailScreen = connect(mapStateToProps)(ScenicDetailScreen);\r\n\r\nexport default ScenicDetailScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/scenic/ScenicDetailScreen.js","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function goBackAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GO_BACK,\r\n        code,\r\n    };\r\n}\r\n\r\n// 景区详情\r\nexport function asyncGetDetailAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getDetailRequestAction(code));\r\n        return _fetchDetail(code).then((resp)=>{\r\n            resp = (resp && resp.results && resp.results.length > 0) ? resp.results[0] : resp;\r\n            dispatch(_getDetailSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getDetailFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 门票列表\r\nexport function asyncGetTicketListAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getTicketListRequestAction(code));\r\n        return _fetchTicketList(code).then((resp)=>{\r\n            resp = resp ? resp.results : [];\r\n            dispatch(_getTicketListSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getTicketListFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 景点列表\r\nexport function asyncGetSceneryListAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getGetSceneryListRequestAction(code));\r\n        return _fetchGetSceneryList(code).then((resp)=>{\r\n            resp = resp ? resp.results : [];\r\n            dispatch(_getGetSceneryListSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getGetSceneryListFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 景区详情页面滚动条位置\r\nexport function setDetailScrollerPositionAction(code, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,\r\n        code,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\n// 景点列表页面滚动条位置\r\nexport function setSceneryListScrollerPositionAction(code, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,\r\n        code,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\nexport function setSceneryDetailScrollerPositionAction(scenicCode, sceneryCode, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,\r\n        code: scenicCode,\r\n        sceneryCode,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\nfunction _fetchGetSceneryList(code)\r\n{\r\n    let kvDict = {\r\n        ConditionParams: {\r\n            Params: {\r\n                Code: code\r\n            }\r\n        }\r\n    };\r\n    return HttpClient.postToPortalWithUrl(HttpClient.HOST_E_BUSINESS,IConstant.PortalApis.ELEMENTS.SceneryList,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getGetSceneryListRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getGetSceneryListSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,\r\n        code,\r\n        sceneryList: resp,\r\n    };\r\n}\r\n\r\nfunction _getGetSceneryListFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchTicketList(code)\r\n{\r\n    let kvDict = {\r\n        ConditionParams: {\r\n            Params: {\r\n                Code: code,\r\n                PlayDate: new Date().formatDate('YYYY-MM-DD')\r\n            }\r\n        }\r\n    };\r\n    return HttpClient.postToPortalWithUrl(HttpClient.HOST_E_BUSINESS,IConstant.PortalApis.ELEMENTS.AttractionsTicketList,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getTicketListRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getTicketListSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,\r\n        code,\r\n        ticketList: resp\r\n    };\r\n}\r\n\r\nfunction _getTicketListFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchDetail(code)\r\n{\r\n    let kvDict = {\r\n        ConditionParams: {\r\n            Params:{ Code: code }\r\n        }\r\n    };\r\n    return HttpClient.postToPortalWithUrl(HttpClient.HOST_E_BUSINESS,IConstant.PortalApis.ELEMENTS.AttractionsDetail,kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getDetailRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getDetailSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_SUCCESS,\r\n        code,\r\n        detailItem: resp\r\n    };\r\n}\r\n\r\nfunction _getDetailFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/scenic/detailAction.js","module.exports = __webpack_public_path__ + \"static/media/ico_a_full@2x.a5d6eea0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/scenic/ico_a_full@2x.png\n// module id = 898\n// module chunks = 8 9","module.exports = __webpack_public_path__ + \"static/media/ico_a_empty@2x.f866e867.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/scenic/ico_a_empty@2x.png\n// module id = 899\n// module chunks = 8 9","module.exports = __webpack_public_path__ + \"static/media/more@2x.19f5c55a.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/more@2x.png\n// module id = 929\n// module chunks = 9"],"sourceRoot":""}