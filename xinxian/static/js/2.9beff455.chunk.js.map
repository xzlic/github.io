{"version":3,"sources":["../static/js/2.9beff455.chunk.js","screens/scenic/ScenicRecommendListScreen.js","assets/images/scenic/ico_a_full@2x.png","assets/images/scenic/ico_a_empty@2x.png","store/actions/scenic/recommendListAction.js","views/scenic/ScenicRecommendListView.js"],"names":["webpackJsonp","862","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8__views_common_Content__","__WEBPACK_IMPORTED_MODULE_9__views_scenic_ScenicRecommendListView__","__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__","__WEBPACK_IMPORTED_MODULE_11__assets_css_scenic_css__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","ScenicRecommendListScreen","_Component","this","_this","getPrototypeOf","onItemClick","bind","goBack","showCommonList","_this2","listViewHeight","window","innerHeight","a","createElement","mode","className","icon","type","onLeftClick","values","tintColor","selectedIndex","onValueChange","ref","listView","getWrappedInstance","height","item","cacheScrollOffset","history","push","WEB_BASE_ATTRACTIONS_Code","dispatch","867","exports","p","868","872","asyncGetListAction","getState","_getListRequestAction","_fetchList","then","resp","dataList","results","_getListSuccessAction","catch","error","_getListFailureAction","goBackAction","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","SCENIC","RECOMMEND_LIST","GO_BACK","asyncDeleteListAction","deleteListAction","Promise","resolve","DELETE","setScrollerPositionAction","offset","SET_LISTVIEW_OFFSET","listViewOffset","orderFiled","orderType","pageIndex","searchKey","url","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","HOST_PORTAL","kvDict","format","Identifier","getData","json","GET_LIST_REQUEST","GET_LIST_SUCCESS","GET_LIST_FAILURE","message","906","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default","__WEBPACK_IMPORTED_MODULE_8_prop_types__","__WEBPACK_IMPORTED_MODULE_8_prop_types___default","__WEBPACK_IMPORTED_MODULE_9_react_dom__","__WEBPACK_IMPORTED_MODULE_9_react_dom___default","__WEBPACK_IMPORTED_MODULE_11__core_utils_UIUtil__","__WEBPACK_IMPORTED_MODULE_12__core_utils_IConstant__","ScenicRecommendListView","renderRow","onRefresh","dataSource","DataSource","rowHasChanged","row1","row2","sectionHeaderHasChanged","s1","s2","state","cloneWithRows","loadData","isNaN","scrollTo","nextProps","setState","style","renderListView","isFetching","toast","text","separator","sectionID","rowID","backgroundColor","el","fixListViewHeightIssue","renderSeparator","overflow","pullToRefresh","refreshing","initialListSize","pageSize","scrollRenderAheadDistance","scrollEventThrottle","onEndReachedThreshold","str","_this3","_this4","star","WEB_BASE_ATTRACTIONS_AttractionsStar","starImg","starEmptyImg","onClick","backgroundImage","WEB_BASE_ATTRACTIONS_F_MiddleImage","WEB_BASE_ATTRACTIONS_CnName","Array","fill","map","index","src","alt","offsetY","findDOMNode","scrollTop","propTypes","func","mapStateToProps","assign","scenic","recommendListScreen","withRef"],"mappings":"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","file":"static/js/2.9beff455.chunk.js","sourcesContent":["webpackJsonp([2],{\n\n/***/ 862:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_segmented_control_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__views_common_Content__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9__views_scenic_ScenicRecommendListView__ = __webpack_require__(906);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__ = __webpack_require__(872);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__assets_css_scenic_css__ = __webpack_require__(272);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__assets_css_scenic_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_11__assets_css_scenic_css__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ScenicRecommendListScreen=function(_Component){_inherits(ScenicRecommendListScreen,_Component);function ScenicRecommendListScreen(props){_classCallCheck(this,ScenicRecommendListScreen);var _this=_possibleConstructorReturn(this,(ScenicRecommendListScreen.__proto__||Object.getPrototypeOf(ScenicRecommendListScreen)).call(this,props));_this.onItemClick=_this.onItemClick.bind(_this);_this.goBack=_this.goBack.bind(_this);_this.showCommonList=_this.showCommonList.bind(_this);return _this;}_createClass(ScenicRecommendListScreen,[{key:'render',value:function render(){var _this2=this;var listViewHeight=window.innerHeight-45;return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',icon:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default.a,{type:'left'}),onLeftClick:this.goBack},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_segmented_control___default.a,{values:['非游不可','全部景区'],tintColor:'white',selectedIndex:0,onValueChange:this.showCommonList})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__views_common_Content__[\"a\" /* default */],null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9__views_scenic_ScenicRecommendListView__[\"a\" /* default */],{ref:function ref(listView){if(listView){_this2.listView=listView.getWrappedInstance();}},onItemClick:this.onItemClick,height:listViewHeight})));}},{key:'onItemClick',value:function onItemClick(item){if(!item){return;}if(this.listView){this.listView.cacheScrollOffset();}this.props.history.push('/scenic/detail/'+item.WEB_BASE_ATTRACTIONS_Code);}},{key:'goBack',value:function goBack(){var dispatch=this.props.dispatch;this.props.history.goBack();dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"c\" /* goBackAction */])());}},{key:'showCommonList',value:function showCommonList(){if(this.listView){this.listView.cacheScrollOffset();}this.props.history.push('/scenic/list?segment=true');}}]);return ScenicRecommendListScreen;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"Component\"]);ScenicRecommendListScreen=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])()(ScenicRecommendListScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (ScenicRecommendListScreen);\n\n/***/ }),\n\n/***/ 867:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_a_full@2x.a5d6eea0.png\";\n\n/***/ }),\n\n/***/ 868:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__.p + \"static/media/ico_a_empty@2x.f866e867.png\";\n\n/***/ }),\n\n/***/ 872:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncDeleteListAction;\n/* unused harmony export deleteListAction */\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = setScrollerPositionAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction asyncGetListAction(){return function(dispatch,getState){dispatch(_getListRequestAction());return _fetchList().then(function(resp){var dataList=resp&&resp.results&&resp.results.length>0?resp.results[0].value:[];dispatch(_getListSuccessAction(dataList));}).catch(function(error){dispatch(_getListFailureAction(error));});};}function goBackAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.RECOMMEND_LIST.GO_BACK};}function asyncDeleteListAction(){return function(dispatch,getState){dispatch(deleteListAction());return new Promise(function(resolve){resolve();});};}function deleteListAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.RECOMMEND_LIST.DELETE};}function setScrollerPositionAction(offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.RECOMMEND_LIST.SET_LISTVIEW_OFFSET,listViewOffset:offset};}function _fetchList(orderFiled,orderType,pageIndex,searchKey){var url=__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_PORTAL+'/Api/CMSService/GetModuleData';var kvDict={format:'json',Identifier:'mobile/wanzhuan/you'};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getData(url,kvDict).then(function(resp){return resp.json();});}function _getListRequestAction(){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.RECOMMEND_LIST.GET_LIST_REQUEST};}function _getListSuccessAction(dataList){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.RECOMMEND_LIST.GET_LIST_SUCCESS,dataList:dataList};}function _getListFailureAction(error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.RECOMMEND_LIST.GET_LIST_FAILURE,message:error};}\n\n/***/ }),\n\n/***/ 906:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__ = __webpack_require__(23);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_pull_to_refresh_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__ = __webpack_require__(24);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__ = __webpack_require__(17);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_activity_indicator_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__ = __webpack_require__(18);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css__ = __webpack_require__(25);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_list_view_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view__ = __webpack_require__(26);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_prop_types__ = __webpack_require__(6);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_prop_types___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_prop_types__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__ = __webpack_require__(872);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__core_utils_UIUtil__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__core_utils_IConstant__ = __webpack_require__(1);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ScenicRecommendListView=function(_Component){_inherits(ScenicRecommendListView,_Component);function ScenicRecommendListView(props){_classCallCheck(this,ScenicRecommendListView);var _this=_possibleConstructorReturn(this,(ScenicRecommendListView.__proto__||Object.getPrototypeOf(ScenicRecommendListView)).call(this,props));_this.renderRow=_this.renderRow.bind(_this);_this.onRefresh=_this.onRefresh.bind(_this);var dataSource=new __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default.a.DataSource({rowHasChanged:function rowHasChanged(row1,row2){return row1!==row2;},sectionHeaderHasChanged:function sectionHeaderHasChanged(s1,s2){return s1!==s2;}});_this.state={dataSource:dataSource.cloneWithRows(_this.props.dataList?_this.props.dataList:[])};return _this;}_createClass(ScenicRecommendListView,[{key:'componentDidMount',value:function componentDidMount(){// 处理返回\nif(!this.props.dataList){this.loadData();}if(this.listView&&!isNaN(this.props.listViewOffset)){this.listView.scrollTo(0,this.props.listViewOffset);}}},{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(this.props.dataList!==nextProps.dataList){this.setState({dataSource:this.state.dataSource.cloneWithRows(nextProps.dataList?nextProps.dataList:[])});}}},{key:'render',value:function render(){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicListBox',style:{height:this.props.height}},this.renderListView(),this.props.isFetching?__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_activity_indicator___default.a,{toast:true,text:'Loading...'}):null);}},{key:'renderListView',value:function renderListView(){var _this2=this;if(this.props.dataList&&this.props.dataList.length>=0){var separator=function separator(sectionID,rowID){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:sectionID+'-'+rowID,style:{height:'5px',backgroundColor:'#2d2327'}});};return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_list_view___default.a,{ref:function ref(el){_this2.listView=el;__WEBPACK_IMPORTED_MODULE_11__core_utils_UIUtil__[\"a\" /* default */].fixListViewHeightIssue(el,_this2.props.height);},dataSource:this.state.dataSource,renderRow:this.renderRow,renderSeparator:separator,style:{height:this.props.height,overflow:'auto'},pullToRefresh:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_pull_to_refresh___default.a,{refreshing:this.props.isFetching,onRefresh:this.onRefresh}),initialListSize:this.props.dataList.length,pageSize:20,scrollRenderAheadDistance:500,scrollEventThrottle:50,onEndReachedThreshold:20});}}},{key:'isEmptyString',value:function isEmptyString(str){return!str||str.length===0;}},{key:'onRefresh',value:function onRefresh(){var _this3=this;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"a\" /* asyncDeleteListAction */])()).then(function(){_this3.loadData();});}},{key:'renderRow',value:function renderRow(item,sectionID,rowID){var _this4=this;var star=__WEBPACK_IMPORTED_MODULE_12__core_utils_IConstant__[\"h\" /* SCENIC_STAR */][item.WEB_BASE_ATTRACTIONS_AttractionsStar];star=star?star:0;var starImg=__webpack_require__(867);var starEmptyImg=__webpack_require__(868);return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:rowID,className:'scenicRecommendListItemBox',onClick:function onClick(){if(_this4.props.onItemClick){_this4.props.onItemClick(item);}}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicRecommendListItemBg',style:{backgroundImage:'url('+item.WEB_BASE_ATTRACTIONS_F_MiddleImage+')'}},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicRecommendListBottom'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomText'},item.WEB_BASE_ATTRACTIONS_CnName),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicRecommendListBottomStars'},new Array(5).fill(0).map(function(item,index){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('img',{key:index,className:'scenicDetailHeaderBottomStar',src:index<star?starImg:starEmptyImg,alt:''});})))));}},{key:'loadData',value:function loadData(){if(this.props.isFetching){return;}this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"b\" /* asyncGetListAction */])());}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){if(!this.listView){return;}var offsetY=__WEBPACK_IMPORTED_MODULE_9_react_dom___default.a.findDOMNode(this.listView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_10__store_actions_scenic_recommendListAction__[\"d\" /* setScrollerPositionAction */])(offsetY));}}]);return ScenicRecommendListView;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"Component\"]);ScenicRecommendListView.propTypes={// 列表项点击事件\nonItemClick:__WEBPACK_IMPORTED_MODULE_8_prop_types___default.a.func};var mapStateToProps=function mapStateToProps(state){return Object.assign({},state.scenic.recommendListScreen);};ScenicRecommendListView=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps,null,null,{withRef:true})(ScenicRecommendListView);/* harmony default export */ __webpack_exports__[\"a\"] = (ScenicRecommendListView);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/2.9beff455.chunk.js","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, Icon, SegmentedControl } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport ScenicRecommendListView from '../../views/scenic/ScenicRecommendListView';\r\nimport {  \r\n    goBackAction\r\n} from '../../store/actions/scenic/recommendListAction';\r\nimport '../../assets/css/scenic.css';\r\n\r\nclass ScenicRecommendListScreen extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.goBack = this.goBack.bind(this);\r\n        this.showCommonList = this.showCommonList.bind(this);\r\n    }\r\n    render()\r\n    {\r\n        let listViewHeight = window.innerHeight - 45;\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    icon={<Icon type=\"left\" />}\r\n                    onLeftClick={this.goBack}>\r\n                    <SegmentedControl values={['非游不可', '全部景区']} \r\n                        tintColor=\"white\" \r\n                        selectedIndex={0}\r\n                        onValueChange={this.showCommonList}/>\r\n                </NavBar>\r\n                <Content>\r\n                    <ScenicRecommendListView ref={(listView)=>{\r\n                        if(listView)\r\n                        {\r\n                            this.listView = listView.getWrappedInstance();\r\n                        }\r\n                    }}\r\n                    onItemClick={this.onItemClick}\r\n                    height={listViewHeight}/>\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    onItemClick(item)\r\n    {\r\n        if(!item)\r\n        {\r\n            return;\r\n        }\r\n        if(this.listView)\r\n        {\r\n            this.listView.cacheScrollOffset();\r\n        }\r\n        this.props.history.push(`/scenic/detail/${item.WEB_BASE_ATTRACTIONS_Code}`);\r\n    }\r\n    goBack()\r\n    {\r\n        let dispatch = this.props.dispatch;\r\n        this.props.history.goBack();\r\n        dispatch(goBackAction());\r\n    }\r\n    showCommonList()\r\n    {\r\n        if(this.listView)\r\n        {\r\n            this.listView.cacheScrollOffset();\r\n        }\r\n        this.props.history.push('/scenic/list?segment=true');\r\n    }\r\n}\r\n\r\nScenicRecommendListScreen = connect()(ScenicRecommendListScreen);\r\n\r\nexport default ScenicRecommendListScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/scenic/ScenicRecommendListScreen.js","module.exports = __webpack_public_path__ + \"static/media/ico_a_full@2x.a5d6eea0.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/scenic/ico_a_full@2x.png\n// module id = 867\n// module chunks = 2 3","module.exports = __webpack_public_path__ + \"static/media/ico_a_empty@2x.f866e867.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/scenic/ico_a_empty@2x.png\n// module id = 868\n// module chunks = 2 3","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function asyncGetListAction()\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getListRequestAction());\r\n        return _fetchList().then((resp)=>{\r\n            let dataList = (resp && resp.results && resp.results.length > 0) ? resp.results[0].value : [];\r\n            dispatch(_getListSuccessAction(dataList));\r\n        }).catch((error)=>{\r\n            dispatch(_getListFailureAction(error));\r\n        });\r\n    };\r\n}\r\n\r\nexport function goBackAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GO_BACK,\r\n    };\r\n}\r\n\r\nexport function asyncDeleteListAction()\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(deleteListAction());\r\n        return new Promise((resolve)=>{\r\n            resolve();\r\n        });\r\n    };\r\n}\r\n\r\nexport function deleteListAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.DELETE,\r\n    };\r\n}\r\n\r\nexport function setScrollerPositionAction(offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.SET_LISTVIEW_OFFSET,\r\n        listViewOffset: offset\r\n    };\r\n}\r\n\r\nfunction _fetchList(orderFiled, orderType, pageIndex, searchKey)\r\n{\r\n    let url = HttpClient.HOST_PORTAL + '/Api/CMSService/GetModuleData';\r\n    let kvDict = {\r\n        format: 'json',\r\n        Identifier: 'mobile/wanzhuan/you'\r\n    };\r\n    return HttpClient.getData(url, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getListRequestAction()\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GET_LIST_REQUEST,\r\n    };\r\n}\r\n\r\nfunction _getListSuccessAction(dataList)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GET_LIST_SUCCESS,\r\n        dataList\r\n    };\r\n}\r\n\r\nfunction _getListFailureAction(error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.RECOMMEND_LIST.GET_LIST_FAILURE,\r\n        message: error\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/scenic/recommendListAction.js","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport PropTypes from 'prop-types';\r\nimport ReactDOM from 'react-dom';\r\nimport { ListView, PullToRefresh, ActivityIndicator } from 'antd-mobile';\r\nimport { asyncGetListAction, asyncDeleteListAction, setScrollerPositionAction } from '../../store/actions/scenic/recommendListAction';\r\nimport UIUtil from '../../core/utils/UIUtil';\r\nimport { SCENIC_STAR } from '../../core/utils/IConstant';\r\n\r\nclass ScenicRecommendListView extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n\r\n        this.renderRow = this.renderRow.bind(this);\r\n        this.onRefresh = this.onRefresh.bind(this);\r\n        \r\n        const dataSource = new ListView.DataSource({\r\n            rowHasChanged: (row1, row2) => row1 !== row2,\r\n            sectionHeaderHasChanged: (s1, s2) => s1 !== s2,\r\n        });\r\n\r\n        this.state = {\r\n            dataSource: dataSource.cloneWithRows(this.props.dataList ? this.props.dataList : []),\r\n        };\r\n    }\r\n    componentDidMount()\r\n    {\r\n        // 处理返回\r\n        if(!this.props.dataList)\r\n        {\r\n            this.loadData();\r\n        }\r\n        if(this.listView && !isNaN(this.props.listViewOffset))\r\n        {\r\n            this.listView.scrollTo(0, this.props.listViewOffset);\r\n        }\r\n    }\r\n    componentWillReceiveProps(nextProps)\r\n    {\r\n        if(this.props.dataList !== nextProps.dataList)\r\n        {\r\n            this.setState({dataSource: this.state.dataSource.cloneWithRows(nextProps.dataList ? nextProps.dataList : [])});\r\n        }\r\n    }\r\n    render()\r\n    {\r\n        return (\r\n            <div className=\"scenicListBox\" style={{height: this.props.height}}>\r\n                {\r\n                    this.renderListView()\r\n                }\r\n                {\r\n                    this.props.isFetching\r\n                        ?\r\n                        <ActivityIndicator \r\n                            toast\r\n                            text=\"Loading...\" />\r\n                        :null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n    renderListView()\r\n    {\r\n        if(this.props.dataList && this.props.dataList.length >= 0)\r\n        {\r\n            const separator = (sectionID, rowID) => (\r\n                <div\r\n                    key={`${sectionID}-${rowID}`}\r\n                    style={{\r\n                        height: '5px',\r\n                        backgroundColor: '#2d2327',\r\n                    }}\r\n                />\r\n            );\r\n    \r\n            return (\r\n                <ListView\r\n                    ref={(el) => {\r\n                        this.listView = el;\r\n                        UIUtil.fixListViewHeightIssue(el, this.props.height);\r\n                    }}\r\n                    dataSource={this.state.dataSource}\r\n                    renderRow={this.renderRow}\r\n                    renderSeparator={separator}\r\n                    style={{\r\n                        height: this.props.height,\r\n                        overflow: 'auto',\r\n                    }}\r\n                    pullToRefresh={<PullToRefresh\r\n                        refreshing={this.props.isFetching}\r\n                        onRefresh={this.onRefresh}\r\n                    />}\r\n                    initialListSize={this.props.dataList.length}\r\n                    pageSize={20}\r\n                    scrollRenderAheadDistance={500}\r\n                    scrollEventThrottle={50}\r\n                    onEndReachedThreshold={20}/>\r\n            );\r\n        }\r\n    }\r\n    isEmptyString(str)\r\n    {\r\n        return !str || str.length === 0;\r\n    }\r\n    onRefresh()\r\n    {\r\n        this.props.dispatch(asyncDeleteListAction()).then(()=>{\r\n            this.loadData();\r\n        });\r\n    }\r\n    renderRow(item, sectionID, rowID)\r\n    {\r\n        let star = SCENIC_STAR[item.WEB_BASE_ATTRACTIONS_AttractionsStar];\r\n        star = star ? star : 0;\r\n\r\n        let starImg = require('../../assets/images/scenic/ico_a_full@2x.png');\r\n        let starEmptyImg = require('../../assets/images/scenic/ico_a_empty@2x.png');\r\n        return (\r\n            <div key={rowID} \r\n                className=\"scenicRecommendListItemBox\"\r\n                onClick={()=>{\r\n                    if(this.props.onItemClick)\r\n                    {\r\n                        this.props.onItemClick(item);\r\n                    }\r\n                }}>\r\n                <div className=\"scenicRecommendListItemBg\"\r\n                    style={{backgroundImage: `url(${item.WEB_BASE_ATTRACTIONS_F_MiddleImage})`}}>\r\n                    <div className=\"scenicRecommendListBottom\">\r\n                        <div className=\"scenicDetailHeaderBottomText\">{item.WEB_BASE_ATTRACTIONS_CnName}</div>\r\n                        <div className=\"scenicRecommendListBottomStars\">\r\n                            {\r\n                                new Array(5).fill(0).map((item, index)=><img key={index}\r\n                                    className=\"scenicDetailHeaderBottomStar\"\r\n                                    src={index < star ? starImg : starEmptyImg}\r\n                                    alt=''/>)\r\n                            }\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    loadData()\r\n    {\r\n        if(this.props.isFetching)\r\n        {\r\n            return;\r\n        }\r\n        this.props.dispatch(asyncGetListAction());\r\n    }\r\n    cacheScrollOffset()\r\n    {\r\n        if(!this.listView)\r\n        {\r\n            return;\r\n        }\r\n        let offsetY = ReactDOM.findDOMNode(this.listView).scrollTop;\r\n        this.props.dispatch(setScrollerPositionAction(offsetY));\r\n    }\r\n}\r\n\r\nScenicRecommendListView.propTypes = {\r\n    // 列表项点击事件\r\n    onItemClick: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = function(state)\r\n{\r\n    return {\r\n        ...state.scenic.recommendListScreen\r\n    };\r\n};\r\n\r\nScenicRecommendListView = connect(mapStateToProps, null, null, {withRef: true})(ScenicRecommendListView);\r\n\r\nexport default ScenicRecommendListView;\n\n\n// WEBPACK FOOTER //\n// ./src/views/scenic/ScenicRecommendListView.js"],"sourceRoot":""}