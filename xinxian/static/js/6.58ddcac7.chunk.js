webpackJsonp([6],{860:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var i=n(11),s=(n.n(i),n(12)),a=n.n(s),u=n(9),l=(n.n(u),n(10)),f=n.n(l),p=n(0),E=n.n(p),y=n(2),h=n(16),S=n.n(h),C=n(13),T=n(869),_=n(865),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),m=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showSceneryDetail=n.showSceneryDetail.bind(n),n}return c(t,e),d(t,[{key:"componentDidMount",value:function(){this.restoreScrollViewPosition()}},{key:"render",value:function(){var e=this;return E.a.createElement("div",null,E.a.createElement(a.a,{mode:"dark",className:"navBar",icon:E.a.createElement(f.a,{type:"left"}),onLeftClick:function(){e.props.history.goBack()}},"\u666f\u70b9\u5217\u8868"),E.a.createElement(C.a,{ref:function(t){e.scrollView=t}},E.a.createElement(T.a,{sceneryList:this.props.sceneryList,showSceneryDetail:this.showSceneryDetail})))}},{key:"cacheScrollOffset",value:function(){var e=S.a.findDOMNode(this.scrollView).scrollTop;this.props.dispatch(Object(_.g)(this.props.match.params.code,e))}},{key:"restoreScrollViewPosition",value:function(){this.scrollView&&(isNaN(this.props.sceneryListScreenScrollViewOffset)?this.scrollView.scrollToY(0):this.scrollView.scrollToY(this.props.sceneryListScreenScrollViewOffset))}},{key:"showSceneryDetail",value:function(e){this.cacheScrollOffset(),this.props.history.push("/scenic/scenery-detail/"+this.props.match.params.code+"/"+e.Code)}}]),t}(p.Component),I=function(e,t){var n=e.scenic.detailScreen[t.match.params.code];return Object.assign({},n)};m=Object(y.b)(I)(m),t.default=m},865:function(e,t,n){"use strict";function r(e){return{type:I.c.SCENIC.DETAIL.GO_BACK,code:e}}function o(e){return function(t,n){return t(_(e)),T(e).then(function(n){n=n&&n.results&&n.results.length>0?n.results[0]:n,t(d(e,n))}).catch(function(n){t(m(e,n))})}}function c(e){return function(t,n){return t(h(e)),y(e).then(function(n){n=n?n.results:[],t(S(e,n))}).catch(function(n){t(C(e,n))})}}function i(e){return function(t,n){return t(f(e)),l(e).then(function(n){n=n?n.results:[],t(p(e,n))}).catch(function(n){t(E(e,n))})}}function s(e,t){return{type:I.c.SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,code:e,scrollViewOffset:t}}function a(e,t){return{type:I.c.SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,code:e,scrollViewOffset:t}}function u(e,t,n){return{type:I.c.SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,code:e,sceneryCode:t,scrollViewOffset:n}}function l(e){var t=L.a.HOST_E_BUSINESS+"/api/Attractions/GetSceneryList",n={type:"app",Code:e};return L.a.getData(t,n).then(function(e){return e.json()})}function f(e){return{type:I.c.SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,code:e}}function p(e,t){return{type:I.c.SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,code:e,sceneryList:t}}function E(e,t){return{type:I.c.SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,code:e,message:t}}function y(e){var t=L.a.HOST_E_BUSINESS+"/api/Attractions/GetTicketList",n=new Date,r=n.getFullYear()+"-"+(n.getMonth()+1)+"-"+n.getDate(),o={type:"app",Code:e,selecttime:r};return L.a.getData(t,o).then(function(e){return e.json()})}function h(e){return{type:I.c.SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,code:e}}function S(e,t){return{type:I.c.SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,code:e,ticketList:t}}function C(e,t){return{type:I.c.SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,code:e,message:t}}function T(e){var t=L.a.HOST_E_BUSINESS+"/api/Attractions/GetAttractionsDetail",n={type:"app",Code:e};return L.a.getData(t,n).then(function(e){return e.json()})}function _(e){return{type:I.c.SCENIC.DETAIL.GET_DETAIL_REQUEST,code:e}}function d(e,t){return{type:I.c.SCENIC.DETAIL.GET_DETAIL_SUCCESS,code:e,detailItem:t}}function m(e,t){return{type:I.c.SCENIC.DETAIL.GET_DETAIL_FAILURE,code:e,message:t}}t.d=r,t.a=o,t.c=c,t.b=i,t.e=s,t.g=a,t.f=u;var I=n(1),L=n(8)},869:function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}function c(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var i=n(0),s=n.n(i),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=function(e){function t(){var e,n,c,i;r(this,t);for(var s=arguments.length,a=Array(s),u=0;u<s;u++)a[u]=arguments[u];return n=c=o(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(a))),c.columnCount=3,i=n,o(c,i)}return c(t,e),a(t,[{key:"render",value:function(){return this.renderSceneryListView()}},{key:"renderSceneryListView",value:function(){var e=this;if(!this.props.sceneryList||0===this.props.sceneryList.length)return null;for(var t=[],n=Math.ceil(this.props.sceneryList.length/this.columnCount),r=0;r<n;r++)t[r]=this.props.sceneryList.slice(r*this.columnCount,(r+1)*this.columnCount);return t.map(function(n,r){return e.renderSceneryRowView(n,r,r===t.length-1)})}},{key:"renderSceneryRowView",value:function(e,t,n){var r=this,o=(window.innerWidth-12*(this.columnCount+1))/this.columnCount,c=.75*o;return s.a.createElement("div",{key:t,className:"sceneryListRow",style:n?{marginBottom:"12px"}:{}},e.map(function(e,t){return s.a.createElement("div",{key:t,onClick:function(){r.props.showSceneryDetail&&r.props.showSceneryDetail(e)},className:"sceneryListRowItem",style:{width:o+"px",height:c+"px"}},s.a.createElement("img",{className:"sceneryListRowImg",src:e.GetImage?e.GetImage.ImageFrontUrl:"",style:{width:o+"px",height:c+"px"},alt:""}),s.a.createElement("div",{className:"sceneryListRowTitle"},e.CnName))}))}}]),t}(i.Component);t.a=u}});
//# sourceMappingURL=6.58ddcac7.chunk.js.map