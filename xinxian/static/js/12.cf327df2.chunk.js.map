{"version":3,"sources":["../static/js/12.cf327df2.chunk.js","screens/scenic/ScenicListScreen.js"],"names":["webpackJsonp","858","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_tabs_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_tabs__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_tabs___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_search_bar_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_search_bar__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_search_bar___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_segmented_control_style_css__","__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_segmented_control__","__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_segmented_control___default","__WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css__","__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon__","__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon___default","__WEBPACK_IMPORTED_MODULE_10_react__","__WEBPACK_IMPORTED_MODULE_10_react___default","__WEBPACK_IMPORTED_MODULE_11_react_redux__","__WEBPACK_IMPORTED_MODULE_12__views_common_Content__","__WEBPACK_IMPORTED_MODULE_13__views_scenic_ScenicListView__","__WEBPACK_IMPORTED_MODULE_14__core_utils_UIUtil__","__WEBPACK_IMPORTED_MODULE_15__store_actions_scenic_listAction__","__WEBPACK_IMPORTED_MODULE_16_query_string__","__WEBPACK_IMPORTED_MODULE_16_query_string___default","__WEBPACK_IMPORTED_MODULE_17__assets_css_scenic_css__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","ScenicListScreen","_Component","this","_this","getPrototypeOf","tabs","title","tabIndex","onItemClick","bind","goBack","_this2","tabHeight","window","innerHeight","listViewHeight","urlSearch","a","parse","location","search","createElement","mode","className","icon","type","onLeftClick","segment","values","tintColor","selectedIndex","onValueChange","placeholder","maxLength","keyword","onChange","val","updateKeyword","onSubmit","searchByKeyword","ref","updateComponentHeight","style","height","initialPage","selectedTabIndex","prerenderingSiblingsNumber","tab","index","dispatch","onTabClick","console","log","map","item","listView","getWrappedInstance","arguments","undefined","cacheScrollOffset","history","push","Code","mapStateToProps","state","scenic","listScreen"],"mappings":"AAAAA,cAAc,KAERC,IACA,SAAUC,EAAQC,EAAqBC,GAE7C,YAiC8f,SAASC,GAAgBC,EAASC,GAAa,KAAKD,YAAoBC,IAAc,KAAM,IAAIC,WAAU,qCAAuC,QAASC,GAA2BC,EAAKC,GAAM,IAAID,EAAM,KAAM,IAAIE,gBAAe,4DAA8D,QAAOD,GAAqB,iBAAPA,IAA+B,mBAAPA,GAAwBD,EAALC,EAAW,QAASE,GAAUC,EAASC,GAAY,GAAuB,mBAAbA,IAAsC,OAAbA,EAAmB,KAAM,IAAIP,WAAU,iEAAkEO,GAAaD,GAASE,UAAUC,OAAOC,OAAOH,GAAYA,EAAWC,WAAWG,aAAaC,MAAMN,EAASO,YAAW,EAAMC,UAAS,EAAKC,cAAa,KAAWR,IAAWE,OAAOO,eAAeP,OAAOO,eAAeV,EAASC,GAAYD,EAASW,UAAUV,GAhChyCE,OAAOS,eAAevB,EAAqB,cAAgBiB,OAAO,GAC7C,IAAIO,GAA+DvB,EAAoB,IAEnFwB,GADuExB,EAAoByB,EAAEF,GACxCvB,EAAoB,KACzE0B,EAA6D1B,EAAoByB,EAAED,GACnFG,EAAqE3B,EAAoB,IAEzF4B,GAD6E5B,EAAoByB,EAAEE,GACxC3B,EAAoB,KAC/E6B,EAAmE7B,EAAoByB,EAAEG,GACzFE,EAAkE9B,EAAoB,IAEtF+B,GAD0E/B,EAAoByB,EAAEK,GACxC9B,EAAoB,KAC5EgC,EAAgEhC,EAAoByB,EAAEM,GACtFE,EAA4EjC,EAAoB,IAEhGkC,GADoFlC,EAAoByB,EAAEQ,GACxCjC,EAAoB,KACtFmC,EAA0EnC,EAAoByB,EAAES,GAChGE,EAA+DpC,EAAoB,GAEnFqC,GADuErC,EAAoByB,EAAEW,GACxCpC,EAAoB,KACzEsC,EAA6DtC,EAAoByB,EAAEY,GACnFE,EAAuCvC,EAAoB,GAC3DwC,EAA+CxC,EAAoByB,EAAEc,GACrEE,EAA6CzC,EAAoB,GACjE0C,EAAuD1C,EAAoB,IAC3E2C,EAA8D3C,EAAoB,KAClF4C,EAAoD5C,EAAoB,IACxE6C,EAAkE7C,EAAoB,KACtF8C,EAA8C9C,EAAoB,IAClE+C,EAAsD/C,EAAoByB,EAAEqB,GAC5EE,EAAwDhD,EAAoB,KAEjGiD,GADqFjD,EAAoByB,EAAEuB,GAC9F,WAAW,QAASE,GAAiBC,EAAOC,GAAO,IAAI,GAAIC,GAAE,EAAEA,EAAED,EAAME,OAAOD,IAAI,CAAC,GAAIE,GAAWH,EAAMC,EAAGE,GAAWtC,WAAWsC,EAAWtC,aAAY,EAAMsC,EAAWpC,cAAa,EAAQ,SAAUoC,KAAWA,EAAWrC,UAAS,GAAKL,OAAOS,eAAe6B,EAAOI,EAAWC,IAAID,IAAc,MAAO,UAASpD,EAAYsD,EAAWC,GAAuI,MAAvHD,IAAWP,EAAiB/C,EAAYS,UAAU6C,GAAeC,GAAYR,EAAiB/C,EAAYuD,GAAoBvD,OCxBtewD,EDwB2zC,SAASC,GCft0C,QAAAD,GAAYP,GACZnD,EAAA4D,KAAAF,EAAA,IAAAG,GAAAzD,EAAAwD,MAAAF,EAAAtC,WAAAR,OAAAkD,eAAAJ,IAAApD,KAAAsD,KACUT,GADV,OAAAU,GARAE,OACKC,MAAO,eAAMC,SAAU,IACvBD,MAAO,eAAMC,SAAU,IACvBD,MAAO,eAAMC,SAAU,IACvBD,MAAO,eAAMC,SAAU,IACvBD,MAAO,eAAMC,SAAU,IAKxBJ,EAAKK,YAAcL,EAAKK,YAAYC,KAAjBN,GACnBA,EAAKO,OAASP,EAAKO,OAAOD,KAAZN,GAHlBA,EDcqqK,MAAn1HrD,GAAUkD,EAAiBC,GAA+bX,EAAaU,IAAmBH,IAAI,SAASxC,MAAM,WCR/1D,GAAAsD,GAAAT,KACQU,EAAYC,OAAOC,YAAP,GACZC,EAAiBF,OAAOC,YAAP,IAEjBE,EAAY5B,EAAA6B,EAAYC,MAAMhB,KAAKT,MAAM0B,SAASC,OAEtD,OACIvC,GAAAoC,EAAAI,cAAA,WACIxC,EAAAoC,EAAAI,cAAAhD,EAAA4C,GAAQK,KAAK,OACTC,UAAU,SACVC,KAAM3C,EAAAoC,EAAAI,cAAA1C,EAAAsC,GAAMQ,KAAK,SACjBC,YAAaxB,KAAKQ,QAEbM,GAAaA,EAAUW,QAEpB9C,EAAAoC,EAAAI,cAAA7C,EAAAyC,GAAkBW,QAAS,2BAAQ,4BAC/BC,UAAU,QACVC,cAAe,EACfC,cAAe7B,KAAKQ,SAExB,4BAGZ7B,EAAAoC,EAAAI,cAACtC,EAAA,EAAD,KACIF,EAAAoC,EAAAI,cAAAnD,EAAA+C,GAAWe,YAAY,uCACnBC,UAAW,GACX5E,MAAO6C,KAAKT,MAAMyC,QAClBC,SAAU,SAACC,GAAOzB,EAAK0B,cAAcD,IACrCE,SAAU,SAACF,GACPzB,EAAK0B,cAAcD,GACnBzB,EAAK4B,gBAAgBH,MAE7BvD,EAAAoC,EAAAI,cAAAtD,EAAAkD,GAAMZ,KAAMH,KAAKG,KACbmC,IAAK,SAACA,GAAD,MAAOvD,GAAA,EAAOwD,sBAAsBD,EAAK5B,IAC9C8B,OAAQC,OAAQ/B,GAChBgC,YAAa1C,KAAKT,MAAMoD,iBACxBC,2BAA4B,EAC5BX,SAAU,SAACY,EAAKC,GACZrC,EAAKlB,MAAMwD,SAAS/F,OAAAgC,EAAA,GAA0B8D,IAC9CrC,EAAK4B,gBAAgB5B,EAAKlB,MAAMyC,QAASc,IAE7CE,WAAY,SAACH,EAAKC,GAAYG,QAAQC,IAAI,aAAcJ,EAAOD,KAE3D7C,KAAKG,KAAKgD,IAAI,SAACC,EAAMN,GAAP,MAAenE,GAAAoC,EAAAI,cAACrC,EAAA,GAAea,IAAKmD,EAC9CR,IAAK,SAACe,GACCA,IAEC5C,EAAKN,KAAK2C,GAAOO,SAAWA,EAASC,uBAG7ChD,YAAaG,EAAKH,YAClBD,SAAU+C,EAAK/C,SACfoC,OAAQ5B,YD5CotIlB,IAAI,gBAAgBxC,MAAM,SCmDpwI6E,GAEVhC,KAAKT,MAAMwD,SAAS/F,OAAAgC,EAAA,GAAiBgD,ODrD+4IrC,IAAI,kBAAkBxC,MAAM,SCuDp8I6E,GAChB,GADyBc,GACzBS,UAAA9D,OAAA,OAAA+D,KAAAD,UAAA,GAAAA,UAAA,OADiCC,EAE7BV,OAAmBU,KAAVV,EAAuB9C,KAAKT,MAAMoD,iBAAmBG,CAC9D,IAAIO,GAA2BrD,KAAKG,KAAK2C,GAAOO,QAC5CA,IAIJA,EAAShB,gBAAgBL,MD/DosJrC,IAAI,cAAcxC,MAAM,SCiE7uJiG,GAER,GAAIA,EAAJ,CAIA,IAAI,GAAI5D,GAAI,EAAGA,EAAIQ,KAAKG,KAAKV,OAAQD,IACrC,CACI,GAAI6D,GAA2BrD,KAAKG,KAAKX,GAAG6D,QACzCA,IAECA,EAASI,oBAGjBzD,KAAKT,MAAMmE,QAAQC,KAAnB,kBAA0CP,EAAKQ,UD/E+5JjE,IAAI,SAASxC,MAAM,WCmFj+J,GAAI4F,GAAW/C,KAAKT,MAAMwD,QAC1B/C,MAAKT,MAAMmE,QAAQlD,SACnBuC,EAAS/F,OAAAgC,EAAA,UDrF+pKc,GCxBjpKpB,EAAA,WAiHzBmF,EAAkB,SAASC,GAE7B,OACInB,iBAAkBmB,EAAMC,OAAOC,WAAWrB,iBAC1CX,QAAS8B,EAAMC,OAAOC,WAAWhC,SAIzClC,GAAmB9C,OAAA4B,EAAA,GAAQiF,GAAiB/D,GAE5C5D,EAAA","file":"static/js/12.cf327df2.chunk.js","sourcesContent":["webpackJsonp([12],{\n\n/***/ 858:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_tabs_style_css__ = __webpack_require__(31);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_tabs_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_tabs_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_tabs__ = __webpack_require__(32);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_tabs___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_tabs__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_search_bar_style_css__ = __webpack_require__(37);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_search_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_search_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_search_bar__ = __webpack_require__(38);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_search_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_search_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_segmented_control_style_css__ = __webpack_require__(39);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_segmented_control_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_antd_mobile_lib_segmented_control_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_segmented_control__ = __webpack_require__(40);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_segmented_control___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_segmented_control__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_8_antd_mobile_lib_icon_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_10_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__views_common_Content__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_13__views_scenic_ScenicListView__ = __webpack_require__(275);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_14__core_utils_UIUtil__ = __webpack_require__(21);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_15__store_actions_scenic_listAction__ = __webpack_require__(276);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_query_string__ = __webpack_require__(46);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_16_query_string___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_16_query_string__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__assets_css_scenic_css__ = __webpack_require__(272);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_17__assets_css_scenic_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_17__assets_css_scenic_css__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var ScenicListScreen=function(_Component){_inherits(ScenicListScreen,_Component);function ScenicListScreen(props){_classCallCheck(this,ScenicListScreen);var _this=_possibleConstructorReturn(this,(ScenicListScreen.__proto__||Object.getPrototypeOf(ScenicListScreen)).call(this,props));_this.tabs=[{title:'综合',tabIndex:0},{title:'评分',tabIndex:1},{title:'价格',tabIndex:2},{title:'距离',tabIndex:3},{title:'最新',tabIndex:4}];_this.onItemClick=_this.onItemClick.bind(_this);_this.goBack=_this.goBack.bind(_this);return _this;}_createClass(ScenicListScreen,[{key:'render',value:function render(){var _this2=this;var tabHeight=window.innerHeight-(45+44);var listViewHeight=window.innerHeight-(45+44+44);var urlSearch=__WEBPACK_IMPORTED_MODULE_16_query_string___default.a.parse(this.props.location.search);return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',icon:__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_9_antd_mobile_lib_icon___default.a,{type:'left'}),onLeftClick:this.goBack},urlSearch&&urlSearch.segment?__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_7_antd_mobile_lib_segmented_control___default.a,{values:['非游不可','全部景区'],tintColor:'white',selectedIndex:1,onValueChange:this.goBack}):'景区列表'),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12__views_common_Content__[\"a\" /* default */],null,__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_search_bar___default.a,{placeholder:'\\u8BF7\\u8F93\\u5165\\u5173\\u952E\\u5B57',maxLength:20,value:this.props.keyword,onChange:function onChange(val){_this2.updateKeyword(val);},onSubmit:function onSubmit(val){_this2.updateKeyword(val);_this2.searchByKeyword(val);}}),__WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_tabs___default.a,{tabs:this.tabs,ref:function ref(_ref){return __WEBPACK_IMPORTED_MODULE_14__core_utils_UIUtil__[\"a\" /* default */].updateComponentHeight(_ref,tabHeight);},style:{height:tabHeight},initialPage:this.props.selectedTabIndex,prerenderingSiblingsNumber:0,onChange:function onChange(tab,index){_this2.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_15__store_actions_scenic_listAction__[\"f\" /* setSelectedTabIndexAction */])(index));_this2.searchByKeyword(_this2.props.keyword,index);},onTabClick:function onTabClick(tab,index){console.log('onTabClick',index,tab);}},this.tabs.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_10_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_13__views_scenic_ScenicListView__[\"a\" /* default */],{key:index,ref:function ref(listView){if(listView){_this2.tabs[index].listView=listView.getWrappedInstance();}},onItemClick:_this2.onItemClick,tabIndex:item.tabIndex,height:listViewHeight});}))));}},{key:'updateKeyword',value:function updateKeyword(keyword){this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_15__store_actions_scenic_listAction__[\"d\" /* setKeywordAction */])(keyword));}},{key:'searchByKeyword',value:function searchByKeyword(keyword){var index=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;index=index===undefined?this.props.selectedTabIndex:index;var listView=this.tabs[index].listView;if(!listView){return;}listView.searchByKeyword(keyword);}},{key:'onItemClick',value:function onItemClick(item){if(!item){return;}for(var i=0;i<this.tabs.length;i++){var listView=this.tabs[i].listView;if(listView){listView.cacheScrollOffset();}}this.props.history.push('/scenic/detail/'+item.Code);}},{key:'goBack',value:function goBack(){var dispatch=this.props.dispatch;this.props.history.goBack();dispatch(Object(__WEBPACK_IMPORTED_MODULE_15__store_actions_scenic_listAction__[\"c\" /* goBackAction */])());}}]);return ScenicListScreen;}(__WEBPACK_IMPORTED_MODULE_10_react__[\"Component\"]);var mapStateToProps=function mapStateToProps(state){return{selectedTabIndex:state.scenic.listScreen.selectedTabIndex,keyword:state.scenic.listScreen.keyword};};ScenicListScreen=Object(__WEBPACK_IMPORTED_MODULE_11_react_redux__[\"b\" /* connect */])(mapStateToProps)(ScenicListScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (ScenicListScreen);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/12.cf327df2.chunk.js","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { Tabs, NavBar, Icon, SearchBar, SegmentedControl } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport ScenicListView from '../../views/scenic/ScenicListView';\r\nimport UIUtil from '../../core/utils/UIUtil';\r\nimport { \r\n    setSelectedTabIndexAction, \r\n    goBackAction, \r\n    setKeywordAction \r\n} from '../../store/actions/scenic/listAction';\r\nimport queryString from 'query-string';\r\nimport '../../assets/css/scenic.css';\r\n\r\nclass ScenicListScreen extends Component\r\n{\r\n    tabs = [\r\n        {title: '综合', tabIndex: 0},\r\n        {title: '评分', tabIndex: 1},\r\n        {title: '价格', tabIndex: 2},\r\n        {title: '距离', tabIndex: 3},\r\n        {title: '最新', tabIndex: 4},        \r\n    ];\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.goBack = this.goBack.bind(this);\r\n    }\r\n    render()\r\n    {\r\n        let tabHeight = window.innerHeight - (45 + 44);\r\n        let listViewHeight = window.innerHeight - (45 + 44 + 44);\r\n\r\n        let urlSearch = queryString.parse(this.props.location.search);\r\n\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    icon={<Icon type=\"left\" />}\r\n                    onLeftClick={this.goBack}>\r\n                    {\r\n                        (urlSearch && urlSearch.segment)\r\n                            ?\r\n                            <SegmentedControl values={['非游不可', '全部景区']} \r\n                                tintColor=\"white\" \r\n                                selectedIndex={1}\r\n                                onValueChange={this.goBack}/>\r\n                            :\r\n                            '景区列表'\r\n                    }\r\n                </NavBar>\r\n                <Content>\r\n                    <SearchBar placeholder=\"请输入关键字\" \r\n                        maxLength={20} \r\n                        value={this.props.keyword}\r\n                        onChange={(val)=>{this.updateKeyword(val);}}\r\n                        onSubmit={(val)=>{\r\n                            this.updateKeyword(val);\r\n                            this.searchByKeyword(val);\r\n                        }}/>\r\n                    <Tabs tabs={this.tabs}\r\n                        ref={(ref)=>UIUtil.updateComponentHeight(ref, tabHeight)}\r\n                        style={{height: tabHeight}}\r\n                        initialPage={this.props.selectedTabIndex}\r\n                        prerenderingSiblingsNumber={0}\r\n                        onChange={(tab, index) => { \r\n                            this.props.dispatch(setSelectedTabIndexAction(index));\r\n                            this.searchByKeyword(this.props.keyword, index);\r\n                        }}\r\n                        onTabClick={(tab, index) => { console.log('onTabClick', index, tab); }}>\r\n                        {\r\n                            this.tabs.map((item, index)=><ScenicListView key={index} \r\n                                ref={(listView)=>{\r\n                                    if(listView)\r\n                                    {\r\n                                        this.tabs[index].listView = listView.getWrappedInstance();\r\n                                    }\r\n                                }}\r\n                                onItemClick={this.onItemClick}\r\n                                tabIndex={item.tabIndex} \r\n                                height={listViewHeight}/>)\r\n                        }\r\n                    </Tabs>\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    updateKeyword(keyword)\r\n    {\r\n        this.props.dispatch(setKeywordAction(keyword));\r\n    }\r\n    searchByKeyword(keyword, index = undefined)\r\n    {\r\n        index = (index === undefined) ? this.props.selectedTabIndex : index;\r\n        let listView: ScenicListView = this.tabs[index].listView;\r\n        if(!listView)\r\n        {\r\n            return;\r\n        }\r\n        listView.searchByKeyword(keyword);\r\n    }\r\n    onItemClick(item)\r\n    {\r\n        if(!item)\r\n        {\r\n            return;\r\n        }\r\n        for(let i = 0; i < this.tabs.length; i++)\r\n        {\r\n            let listView: ScenicListView = this.tabs[i].listView;\r\n            if(listView)\r\n            {\r\n                listView.cacheScrollOffset();\r\n            }\r\n        }\r\n        this.props.history.push(`/scenic/detail/${item.Code}`);\r\n    }\r\n    goBack()\r\n    {\r\n        let dispatch = this.props.dispatch;\r\n        this.props.history.goBack();\r\n        dispatch(goBackAction());\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state)\r\n{\r\n    return {\r\n        selectedTabIndex: state.scenic.listScreen.selectedTabIndex,\r\n        keyword: state.scenic.listScreen.keyword\r\n    };\r\n};\r\n\r\nScenicListScreen = connect(mapStateToProps)(ScenicListScreen);\r\n\r\nexport default ScenicListScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/scenic/ScenicListScreen.js"],"sourceRoot":""}