{"version":3,"sources":["../static/js/7.e9239f46.chunk.js","screens/scenic/SceneryDetailScreen.js","store/actions/scenic/detailAction.js","views/scenic/SceneryListView.js"],"names":["webpackJsonp","861","module","__webpack_exports__","__webpack_require__","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","defineProperty","__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__","n","__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default","__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__","__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default","__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__","__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default","__WEBPACK_IMPORTED_MODULE_6_react__","__WEBPACK_IMPORTED_MODULE_6_react___default","__WEBPACK_IMPORTED_MODULE_7_react_redux__","__WEBPACK_IMPORTED_MODULE_8__views_common_Content__","__WEBPACK_IMPORTED_MODULE_9_react_dom__","__WEBPACK_IMPORTED_MODULE_9_react_dom___default","__WEBPACK_IMPORTED_MODULE_10__views_scenic_SceneryListView__","__WEBPACK_IMPORTED_MODULE_11__store_actions_scenic_detailAction__","__WEBPACK_IMPORTED_MODULE_12__views_common_ImageBrowserView__","_createClass","defineProperties","target","props","i","length","descriptor","key","protoProps","staticProps","SceneryDetailScreen","_Component","this","_this","getPrototypeOf","showSceneryDetail","bind","showImageBrowser","state","imageList","nextProps","match","params","sceneryCode","restoreScrollViewPosition","_this2","a","createElement","mode","className","icon","type","onLeftClick","history","goBack","ref","view","scrollView","renderHeaderView","renderBasicView","renderOtherSceneryListView","isOpen","hiddenImageBrowser","setState","isValidData","index","getSelectedSceneryIndex","item","sceneryList","GetImage","ImageList","onClick","autoplay","dots","swiping","infinite","selectedIndex","swipeSpeed","map","style","backgroundImage","ImgSrc","marginTop","CnName","Scenerydesc","otherItems","slice","concat","Code","offsetY","findDOMNode","scrollTop","dispatch","scenicCode","isNaN","scrollViewOffset","scrollToY","cacheScrollOffset","push","imageItem","src","replace","mapStateToProps","ownProps","obj","scenic","detailScreen","865","goBackAction","code","__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__","SCENIC","DETAIL","GO_BACK","asyncGetDetailAction","getState","_getDetailRequestAction","_fetchDetail","then","resp","results","_getDetailSuccessAction","catch","error","_getDetailFailureAction","asyncGetTicketListAction","_getTicketListRequestAction","_fetchTicketList","_getTicketListSuccessAction","_getTicketListFailureAction","asyncGetSceneryListAction","_getGetSceneryListRequestAction","_fetchGetSceneryList","_getGetSceneryListSuccessAction","_getGetSceneryListFailureAction","setDetailScrollerPositionAction","offset","SET_DETAIL_SCROLL_OFFSET","setSceneryListScrollerPositionAction","SET_SCENERY_LIST_SCROLL_OFFSET","setSceneryDetailScrollerPositionAction","SET_SCENERY_DETAIL_SCROLL_OFFSET","url","__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__","HOST_E_BUSINESS","kvDict","getData","json","GET_SCENERY_LIST_REQUEST","GET_SCENERY_LIST_SUCCESS","GET_SCENERY_LIST_FAILURE","message","now","Date","date","getFullYear","getMonth","getDate","selecttime","GET_TICKET_LIST_REQUEST","GET_TICKET_LIST_SUCCESS","ticketList","GET_TICKET_LIST_FAILURE","GET_DETAIL_REQUEST","GET_DETAIL_SUCCESS","detailItem","GET_DETAIL_FAILURE","869","__WEBPACK_IMPORTED_MODULE_0_react__","__WEBPACK_IMPORTED_MODULE_0_react___default","SceneryListView","_ref","_temp","_ret","_len","arguments","args","Array","_key","apply","columnCount","renderSceneryListView","rows","rowLen","Math","ceil","row","renderSceneryRowView","isLastRow","_this3","itemWidth","window","innerWidth","itemHeight","marginBottom","_index","width","height","ImageFrontUrl","alt"],"mappings":"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","file":"static/js/7.e9239f46.chunk.js","sourcesContent":["webpackJsonp([7],{\n\n/***/ 861:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__ = __webpack_require__(35);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_antd_mobile_lib_carousel_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__ = __webpack_require__(36);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__ = __webpack_require__(11);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_2_antd_mobile_lib_nav_bar_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__ = __webpack_require__(12);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__ = __webpack_require__(9);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_4_antd_mobile_lib_icon_style_css__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__ = __webpack_require__(10);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_6_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_6_react__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_7_react_redux__ = __webpack_require__(2);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_8__views_common_Content__ = __webpack_require__(13);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom__ = __webpack_require__(16);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_9_react_dom___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_9_react_dom__);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_10__views_scenic_SceneryListView__ = __webpack_require__(869);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_11__store_actions_scenic_detailAction__ = __webpack_require__(865);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_12__views_common_ImageBrowserView__ = __webpack_require__(45);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var SceneryDetailScreen=function(_Component){_inherits(SceneryDetailScreen,_Component);function SceneryDetailScreen(props){_classCallCheck(this,SceneryDetailScreen);var _this=_possibleConstructorReturn(this,(SceneryDetailScreen.__proto__||Object.getPrototypeOf(SceneryDetailScreen)).call(this,props));_this.showSceneryDetail=_this.showSceneryDetail.bind(_this);_this.showImageBrowser=_this.showImageBrowser.bind(_this);_this.state={showImageBrowser:false,imageList:[]};return _this;}_createClass(SceneryDetailScreen,[{key:'componentWillReceiveProps',value:function componentWillReceiveProps(nextProps){if(this.props.match.params.sceneryCode!==nextProps.match.params.sceneryCode){this.restoreScrollViewPosition(nextProps);}}},{key:'componentDidMount',value:function componentDidMount(){this.restoreScrollViewPosition(this.props);}},{key:'render',value:function render(){var _this2=this;return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_3_antd_mobile_lib_nav_bar___default.a,{mode:'dark',className:'navBar',icon:__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_5_antd_mobile_lib_icon___default.a,{type:'left'}),onLeftClick:function onLeftClick(){_this2.props.history.goBack();}},'\\u666F\\u70B9\\u8BE6\\u60C5'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_8__views_common_Content__[\"a\" /* default */],{ref:function ref(view){_this2.scrollView=view;}},this.renderHeaderView(),this.renderBasicView(),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'homeSplitSpace'}),this.renderOtherSceneryListView(),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_12__views_common_ImageBrowserView__[\"a\" /* default */],{imageList:this.state.imageList,isOpen:this.state.showImageBrowser,hiddenImageBrowser:function hiddenImageBrowser(){_this2.setState({showImageBrowser:false});}})));}},{key:'renderHeaderView',value:function renderHeaderView(){if(!this.isValidData()){return null;}var index=this.getSelectedSceneryIndex();var item=this.props.sceneryList[index];if(!item.GetImage||!item.GetImage.ImageList||item.GetImage.ImageList.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeader',onClick:this.showImageBrowser},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_1_antd_mobile_lib_carousel___default.a,{className:'scenicDetailHeaderImgSlider',autoplay:true,dots:false,swiping:true,infinite:true,selectedIndex:0,swipeSpeed:35},item.GetImage.ImageList.map(function(item,index){return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{key:index,className:'scenicDetailHeaderImg',style:{backgroundImage:'url('+item.ImgSrc+')'}});})),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottom'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailHeaderBottomText',style:{marginTop:'130px'}},item.CnName)));}},{key:'renderBasicView',value:function renderBasicView(){if(!this.isValidData()){return null;}var item=this.props.sceneryList[this.getSelectedSceneryIndex()];return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRows sceneryDetailInfoRows'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoRow'},__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel'},'\\u666F\\u70B9\\u4ECB\\u7ECD'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoValue scenicDetailMultDesc'},item.Scenerydesc))));}},{key:'renderOtherSceneryListView',value:function renderOtherSceneryListView(){if(!this.isValidData()){return null;}var index=this.getSelectedSceneryIndex();var otherItems=this.props.sceneryList.slice(0,index).concat(this.props.sceneryList.slice(index+1));if(!otherItems||otherItems.length===0){return null;}return __WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',null,__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement('div',{className:'scenicDetailInfoLabel sceneryDetailInfoLabel'},'\\u5176\\u4ED6\\u666F\\u70B9'),__WEBPACK_IMPORTED_MODULE_6_react___default.a.createElement(__WEBPACK_IMPORTED_MODULE_10__views_scenic_SceneryListView__[\"a\" /* default */],{sceneryList:otherItems,showSceneryDetail:this.showSceneryDetail}));}},{key:'isValidData',value:function isValidData(){return this.props.sceneryList&&this.props.sceneryList.length>0&&this.props.match.params.sceneryCode&&this.props.match.params.sceneryCode.length>0;}},{key:'getSelectedSceneryIndex',value:function getSelectedSceneryIndex(){if(!this.isValidData()){return-1;}for(var i=0;i<this.props.sceneryList.length;i++){var item=this.props.sceneryList[i];if(item.Code===this.props.match.params.sceneryCode){return i;}}return-1;}},{key:'cacheScrollOffset',value:function cacheScrollOffset(){var offsetY=__WEBPACK_IMPORTED_MODULE_9_react_dom___default.a.findDOMNode(this.scrollView).scrollTop;this.props.dispatch(Object(__WEBPACK_IMPORTED_MODULE_11__store_actions_scenic_detailAction__[\"f\" /* setSceneryDetailScrollerPositionAction */])(this.props.match.params.scenicCode,this.props.match.params.sceneryCode,offsetY));}},{key:'restoreScrollViewPosition',value:function restoreScrollViewPosition(props){if(this.scrollView){if(!isNaN(props.scrollViewOffset)){this.scrollView.scrollToY(props.scrollViewOffset);}else{this.scrollView.scrollToY(0);}}}},{key:'showSceneryDetail',value:function showSceneryDetail(item){this.cacheScrollOffset();this.props.history.push('/scenic/scenery-detail/'+this.props.match.params.scenicCode+'/'+item.Code);}},{key:'showImageBrowser',value:function showImageBrowser(){var index=this.getSelectedSceneryIndex();var item=this.props.sceneryList[index];if(!item.GetImage||!item.GetImage.ImageList||item.GetImage.ImageList.length===0){return null;}if(!this.state.imageList||this.state.imageList.length<=0){var imageList=[];for(var i=0;i<item.GetImage.ImageList.length;i++){var imageItem=item.GetImage.ImageList[i];imageList.push({src:imageItem.ImgSrc.replace('Small','Large')});}this.setState({showImageBrowser:true,imageList:imageList});}else{this.setState({showImageBrowser:true});}}}]);return SceneryDetailScreen;}(__WEBPACK_IMPORTED_MODULE_6_react__[\"Component\"]);var mapStateToProps=function mapStateToProps(state,ownProps){var obj=state.scenic.detailScreen[ownProps.match.params.scenicCode];obj=obj?obj:{};return{sceneryList:obj.sceneryList,scrollViewOffset:obj['sceneryDetailScreenScrollViewOffset_'+ownProps.match.params.sceneryCode]};};SceneryDetailScreen=Object(__WEBPACK_IMPORTED_MODULE_7_react_redux__[\"b\" /* connect */])(mapStateToProps)(SceneryDetailScreen);/* harmony default export */ __webpack_exports__[\"default\"] = (SceneryDetailScreen);\n\n/***/ }),\n\n/***/ 865:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (immutable) */ __webpack_exports__[\"d\"] = goBackAction;\n/* harmony export (immutable) */ __webpack_exports__[\"a\"] = asyncGetDetailAction;\n/* harmony export (immutable) */ __webpack_exports__[\"c\"] = asyncGetTicketListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"b\"] = asyncGetSceneryListAction;\n/* harmony export (immutable) */ __webpack_exports__[\"e\"] = setDetailScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"g\"] = setSceneryListScrollerPositionAction;\n/* harmony export (immutable) */ __webpack_exports__[\"f\"] = setSceneryDetailScrollerPositionAction;\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__ = __webpack_require__(1);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__ = __webpack_require__(8);\nfunction goBackAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GO_BACK,code:code};}// 景区详情\nfunction asyncGetDetailAction(code){return function(dispatch,getState){dispatch(_getDetailRequestAction(code));return _fetchDetail(code).then(function(resp){resp=resp&&resp.results&&resp.results.length>0?resp.results[0]:resp;dispatch(_getDetailSuccessAction(code,resp));}).catch(function(error){dispatch(_getDetailFailureAction(code,error));});};}// 门票列表\nfunction asyncGetTicketListAction(code){return function(dispatch,getState){dispatch(_getTicketListRequestAction(code));return _fetchTicketList(code).then(function(resp){resp=resp?resp.results:[];dispatch(_getTicketListSuccessAction(code,resp));}).catch(function(error){dispatch(_getTicketListFailureAction(code,error));});};}// 景点列表\nfunction asyncGetSceneryListAction(code){return function(dispatch,getState){dispatch(_getGetSceneryListRequestAction(code));return _fetchGetSceneryList(code).then(function(resp){resp=resp?resp.results:[];dispatch(_getGetSceneryListSuccessAction(code,resp));}).catch(function(error){dispatch(_getGetSceneryListFailureAction(code,error));});};}// 景区详情页面滚动条位置\nfunction setDetailScrollerPositionAction(code,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,code:code,scrollViewOffset:offset};}// 景点列表页面滚动条位置\nfunction setSceneryListScrollerPositionAction(code,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,code:code,scrollViewOffset:offset};}function setSceneryDetailScrollerPositionAction(scenicCode,sceneryCode,offset){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,code:scenicCode,sceneryCode:sceneryCode,scrollViewOffset:offset};}function _fetchGetSceneryList(code){var url=__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS+'/api/Attractions/GetSceneryList';var kvDict={type:'app',Code:code};// url = 'http://10.9.100.220:8081/api/Attractions/GetSceneryList?Code=JQ465500000003&type=app';\n// kvDict = {};\nreturn __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getData(url,kvDict).then(function(resp){return resp.json();});}function _getGetSceneryListRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,code:code};}function _getGetSceneryListSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,code:code,sceneryList:resp};}function _getGetSceneryListFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,code:code,message:error};}function _fetchTicketList(code){var url=__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS+'/api/Attractions/GetTicketList';var now=new Date();var date=now.getFullYear()+'-'+(now.getMonth()+1)+'-'+now.getDate();var kvDict={type:'app',Code:code,selecttime:date};return __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getData(url,kvDict).then(function(resp){return resp.json();});}function _getTicketListRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,code:code};}function _getTicketListSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,code:code,ticketList:resp};}function _getTicketListFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,code:code,message:error};}function _fetchDetail(code){var url=__WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].HOST_E_BUSINESS+'/api/Attractions/GetAttractionsDetail';var kvDict={type:'app',Code:code};// url = 'http://10.9.100.220:8081/api/Attractions/GetAttractionsDetail?Code=JQ465500000003&type=app';\n// kvDict = {};\nreturn __WEBPACK_IMPORTED_MODULE_1__core_utils_HttpClient__[\"a\" /* default */].getData(url,kvDict).then(function(resp){return resp.json();});}function _getDetailRequestAction(code){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_REQUEST,code:code};}function _getDetailSuccessAction(code,resp){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_SUCCESS,code:code,detailItem:resp};}function _getDetailFailureAction(code,error){return{type:__WEBPACK_IMPORTED_MODULE_0__core_utils_IConstant__[\"c\" /* Actions */].SCENIC.DETAIL.GET_DETAIL_FAILURE,code:code,message:error};}\n\n/***/ }),\n\n/***/ 869:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react__ = __webpack_require__(0);\n/* harmony import */ var __WEBPACK_IMPORTED_MODULE_0_react___default = __webpack_require__.n(__WEBPACK_IMPORTED_MODULE_0_react__);\nvar _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if(\"value\"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError(\"Cannot call a class as a function\");}}function _possibleConstructorReturn(self,call){if(!self){throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");}return call&&(typeof call===\"object\"||typeof call===\"function\")?call:self;}function _inherits(subClass,superClass){if(typeof superClass!==\"function\"&&superClass!==null){throw new TypeError(\"Super expression must either be null or a function, not \"+typeof superClass);}subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:false,writable:true,configurable:true}});if(superClass)Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass;}var SceneryListView=function(_Component){_inherits(SceneryListView,_Component);function SceneryListView(){var _ref;var _temp,_this,_ret;_classCallCheck(this,SceneryListView);for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}return _ret=(_temp=(_this=_possibleConstructorReturn(this,(_ref=SceneryListView.__proto__||Object.getPrototypeOf(SceneryListView)).call.apply(_ref,[this].concat(args))),_this),_this.columnCount=3,_temp),_possibleConstructorReturn(_this,_ret);}// 每行3列\n_createClass(SceneryListView,[{key:'render',value:function render(){return this.renderSceneryListView();}},{key:'renderSceneryListView',value:function renderSceneryListView(){var _this2=this;if(!this.props.sceneryList||this.props.sceneryList.length===0){return null;}var rows=[];var rowLen=Math.ceil(this.props.sceneryList.length/this.columnCount);for(var i=0;i<rowLen;i++){rows[i]=this.props.sceneryList.slice(i*this.columnCount,(i+1)*this.columnCount);}return rows.map(function(row,index){return _this2.renderSceneryRowView(row,index,index===rows.length-1);});}},{key:'renderSceneryRowView',value:function renderSceneryRowView(row,index,isLastRow){var _this3=this;var itemWidth=(window.innerWidth-(this.columnCount+1)*12)/this.columnCount;var itemHeight=itemWidth*0.75;return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:index,className:'sceneryListRow',style:isLastRow?{marginBottom:'12px'}:{}},row.map(function(item,_index){return __WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{key:_index,onClick:function onClick(){if(_this3.props.showSceneryDetail){_this3.props.showSceneryDetail(item);}},className:'sceneryListRowItem',style:{width:itemWidth+'px',height:itemHeight+'px'}},__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('img',{className:'sceneryListRowImg',src:item.GetImage?item.GetImage.ImageFrontUrl:'',style:{width:itemWidth+'px',height:itemHeight+'px'},alt:''}),__WEBPACK_IMPORTED_MODULE_0_react___default.a.createElement('div',{className:'sceneryListRowTitle'},item.CnName));}));}}]);return SceneryListView;}(__WEBPACK_IMPORTED_MODULE_0_react__[\"Component\"]);/* harmony default export */ __webpack_exports__[\"a\"] = (SceneryListView);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// static/js/7.e9239f46.chunk.js","import React, { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { NavBar, Icon, Carousel } from 'antd-mobile';\r\nimport Content from '../../views/common/Content';\r\nimport ReactDOM from 'react-dom';\r\nimport SceneryListView from '../../views/scenic/SceneryListView';\r\nimport { setSceneryDetailScrollerPositionAction } from '../../store/actions/scenic/detailAction';\r\nimport ImageBrowserView from '../../views/common/ImageBrowserView';\r\nclass SceneryDetailScreen extends Component\r\n{\r\n    constructor(props)\r\n    {\r\n        super(props);\r\n        this.showSceneryDetail = this.showSceneryDetail.bind(this);\r\n        this.showImageBrowser = this.showImageBrowser.bind(this);\r\n        this.state = {\r\n            showImageBrowser:false,\r\n            imageList:[]\r\n        };\r\n    }\r\n    componentWillReceiveProps(nextProps)\r\n    {\r\n        if(this.props.match.params.sceneryCode !== nextProps.match.params.sceneryCode)\r\n        {\r\n            this.restoreScrollViewPosition(nextProps);\r\n        }\r\n    }\r\n    componentDidMount()\r\n    {\r\n        this.restoreScrollViewPosition(this.props);\r\n    }\r\n    render()\r\n    {\r\n        return (\r\n            <div>\r\n                <NavBar mode=\"dark\" \r\n                    className=\"navBar\"\r\n                    icon={<Icon type=\"left\" />}\r\n                    onLeftClick={() => {\r\n                        this.props.history.goBack();\r\n                    }}>\r\n                    景点详情\r\n                </NavBar>\r\n                <Content ref={(view)=>{this.scrollView = view;}}>\r\n                    {\r\n                        this.renderHeaderView()\r\n                    }\r\n                    {\r\n                        this.renderBasicView()\r\n                    }\r\n                    <div className=\"homeSplitSpace\"></div>\r\n                    {\r\n                        this.renderOtherSceneryListView()\r\n                    }\r\n                    <ImageBrowserView imageList={this.state.imageList}\r\n                        isOpen={this.state.showImageBrowser}\r\n                        hiddenImageBrowser={()=>{ this.setState({showImageBrowser:false}); }}/>\r\n                </Content>\r\n            </div>\r\n        );\r\n    }\r\n    renderHeaderView()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return null;\r\n        }\r\n        let index = this.getSelectedSceneryIndex();\r\n        let item = this.props.sceneryList[index];\r\n        if(!item.GetImage || !item.GetImage.ImageList || item.GetImage.ImageList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div className=\"scenicDetailHeader\" onClick={this.showImageBrowser}>\r\n                <Carousel\r\n                    className=\"scenicDetailHeaderImgSlider\"\r\n                    autoplay={true}\r\n                    dots={false}\r\n                    swiping={true}\r\n                    infinite\r\n                    selectedIndex={0}\r\n                    swipeSpeed={35}>\r\n                    {\r\n                        item.GetImage.ImageList.map((item, index)=><div key={index} className=\"scenicDetailHeaderImg\" style={{backgroundImage: `url(${item.ImgSrc})`}}/>)\r\n                    }\r\n                </Carousel>\r\n                <div className=\"scenicDetailHeaderBottom\">\r\n                    <div className=\"scenicDetailHeaderBottomText\" style={{marginTop: '130px'}}>{item.CnName}</div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderBasicView()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return null;\r\n        }\r\n        let item = this.props.sceneryList[this.getSelectedSceneryIndex()];\r\n        return (\r\n            <div>\r\n                <div className=\"scenicDetailInfoRows sceneryDetailInfoRows\">\r\n                    <div className=\"scenicDetailInfoRow\">\r\n                        <div className=\"scenicDetailInfoLabel\">景点介绍</div>\r\n                        <div className=\"scenicDetailInfoValue scenicDetailMultDesc\">{item.Scenerydesc}</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n    renderOtherSceneryListView()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return null;\r\n        }\r\n        let index = this.getSelectedSceneryIndex();\r\n        let otherItems = this.props.sceneryList.slice(0, index).concat(this.props.sceneryList.slice(index + 1));\r\n        if(!otherItems || otherItems.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        return (\r\n            <div>\r\n                <div className=\"scenicDetailInfoLabel sceneryDetailInfoLabel\">其他景点</div>\r\n                <SceneryListView sceneryList={otherItems}\r\n                    showSceneryDetail={this.showSceneryDetail}/>\r\n            </div>\r\n        );\r\n    }\r\n    isValidData()\r\n    {\r\n        return (this.props.sceneryList \r\n            && this.props.sceneryList.length > 0\r\n            && this.props.match.params.sceneryCode\r\n            && this.props.match.params.sceneryCode.length > 0);\r\n    }\r\n    getSelectedSceneryIndex()\r\n    {\r\n        if(!this.isValidData())\r\n        {\r\n            return -1;\r\n        }\r\n        for(let i = 0; i < this.props.sceneryList.length; i++)\r\n        {\r\n            let item = this.props.sceneryList[i];\r\n            if(item.Code === this.props.match.params.sceneryCode)\r\n            {\r\n                return i;\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n    cacheScrollOffset()\r\n    {\r\n        let offsetY = ReactDOM.findDOMNode(this.scrollView).scrollTop;\r\n        this.props.dispatch(setSceneryDetailScrollerPositionAction(this.props.match.params.scenicCode, this.props.match.params.sceneryCode, offsetY));\r\n    }\r\n    restoreScrollViewPosition(props)\r\n    {\r\n        if(this.scrollView)\r\n        {\r\n            if(!isNaN(props.scrollViewOffset))\r\n            {\r\n                this.scrollView.scrollToY(props.scrollViewOffset);\r\n            }\r\n            else\r\n            {\r\n                this.scrollView.scrollToY(0);\r\n            }\r\n        }\r\n    }\r\n    showSceneryDetail(item)\r\n    {\r\n        this.cacheScrollOffset();\r\n        this.props.history.push(`/scenic/scenery-detail/${this.props.match.params.scenicCode}/${item.Code}`);\r\n    }\r\n    showImageBrowser()\r\n    {\r\n        let index = this.getSelectedSceneryIndex();\r\n        let item = this.props.sceneryList[index];\r\n        if(!item.GetImage || !item.GetImage.ImageList || item.GetImage.ImageList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n\r\n        if (!this.state.imageList ||this.state.imageList.length <= 0)\r\n        {\r\n            let imageList = [];\r\n            for (let i = 0; i < item.GetImage.ImageList.length; i++)\r\n            {\r\n                let imageItem = item.GetImage.ImageList[i];\r\n                imageList.push({\r\n                    src: imageItem.ImgSrc.replace('Small','Large')\r\n                });\r\n            }\r\n            this.setState({showImageBrowser:true , imageList:imageList});\r\n        }\r\n        else\r\n        {\r\n            this.setState({showImageBrowser:true});\r\n        }\r\n    }\r\n}\r\n\r\nconst mapStateToProps = function(state, ownProps)\r\n{\r\n    let obj = state.scenic.detailScreen[ownProps.match.params.scenicCode];\r\n    obj = obj ? obj : {};\r\n    return {\r\n        sceneryList: obj.sceneryList,\r\n        scrollViewOffset: obj['sceneryDetailScreenScrollViewOffset_' + ownProps.match.params.sceneryCode]\r\n    };\r\n};\r\n\r\nSceneryDetailScreen = connect(mapStateToProps)(SceneryDetailScreen);\r\n\r\nexport default SceneryDetailScreen;\n\n\n// WEBPACK FOOTER //\n// ./src/screens/scenic/SceneryDetailScreen.js","import * as IConstant from '../../../core/utils/IConstant';\r\nimport HttpClient from '../../../core/utils/HttpClient';\r\n\r\nexport function goBackAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GO_BACK,\r\n        code,\r\n    };\r\n}\r\n\r\n// 景区详情\r\nexport function asyncGetDetailAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getDetailRequestAction(code));\r\n        return _fetchDetail(code).then((resp)=>{\r\n            resp = (resp && resp.results && resp.results.length > 0) ? resp.results[0] : resp;\r\n            dispatch(_getDetailSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getDetailFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 门票列表\r\nexport function asyncGetTicketListAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getTicketListRequestAction(code));\r\n        return _fetchTicketList(code).then((resp)=>{\r\n            resp = resp ? resp.results : [];\r\n            dispatch(_getTicketListSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getTicketListFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 景点列表\r\nexport function asyncGetSceneryListAction(code)\r\n{\r\n    return function(dispatch, getState)\r\n    {\r\n        dispatch(_getGetSceneryListRequestAction(code));\r\n        return _fetchGetSceneryList(code).then((resp)=>{\r\n            resp = resp ? resp.results : [];\r\n            dispatch(_getGetSceneryListSuccessAction(code, resp));\r\n        }).catch((error)=>{\r\n            dispatch(_getGetSceneryListFailureAction(code, error));\r\n        });\r\n    };\r\n}\r\n\r\n// 景区详情页面滚动条位置\r\nexport function setDetailScrollerPositionAction(code, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_DETAIL_SCROLL_OFFSET,\r\n        code,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\n// 景点列表页面滚动条位置\r\nexport function setSceneryListScrollerPositionAction(code, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_SCENERY_LIST_SCROLL_OFFSET,\r\n        code,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\nexport function setSceneryDetailScrollerPositionAction(scenicCode, sceneryCode, offset)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.SET_SCENERY_DETAIL_SCROLL_OFFSET,\r\n        code: scenicCode,\r\n        sceneryCode,\r\n        scrollViewOffset: offset,\r\n    };\r\n}\r\n\r\nfunction _fetchGetSceneryList(code)\r\n{\r\n    let url = HttpClient.HOST_E_BUSINESS + '/api/Attractions/GetSceneryList';\r\n    let kvDict = {type: 'app', Code: code};\r\n    // url = 'http://10.9.100.220:8081/api/Attractions/GetSceneryList?Code=JQ465500000003&type=app';\r\n    // kvDict = {};\r\n\r\n    return HttpClient.getData(url, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getGetSceneryListRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getGetSceneryListSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_SUCCESS,\r\n        code,\r\n        sceneryList: resp,\r\n    };\r\n}\r\n\r\nfunction _getGetSceneryListFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_SCENERY_LIST_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchTicketList(code)\r\n{\r\n    let url = HttpClient.HOST_E_BUSINESS + '/api/Attractions/GetTicketList';\r\n    let now = new Date();\r\n    let date = now.getFullYear() + '-' + (now.getMonth() + 1) + '-' + now.getDate();\r\n    let kvDict = {type: 'app', Code: code, selecttime: date};\r\n    return HttpClient.getData(url, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getTicketListRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getTicketListSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_SUCCESS,\r\n        code,\r\n        ticketList: resp\r\n    };\r\n}\r\n\r\nfunction _getTicketListFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_TICKET_LIST_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\r\n\r\nfunction _fetchDetail(code)\r\n{\r\n    let url = HttpClient.HOST_E_BUSINESS + '/api/Attractions/GetAttractionsDetail';\r\n    let kvDict = {type: 'app', Code: code};\r\n    // url = 'http://10.9.100.220:8081/api/Attractions/GetAttractionsDetail?Code=JQ465500000003&type=app';\r\n    // kvDict = {};\r\n    return HttpClient.getData(url, kvDict)\r\n        .then((resp) => resp.json());\r\n}\r\n\r\nfunction _getDetailRequestAction(code)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_REQUEST,\r\n        code,\r\n    };\r\n}\r\n\r\nfunction _getDetailSuccessAction(code, resp)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_SUCCESS,\r\n        code,\r\n        detailItem: resp\r\n    };\r\n}\r\n\r\nfunction _getDetailFailureAction(code, error)\r\n{\r\n    return {\r\n        type: IConstant.Actions.SCENIC.DETAIL.GET_DETAIL_FAILURE,\r\n        code,\r\n        message: error\r\n    };\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions/scenic/detailAction.js","import React, { Component } from 'react';\r\n\r\nexport default class SceneryListView extends Component\r\n{\r\n    // 每行3列\r\n    columnCount = 3;\r\n    render()\r\n    {\r\n        return this.renderSceneryListView();\r\n    }\r\n    renderSceneryListView()\r\n    {\r\n        if(!this.props.sceneryList || this.props.sceneryList.length === 0)\r\n        {\r\n            return null;\r\n        }\r\n        let rows = [];\r\n        let rowLen = Math.ceil(this.props.sceneryList.length / this.columnCount);\r\n        for(let i = 0; i < rowLen; i++)\r\n        {\r\n            rows[i] = this.props.sceneryList.slice(i * this.columnCount, (i + 1) * this.columnCount);\r\n        }\r\n        return rows.map((row, index)=>this.renderSceneryRowView(row, index, index === rows.length - 1));\r\n    }\r\n    renderSceneryRowView(row, index, isLastRow)\r\n    {\r\n        let itemWidth = (window.innerWidth - (this.columnCount + 1) * 12) / this.columnCount;\r\n        let itemHeight = itemWidth * 0.75;\r\n        return (\r\n            <div key={index} \r\n                className=\"sceneryListRow\"\r\n                style={isLastRow ? {marginBottom: '12px'} : {}}>\r\n                {\r\n                    row.map((item, _index)=><div key={_index} \r\n                        onClick={()=>{\r\n                            if(this.props.showSceneryDetail)\r\n                            {\r\n                                this.props.showSceneryDetail(item);\r\n                            }\r\n                        }}\r\n                        className=\"sceneryListRowItem\" \r\n                        style={{width: `${itemWidth}px`, height: `${itemHeight}px`}}>\r\n                        <img className=\"sceneryListRowImg\"\r\n                            src={item.GetImage ? item.GetImage.ImageFrontUrl : ''}\r\n                            style={{width: `${itemWidth}px`, height: `${itemHeight}px`}}\r\n                            alt=''/>\r\n                        <div className=\"sceneryListRowTitle\">{item.CnName}</div>\r\n                    </div>)\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/views/scenic/SceneryListView.js"],"sourceRoot":""}